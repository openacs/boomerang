/*
 * Copyright (c) 2011, Yahoo! Inc.  All rights reserved.
 * Copyright (c) 2011-2012, Log-Normal, Inc.  All rights reserved.
 * Copyright (c) 2012-2017, SOASTA, Inc. All rights reserved.
 * Copyright (c) 2017, Akamai Technologies, Inc. All rights reserved.
 * Copyrights licensed under the BSD License. See the accompanying LICENSE.txt file for terms.
 */
/* JavaScript MD5 1.0.1 Copyright 2011, Sebastian Tschan. Licensed under the MIT license. */
/* Boomerang Version: 1.0.0 207f868ce795c3cac6a35bb214d4a46d2342f10a */

"performance"in window&&window.performance&&"function"==typeof window.performance.mark&&!window.BOOMR_no_mark&&window.performance.mark("boomr:startup");BOOMR_start=(new Date).getTime();function BOOMR_check_doc_domain(e){"performance"in window&&window.performance&&"function"==typeof window.performance.mark&&!window.BOOMR_no_mark&&window.performance.mark("boomr:check_doc_domain");if(window){if(!e){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window)try{BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain&&(BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain)}catch(t){BOOMR.isCrossOriginError(t)||BOOMR.addError(t,"BOOMR_check_doc_domain.domainFix")}e=document.domain}if(e&&-1!==e.indexOf(".")&&window.parent){try{window.parent.document;return}catch(t){try{document.domain=e}catch(n){return}}try{window.parent.document;return}catch(t){e=e.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(e)}}}BOOMR_check_doc_domain();!function(d){var l,t,f,o,s,e,a,n=d;d.parent!==d&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase()&&(d=d.parent);f=d.document;d.BOOMR||(d.BOOMR={});BOOMR=d.BOOMR;if(!BOOMR.version){BOOMR.version="1.0.0";BOOMR.window=d;BOOMR.boomerang_frame=n;BOOMR.plugins||(BOOMR.plugins={});!function(){try{new d.CustomEvent("CustomEvent")!==undefined&&(o=function(e,t){return new d.CustomEvent(e,t)})}catch(e){}try{!o&&f.createEvent&&f.createEvent("CustomEvent")&&(o=function(e,t){var n=f.createEvent("CustomEvent");t=t||{cancelable:!1,bubbles:!1};n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);return n})}catch(e){}!o&&f.createEventObject&&(o=function(e,t){var n=f.createEventObject();n.type=n.propertyName=e;n.detail=t.detail;return n});o||(o=function(){return undefined})}();s=function(t,e,n){var r=o(t,{detail:e});r&&(n?BOOMR.setImmediate(i):i());function i(){try{f.dispatchEvent?f.dispatchEvent(r):f.fireEvent&&f.fireEvent("onpropertychange",r)}catch(e){BOOMR.debug("Error when dispatching "+t)}}};if("undefined"!=typeof f.hidden){e="visibilityState";a="visibilitychange"}else if("undefined"!=typeof f.mozHidden){e="mozVisibilityState";a="mozvisibilitychange"}else if("undefined"!=typeof f.msHidden){e="msVisibilityState";a="msvisibilitychange"}else if("undefined"!=typeof f.webkitHidden){e="webkitVisibilityState";a="webkitvisibilitychange"}l={beacon_url:"",beacon_url_force_https:!0,beacon_urls_allowed:[],beacon_type:"AUTO",beacon_auth_key:"Authorization",beacon_auth_token:undefined,beacon_with_credentials:!1,beacon_disable_sendbeacon:!1,site_domain:d.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",autorun:!0,hasSentPageLoadBeacon:!1,r:undefined,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],prerender_to_visible:[],before_beacon:[],beacon:[],page_load_beacon:[],xhr_load:[],click:[],form_submit:[],config:[],xhr_init:[],spa_init:[],spa_navigation:[],spa_cancel:[],xhr_send:[],xhr_error:[],error:[],netinfo:[],rage_click:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",beacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},translate_events:{onbeacon:"beacon",onconfig:"config",onerror:"error",onxhrerror:"xhr_error"},unloadEventsCount:0,unloadEventCalled:0,listenerCallbacks:{},vars:{},singleBeaconVars:{},varPriority:{"-1":{},1:{}},errors:{},disabled_plugins:{},localStorageSupported:!1,LOCAL_STORAGE_PREFIX:"_boomr_",nativeOverwrites:[],xb_handler:function(n){return function(e){var t;e||(e=d.event);e.target?t=e.target:e.srcElement&&(t=e.srcElement);3===t.nodeType&&(t=t.parentNode);t&&t.nodeName&&"OBJECT"===t.nodeName.toUpperCase()&&"application/x-shockwave-flash"===t.type||l.fireEvent(n,t)}},clearEvents:function(){var e;for(e in this.events)this.events.hasOwnProperty(e)&&(this.events[e]=[])},clearListeners:function(){var e;for(e in l.listenerCallbacks)if(l.listenerCallbacks.hasOwnProperty(e))for(;l.listenerCallbacks[e].length;)BOOMR.utils.removeListener(l.listenerCallbacks[e][0].el,e,l.listenerCallbacks[e][0].fn);l.listenerCallbacks={}},fireEvent:function(e,t){var n,r,i,o;e=e.toLowerCase();BOOMR.utils.mark("fire_event");BOOMR.utils.mark("fire_event:"+e+":start");this.translate_events[e]&&(e=this.translate_events[e]);if(this.events.hasOwnProperty(e)){this.public_events.hasOwnProperty(e)&&s(this.public_events[e],t);i=this.events[e];"before_beacon"!==e&&"beacon"!==e&&BOOMR.real_sendBeacon();o=i.length;for(n=0;n<o;n++)try{(r=i[n]).fn.call(r.scope,t,r.cb_data)}catch(a){BOOMR.addError(a,"fireEvent."+e+"<"+n+">")}for(n=0;n<o;n++)if(i[n].once){i.splice(n,1);o--;n--}BOOMR.utils.mark("fire_event:"+e+":end");BOOMR.utils.measure("fire_event:"+e,"fire_event:"+e+":start","fire_event:"+e+":end")}},spaNavigation:function(){l.onloadfired=!0},beaconUrlAllowed:function(e){if(!l.beacon_urls_allowed||0===l.beacon_urls_allowed.length)return!0;for(var t=0;t<l.beacon_urls_allowed.length;t++){if(new RegExp(l.beacon_urls_allowed[t]).exec(e))return!0}return!1},checkLocalStorageSupport:function(){var e=l.LOCAL_STORAGE_PREFIX+"clss";l.localStorageSupported=!1;try{if(!d.JSON||!d.localStorage)return;d.localStorage.setItem(e,e);l.localStorageSupported=d.localStorage.getItem(e)===e;d.localStorage.removeItem(e)}catch(t){l.localStorageSupported=!1}},onFrameUnloaded:function(){var e,t;BOOMR.isUnloaded=!0;for(e=0;e<l.nativeOverwrites.length;e++)(t=l.nativeOverwrites[e]).obj[t.functionName]=t.origFn;l.nativeOverwrites=[]}};t={t_start:BOOMR_start,t_end:undefined,url:"",config_url:null,loadedLate:!1,beaconsSent:0,isUnloaded:!1,beaconInQueue:!1,constants:{BEACON_TYPE_SPAS:["spa","spa_hard"],MAX_GET_LENGTH:2e3},session:{domain:l.site_domain,ID:Math.random().toString(36).replace(/^0\./,""),start:undefined,length:0,enabled:!0},utils:{hasPostMessageSupport:function(){return!(!d.postMessage||"function"!=typeof d.postMessage&&"object"!=typeof d.postMessage)},objectToString:function(e,t,n){var r,i=[];if(!e||"object"!=typeof e)return e;t===undefined&&(t="\n\t");n||(n=0);if(BOOMR.utils.isArray(e)){for(r=0;r<e.length;r++)0<n&&null!==e[r]&&"object"==typeof e[r]?i.push(this.objectToString(e[r],t+("\n\t"===t?"\t":""),n-1)):"&"===t?i.push(encodeURIComponent(e[r])):i.push(e[r]);t=","}else for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(0<n&&null!==e[r]&&"object"==typeof e[r]?i.push(encodeURIComponent(r)+"="+this.objectToString(e[r],t+("\n\t"===t?"\t":""),n-1)):"&"===t?i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r])):i.push(r+"="+e[r]));return i.join(t)},getCookie:function(e){if(!e)return null;BOOMR.utils.mark("get_cookie");e=" "+e+"=";var t,n;if(0<=(t=(n=" "+f.cookie+";").indexOf(e))){t+=e.length;return n=n.substring(t,n.indexOf(";",t)).replace(/^"/,"").replace(/"$/,"")}},setCookie:function(e,t,n){var r,i,o,a,s;if(!e||!BOOMR.session.domain||void 0===t){BOOMR.debug("Invalid parameters or site domain: "+e+"/"+t+"/"+BOOMR.session.domain);BOOMR.addVar("nocookie",1);return!1}BOOMR.utils.mark("set_cookie");if((i=e+'="'+(r=this.objectToString(t,"&"))+'"').length<500){a=[i,"path=/","domain="+BOOMR.session.domain];if("number"==typeof n){(s=new Date).setTime(s.getTime()+1e3*n);s=s.toGMTString();a.push("expires="+s)}f.cookie=a.join("; ");if(r===(o=this.getCookie(e))||void 0===o&&"number"==typeof n&&n<=0)return!0;BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+r+"\n"+o)}else BOOMR.warn("Cookie too long: "+i.length+" "+i);BOOMR.addVar("nocookie",1);return!1},getSubCookies:function(e){var t,n,r,i,o=!1,a={};if(!e)return null;if("string"!=typeof e){BOOMR.debug("TypeError: cookie is not a string: "+typeof e);return null}for(n=0,r=(t=e.split("&")).length;n<r;n++)if((i=t[n].split("="))[0]){i.push("");a[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);o=!0}return o?a:null},removeCookie:function(e){return this.setCookie(e,{},-86400)},getLocalStorage:function(e){var t,n;if(!e||!l.localStorageSupported)return null;BOOMR.utils.mark("get_local_storage");try{if(null===(t=d.localStorage.getItem(l.LOCAL_STORAGE_PREFIX+e)))return undefined;n=d.JSON.parse(t)}catch(r){BOOMR.warn(r);return null}if(!n||"object"!=typeof n.items){this.removeLocalStorage(e);return null}if("number"==typeof n.expires&&BOOMR.now()>=n.expires){this.removeLocalStorage(e);return undefined}return n.items},setLocalStorage:function(e,t,n){var r,i,o;if(!e||!l.localStorageSupported||"object"!=typeof t)return!1;BOOMR.utils.mark("set_local_storage");r={items:t};"number"==typeof n&&(r.expires=BOOMR.now()+1e3*n);if((i=d.JSON.stringify(r)).length<5e4){try{d.localStorage.setItem(l.LOCAL_STORAGE_PREFIX+e,i);if(i===(o=d.localStorage.getItem(l.LOCAL_STORAGE_PREFIX+e)))return!0}catch(a){}BOOMR.warn("Saved storage value doesn't match what we tried to set:\n"+i+"\n"+o)}else BOOMR.warn("Storage items too large: "+i.length+" "+i);return!1},removeLocalStorage:function(e){if(!e||!l.localStorageSupported)return!1;try{d.localStorage.removeItem(l.LOCAL_STORAGE_PREFIX+e);return!0}catch(t){}return!1},cleanupURL:function(e,t){if(!e||BOOMR.utils.isArray(e))return"";l.strip_query_string&&(e=e.replace(/\?.*/,"?qs-redacted"));if(void 0!==t&&e&&e.length>t){var n=e.indexOf("?");e=-1!==n&&n<t?e.substr(0,n)+"?...":e.substr(0,t-3)+"..."}return e},hashQueryString:function(e,t){if(!e)return e;if(!e.match){BOOMR.addError("TypeError: Not a string","hashQueryString",typeof e);return""}e.match(/^\/\//)&&(e=location.protocol+e);if(!e.match(/^(https?|file):/)){BOOMR.error("Passed in URL is invalid: "+e);return""}t&&(e=e.replace(/#.*/,""));return BOOMR.utils.MD5?e.replace(/\?([^#]*)/,function(e,t){return"?"+(10<t.length?BOOMR.utils.MD5(t):t)}):e},pluginConfig:function(e,t,n,r){var i,o=0;if(!t||!t[n])return!1;for(i=0;i<r.length;i++)if(t[n][r[i]]!==undefined){e[r[i]]=t[n][r[i]];o++}return 0<o},arrayFilter:function(e,t){var n=[];if(!(this.isArray(e)||e&&"number"==typeof e.length)||"function"!=typeof t)return n;if("function"==typeof e.filter)n=e.filter(t);else for(var r,i=-1,o=e.length;++i<o;)t(r=e[i],i,e)&&(n[n.length]=r);return n},arrayFind:function(e,t){if(!(this.isArray(e)||e&&"number"==typeof e.length)||"function"!=typeof t)return undefined;if("function"==typeof e.find)return e.find(t);for(var n,r=-1,i=e.length;++r<i;)if(t(n=e[r],r,e))return n;return undefined},isMutationObserverSupported:function(){return!(d&&d.navigator&&d.navigator.userAgent&&d.navigator.userAgent.match(/Trident.*rv[ :]*11\./))&&d&&d.MutationObserver&&"function"==typeof d.MutationObserver},addObserver:function(e,t,n,r,i,o){var a,s,u={observer:null,timer:null};BOOMR.utils.mark("add_observer");if(!this.isMutationObserverSupported()||!r||!e)return null;function c(e){var t=!1;BOOMR.utils.mark("mutation_observer_callback");if(u.timer){clearTimeout(u.timer);u.timer=null}r&&((t=r.call(o,e,i))||(r=null));if(!t&&u.observer){u.observer.disconnect();u.observer=null}"number"==typeof t&&0<t&&(u.timer=setTimeout(c,t))}a=d.MutationObserver;if(d.Zone&&"function"==typeof d.Zone.__symbol__&&(s=d.Zone.__symbol__("MutationObserver"))&&"string"==typeof s&&d.hasOwnProperty(s)&&"function"==typeof d[s]){BOOMR.debug("Detected Zone.js, using native MutationObserver");a=d[s]}u.observer=new a(c);n&&(u.timer=setTimeout(c,u.timeout));u.observer.observe(e,t);return u},addListener:function(e,t,n,r){var i=!1;BOOMR.utils.mark("add_listener");if(e.addEventListener){r&&BOOMR.browser.supportsPassive()&&(i={capture:!1,passive:!0});e.addEventListener(t,n,i)}else e.attachEvent&&e.attachEvent("on"+t,n);l.listenerCallbacks[t]=l.listenerCallbacks[t]||[];l.listenerCallbacks[t].push({el:e,fn:n})},removeListener:function(e,t,n){BOOMR.utils.mark("remove_listener");e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n);if(l.listenerCallbacks.hasOwnProperty(t))for(var r=0;r<l.listenerCallbacks[t].length;r++)if(n===l.listenerCallbacks[t][r].fn&&e===l.listenerCallbacks[t][r].el){l.listenerCallbacks[t].splice(r,1);return}},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},inArray:function(e,t){var n;if(void 0===e||void 0===t||!t.length)return!1;for(n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},getQueryParamValue:function(e,t){var n,r,i,o;if(!e)return null;"string"==typeof t?(n=BOOMR.window.document.createElement("a")).href=t:n="object"==typeof t&&"string"==typeof t.search?t:BOOMR.window.location;r=n.search.slice(1).split(/&/);for(i=0;i<r.length;i++)if(r[i]&&(o=r[i].split("=")).length&&o[0]===e)return 1<o.length?decodeURIComponent(o.splice(1).join("=").replace(/\+/g," ")):"";return null},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},generateId:function(e){return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".substr(0,e||40).replace(/x/g,function(e){return"0"===(e=(Math.random()||.01).toString(36))?"0":e.substr(2,1)})},serializeForUrl:function(e){if(BOOMR.utils.Compression&&BOOMR.utils.Compression.jsUrl)return BOOMR.utils.Compression.jsUrl(e);if(window.JSON)return JSON.stringify(e);BOOMR.debug("JSON is not supported");return""},getMyURL:function(){var e,t=document.currentScript||document.getElementById("boomr-if-as")||document.getElementById("boomr-scr-as");if(t)return t.src;var n,r=document.getElementsByTagName("script");for(n=r.length;n--;)if("interactive"===r[n].readyState)return r[n].src;try{throw new Error}catch(i){if("stack"in i&&(e=this.arrayFilter(i.stack.split(/\n/),function(e){return e.match(/https?:\/\//)}))&&e.length)return e[0].replace(/.*(https?:\/\/.+?)(:\d+)+\D*$/m,"$1")}return""},scroll:function(){var e=d.pageXOffset!==undefined,t="CSS1Compat"===(d.document.compatMode||""),n={x:0,y:0};if(e)if("function"==typeof d.pageXOffset){n.x=d.pageXOffset();n.y=d.pageYOffset()}else{n.x=d.pageXOffset;n.y=d.pageYOffset}else if(t){n.x=d.document.documentElement.scrollLeft;n.y=d.document.documentElement.scrollTop}else{n.x=d.document.body.scrollLeft;n.y=d.document.body.scrollTop}"number"==typeof n.sx&&(n.sx=Math.round(n.sx));"number"==typeof n.sy&&(n.sy=Math.round(n.sy));return n},windowHeight:function(){return d.innerHeight||d.document.documentElement.clientHeight||d.document.body.clientHeight},windowWidth:function(){return d.innerWidth||d.document.documentElement.clientWidth||d.document.body.clientWidth},isNative:function(e){return!!e&&e.toString&&!e.hasOwnProperty("toString")&&/\[native code\]/.test(String(e))},overwriteNative:function(e,t,n){if(e&&n){BOOMR.boomerang_frame!==BOOMR.window&&l.nativeOverwrites.push({obj:e,functionName:t,origFn:e[t]});e[t]=n}},isInteger:function(e){return(Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e})(e)},forEach:function(e,t,n){if(BOOMR.utils.isArray(e)&&"function"==typeof t)for(var r=e.length,i=0;i<r;i++)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)},mark:function(e){var t=BOOMR.getPerformance();t&&"function"==typeof t.mark&&!BOOMR.window.BOOMR_no_mark&&t.mark("boomr:"+e)},measure:function(e,t,n){var r=BOOMR.getPerformance();r&&"function"==typeof r.measure&&!BOOMR.window.BOOMR_no_mark&&r.measure("boomr:"+e,t?"boomr:"+t:undefined,n?"boomr:"+n:undefined)}},browser:{results:{},supportsPassive:function(){if("undefined"==typeof BOOMR.browser.results.supportsPassive){BOOMR.browser.results.supportsPassive=!1;if(!Object.defineProperty)return!1;try{var e=Object.defineProperty({},"passive",{get:function(){BOOMR.browser.results.supportsPassive=!0}});window.addEventListener("test",null,e)}catch(t){}}return BOOMR.browser.results.supportsPassive}},init:function(e){var t,n,r=["autorun","beacon_auth_key","beacon_auth_token","beacon_with_credentials","beacon_disable_sendbeacon","beacon_url","beacon_url_force_https","beacon_type","site_domain","strip_query_string","user_ip"];BOOMR.utils.mark("init");BOOMR_check_doc_domain();e||(e={});e.log!==undefined&&(this.log=e.log);this.log||(this.log=function(){});if(!this.pageId){this.pageId=BOOMR.utils.generateId(8);BOOMR.debug("Generated PageID: "+this.pageId)}if(e.primary&&l.handlers_attached)return this;"string"==typeof e.site_domain&&(this.session.domain=e.site_domain);"undefined"!=typeof e.autorun&&(l.autorun=e.autorun);BOOMR.utils.mark("init:plugins:start");for(n in this.plugins)if(this.plugins.hasOwnProperty(n)){if(e[n]&&e[n].hasOwnProperty("enabled")&&!1===e[n].enabled){l.disabled_plugins[n]=1;"function"==typeof this.plugins[n].disable&&this.plugins[n].disable();continue}if(l.disabled_plugins[n]){if(!e[n]||!e[n].hasOwnProperty("enabled")||!0!==e[n].enabled)continue;"function"==typeof this.plugins[n].enable&&this.plugins[n].enable();delete l.disabled_plugins[n]}if("function"==typeof this.plugins[n].init)try{BOOMR.utils.mark("init:plugins:"+n+":start");this.plugins[n].init(e);BOOMR.utils.mark("init:plugins:"+n+":end");BOOMR.utils.measure("init:plugins:"+n,"init:plugins:"+n+":start","init:plugins:"+n+":end")}catch(i){BOOMR.addError(i,n+".init")}}BOOMR.utils.mark("init:plugins:end");BOOMR.utils.measure("init:plugins","init:plugins:start","init:plugins:end");for(t=0;t<r.length;t++)e[r[t]]!==undefined&&(l[r[t]]=e[r[t]]);if(!l.handlers_attached&&!e.wait||l.handlers_attached&&l.waiting_for_config){if(!l.onloadfired&&(l.autorun===undefined||!1!==l.autorun)){BOOMR.hasBrowserOnloadFired()&&(BOOMR.loadedLate=!0);BOOMR.attach_page_ready(BOOMR.page_ready_autorun)}l.waiting_for_config=!1}if(l.handlers_attached)return this;e.wait&&(l.waiting_for_config=!0);BOOMR.attach_page_ready(function(){BOOMR.t_onload||(BOOMR.t_onload=BOOMR.now())});BOOMR.utils.addListener(d,"DOMContentLoaded",function(){l.fireEvent("dom_loaded")});BOOMR.fireEvent("config",e);BOOMR.subscribe("config",function(e){e.beacon_url&&(l.beacon_url=e.beacon_url)});BOOMR.subscribe("spa_navigation",l.spaNavigation,null,l);!function(){var e,t;if(a!==undefined){BOOMR.utils.addListener(f,a,function(){l.fireEvent("visibility_changed")});l.lastVisibilityState=BOOMR.visibilityState();BOOMR.subscribe("visibility_changed",function(){var e=BOOMR.visibilityState();BOOMR.lastVisibilityEvent[e]=BOOMR.now();BOOMR.debug("Visibility changed from "+l.lastVisibilityState+" to "+e);if("prerender"===l.lastVisibilityState&&"prerender"!==e){BOOMR.addVar("vis.pre","1");l.fireEvent("prerender_to_visible")}l.lastVisibilityState=e})}BOOMR.utils.addListener(f,"mouseup",l.xb_handler("click"));e=f.getElementsByTagName("form");for(t=0;t<e.length;t++)BOOMR.utils.addListener(e[t],"submit",l.xb_handler("form_submit"));d.onpagehide||null===d.onpagehide||BOOMR.utils.addListener(d,"unload",function(){BOOMR.window=d=null});BOOMR.boomerang_frame!==BOOMR.window&&BOOMR.utils.addListener(BOOMR.boomerang_frame,"unload",l.onFrameUnloaded)}();l.handlers_attached=!0;return this},attach_page_ready:function(e){BOOMR.hasBrowserOnloadFired()?this.setImmediate(e,null,null,BOOMR):d.onpagehide||null===d.onpagehide?BOOMR.utils.addListener(d,"pageshow",e):BOOMR.utils.addListener(d,"load",e)},page_ready_autorun:function(e){l.autorun&&BOOMR.page_ready(e,!0)},page_ready:function(e,t){var n;if(!t&&"number"==typeof e){n=e;e=null}e||(e=d.event);e||(e={name:"load"});if(t){if("number"==typeof d.BOOMR_page_ready){e.timing=e.timing||{};e.timing.loadEventEnd=d.BOOMR_page_ready;BOOMR.addVar("pr",1,!0)}}else{e.timing=e.timing||{};n?e.timing.loadEventEnd=n:"number"==typeof d.BOOMR_page_ready?e.timing.loadEventEnd=d.BOOMR_page_ready:e.timing.loadEventEnd=BOOMR.now();BOOMR.addVar("pr",1,!0)}if(l.onloadfired)return this;l.fireEvent("page_ready",e);l.onloadfired=!0;return this},hasBrowserOnloadFired:function(){var e=BOOMR.getPerformance();return f.readyState&&"complete"===f.readyState||e&&e.timing&&0<e.timing.loadEventStart||0<d.BOOMR_onload},onloadFired:function(){return l.onloadfired},setImmediate:function(e,t,n,r){var i,o;"undefined"!=typeof Error&&(o=(o=new Error).stack?o.stack.replace(/^Error/,"Called"):undefined);i=function(){e.call(r||null,t,n||{},o);i=null};d.requestIdleCallback?d.requestIdleCallback(i,{timeout:1e3}):d.setImmediate?d.setImmediate(i):setTimeout(i,10)},now:Date.now||function(){return(new Date).getTime()},getPerformance:function(){try{if(BOOMR.window)return"performance"in BOOMR.window&&BOOMR.window.performance?BOOMR.window.performance:BOOMR.window.msPerformance||BOOMR.window.webkitPerformance||BOOMR.window.mozPerformance}catch(e){}},hrNow:function(){var e,t,n=BOOMR.getPerformance();if(n&&n.now)e=n.now();else{t=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart&&BOOMR.plugins.RT.navigationStart()||BOOMR.t_lstart||BOOMR.t_start;e=BOOMR.now()-t}return e},visibilityState:e===undefined?function(){return"visible"}:function(){return f[e]},lastVisibilityEvent:{},registerEvent:function(e){if(l.events.hasOwnProperty(e))return this;l.events[e]=[];return this},disable:function(){l.clearEvents();l.clearListeners()},fireEvent:function(e,t){return l.fireEvent(e,t)},subscribe:function(t,n,r,i,e){var o,a,s;t=t.toLowerCase();BOOMR.utils.mark("subscribe");BOOMR.utils.mark("subscribe:"+t);l.translate_events[t]&&(t=l.translate_events[t]);l.events.hasOwnProperty(t)||(l.events[t]=[]);s=l.events[t];for(o=0;o<s.length;o++)if((a=s[o])&&a.fn===n&&a.cb_data===r&&a.scope===i)return this;s.push({fn:n,cb_data:r||{},scope:i||null,once:e||!1});"page_ready"===t&&l.onloadfired&&l.autorun&&this.setImmediate(n,null,r,i);if("page_unload"===t||"before_unload"===t){l.unloadEventsCount++;!function(){var e;s.length;e=function(e){n&&n.call(i,e||d.event,r);++l.unloadEventCalled===l.unloadEventsCount&&BOOMR.real_sendBeacon()};"page_unload"===t&&(d.onpagehide||null===d.onpagehide?BOOMR.utils.addListener(d,"pagehide",e):BOOMR.utils.addListener(d,"unload",e));BOOMR.utils.addListener(d,"beforeunload",e)}()}return this},addError:function(e,t,n){var r,i=BOOMR.plugins.Errors;BOOMR.utils.mark("add_error");BOOMR.error("Boomerang caught error: "+e+", src: "+t+", extra: "+n);if(i&&i.is_supported())if("string"==typeof e)i.send({message:e,extra:n,functionName:t,noStack:!0},i.VIA_APP,i.SOURCE_BOOMERANG);else{"string"==typeof t&&(e.functionName=t);void 0!==n&&(e.extra=n);i.send(e,i.VIA_APP,i.SOURCE_BOOMERANG)}else{if("string"!=typeof e){(r=String(e)).match(/^\[object/)&&(r=e.name+": "+(e.description||e.message).replace(/\r\n$/,""));e=r}t!==undefined&&(e="["+t+":"+BOOMR.now()+"] "+e);n&&(e+=":: "+n);l.errors[e]?l.errors[e]++:l.errors[e]=1}},isCrossOriginError:function(e){return"SecurityError"===e.name||"TypeError"===e.name&&"Permission denied"===e.message||"Error"===e.name&&e.message&&e.message.match(/^(Permission|Access is) denied/)||-2146828218===e.number},addVar:function(e,t,n){BOOMR.utils.mark("add_var");if("string"==typeof e)l.vars[e]=t;else if("object"==typeof e){var r,i=e;for(r in i)i.hasOwnProperty(r)&&(l.vars[r]=i[r])}n&&(l.singleBeaconVars[e]=1);return this},appendVar:function(e,t){var n=BOOMR.getVar(e)||"";n&&(n+=",");BOOMR.addVar(e,n+t);return this},removeVar:function(e){var t,n;if(!arguments.length)return this;n=1===arguments.length&&BOOMR.utils.isArray(e)?e:arguments;for(t=0;t<n.length;t++)l.vars.hasOwnProperty(n[t])&&delete l.vars[n[t]];return this},hasVar:function(e){return l.vars.hasOwnProperty(e)},getVar:function(e){return l.vars[e]},setVarPriority:function(e,t){if("number"!=typeof t||1!==Math.abs(t))return this;l.varPriority[t][e]=1;return this},setReferrer:function(e){l.r=e},requestStart:function(t){var n=BOOMR.now();BOOMR.plugins.RT.startTimer("xhr_"+t,n);return{loaded:function(e){BOOMR.responseEnd(t,n,e)}}},readyToSend:function(){var e;for(e in this.plugins)if(this.plugins.hasOwnProperty(e)){if(l.disabled_plugins[e])continue;if("function"==typeof this.plugins[e].readyToSend&&!1===this.plugins[e].readyToSend()){BOOMR.debug("Plugin "+e+" is not ready to send");return!1}}return!0},responseEnd:function(e,t,n,r){t="number"==typeof t?t:BOOMR.now();r="number"==typeof r?r:BOOMR.now();if(BOOMR.readyToSend())if(BOOMR.hasSentPageLoadBeacon()||BOOMR.utils.inArray(e.initiator,BOOMR.constants.BEACON_TYPE_SPAS))if(l.beaconInQueue)BOOMR.subscribe("beacon",function(){BOOMR.responseEnd(e,t,n,r)},null,BOOMR,!0);else{l.beaconInQueue=!0;if("object"==typeof e){if(!e.url){BOOMR.debug("BOOMR.responseEnd: First argument must have a url property if it's an object");return}l.fireEvent("xhr_load",e)}else{BOOMR.real_sendBeacon();BOOMR.addVar("xhr.pg",e);BOOMR.plugins.RT.startTimer("xhr_"+e,t);l.fireEvent("xhr_load",{name:"xhr_"+e,data:n,timing:{loadEventEnd:r}})}}else BOOMR.subscribe("page_load_beacon",function(){BOOMR.responseEnd(e,t,n,r)},null,BOOMR,!0);else{BOOMR.debug("Attempted to call responseEnd before all plugins were Ready to Send, trying again...");setTimeout(function(){BOOMR.responseEnd(e,t,n,r)},1e3)}},uninstrumentXHR:function(){},instrumentXHR:function(){},uninstrumentFetch:function(){},instrumentFetch:function(){},sendBeacon:function(e){e&&(l.beacon_url_override=e);if(!l.beaconQueued){l.beaconQueued=!0;BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR)}return!0},sendBeaconWhenReady:function(e,t,n){if(l.beaconInQueue)BOOMR.subscribe("beacon",function(){BOOMR.sendBeaconWhenReady(e,t,n)},null,BOOMR,!0);else{l.beaconInQueue=!0;for(var r in e)e.hasOwnProperty(r)&&BOOMR.addVar(r,e[r],!0);"function"==typeof t&&void 0!==n&&t.apply(n);BOOMR.sendBeacon()}},real_sendBeacon:function(){var e,t=[],n={};if(!l.beaconQueued)return!1;BOOMR.utils.mark("send_beacon:start");l.beaconQueued=!1;BOOMR.debug("Checking if we can send beacon");for(e in this.plugins)if(this.plugins.hasOwnProperty(e)){if(l.disabled_plugins[e])continue;if(!this.plugins[e].is_complete(l.vars)){BOOMR.debug("Plugin "+e+" is not complete, deferring beacon send");return!1}}if(!(window&&window.Image&&window.navigator&&BOOMR.window)){BOOMR.debug("DOM not fully available, not sending a beacon");return!1}var r=BOOMR.utils.inArray(l.vars["http.initiator"],BOOMR.constants.BEACON_TYPE_SPAS),i="undefined"==typeof l.vars["http.initiator"]||r;l.vars.pgu||(l.vars.pgu=r?f.URL:f.URL.replace(/#.*/,""));l.vars.pgu=BOOMR.utils.cleanupURL(l.vars.pgu);l.vars.u&&!r||(l.vars.u=l.vars.pgu);l.vars.pgu===l.vars.u&&delete l.vars.pgu;l.r?l.vars.r=BOOMR.utils.cleanupURL(l.r):delete l.vars.r;l.vars.v=BOOMR.version;BOOMR.snippetVersion&&(l.vars.sv=BOOMR.snippetVersion);l.vars.sm=BOOMR.snippetMethod||"i";if(BOOMR.session.enabled){l.vars["rt.si"]=BOOMR.session.ID+"-"+Math.round(BOOMR.session.start/1e3).toString(36);l.vars["rt.ss"]=BOOMR.session.start;l.vars["rt.sl"]=BOOMR.session.length}if(BOOMR.visibilityState()){l.vars["vis.st"]=BOOMR.visibilityState();BOOMR.lastVisibilityEvent.visible&&(l.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible);BOOMR.lastVisibilityEvent.hidden&&(l.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden)}l.vars["ua.plt"]=navigator.platform;l.vars["ua.vnd"]=navigator.vendor;this.pageId&&(l.vars.pid=this.pageId);l.vars.n=++this.beaconsSent;if(d!==window){"if";l.vars["if"]=""}for(e in l.errors)l.errors.hasOwnProperty(e)&&t.push(e+(1<l.errors[e]?" (*"+l.errors[e]+")":""));0<t.length&&(l.vars.errors=t.join("\n"));l.errors={};l.fireEvent("before_beacon",l.vars);for(e in l.vars)l.vars.hasOwnProperty(e)&&(n[e]=l.vars[e]);BOOMR.removeVar(["qt","pgu"]);for(var o in l.singleBeaconVars)l.singleBeaconVars.hasOwnProperty(o)&&BOOMR.removeVar(o);l.singleBeaconVars={};if(!l.hasSentPageLoadBeacon&&i){l.hasSentPageLoadBeacon=!0;BOOMR.setImmediate(function(){l.fireEvent("page_load_beacon",n)})}if(BOOMR.session.rate_limited){BOOMR.debug("Skipping because we're rate limited");return!1}l.beaconInQueue=!1;BOOMR.sendBeaconData(n);BOOMR.utils.mark("send_beacon:end");BOOMR.utils.measure("send_beacon","send_beacon:start","send_beacon:end");return!0},hasSentPageLoadBeacon:function(){return l.hasSentPageLoadBeacon},sendBeaconData:function(e){var t,n,r,i,o,a=[],s=!0;BOOMR.debug("Ready to send beacon: "+BOOMR.utils.objectToString(e));l.beacon_url=l.beacon_url_override||l.beacon_url;if(!l.beacon_url){BOOMR.debug("No beacon URL, so skipping.");return!1}if(!l.beaconUrlAllowed(l.beacon_url)){BOOMR.debug("Beacon URL not allowed: "+l.beacon_url);return!1}if(0===e.length)return!1;l.fireEvent("beacon",e);a=this.getVarsOfPriority(e,-1);t=this.getVarsOfPriority(e,1);n=a.concat(this.getVarsOfPriority(e,0),t).join("&");l.beacon_url_force_https&&l.beacon_url.match(/^\/\//)&&(l.beacon_url="https:"+l.beacon_url);r=l.beacon_url+(-1<l.beacon_url.indexOf("?")?"&":"?")+n;if("GET"===l.beacon_type){s=!0;r.length>BOOMR.constants.MAX_GET_LENGTH&&(window.console&&(console.warn||console.log)||function(){})("Boomerang: Warning: Beacon may not be sent via GET due to payload size > 2000 bytes")}else("POST"===l.beacon_type||r.length>BOOMR.constants.MAX_GET_LENGTH)&&(s=!1);if(d&&d.navigator&&"function"==typeof d.navigator.sendBeacon&&BOOMR.utils.isNative(d.navigator.sendBeacon)&&"function"==typeof d.Blob&&"GET"!==l.beacon_type&&"undefined"==typeof l.beacon_auth_token&&!l.beacon_disable_sendbeacon){var u=new d.Blob([n+"&sb=1"],{type:"application/x-www-form-urlencoded"});if(d.navigator.sendBeacon(l.beacon_url,u))return!0}BOOMR.orig_XMLHttpRequest||d&&d.XMLHttpRequest||(s=!0);if(s){try{i=new Image}catch(c){BOOMR.debug("Image is not a constructor, not sending a beacon");return!1}i.src=r}else{o=new(BOOMR.window.orig_XMLHttpRequest||BOOMR.orig_XMLHttpRequest||BOOMR.window.XMLHttpRequest);try{this.sendXhrPostBeacon(o,n)}catch(c){o=new BOOMR.boomerang_frame.XMLHttpRequest;this.sendXhrPostBeacon(o,n)}}return!0},hasSentPageLoadBeacon:function(){return l.hasSentPageLoadBeacon},sendXhrPostBeacon:function(e,t){e.open("POST",l.beacon_url);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");if("undefined"!=typeof l.beacon_auth_token){"undefined"==typeof l.beacon_auth_key&&(l.beacon_auth_key="Authorization");e.setRequestHeader(l.beacon_auth_key,l.beacon_auth_token)}l.beacon_with_credentials&&(e.withCredentials=!0);e.send(t)},getVarsOfPriority:function(e,t){var n,r=[],i=0!==t?l.varPriority[t]:e;for(n in i)if(i.hasOwnProperty(n)&&e.hasOwnProperty(n)){r.push(this.getUriEncodedVar(n,"undefined"==typeof e[n]?"":e[n]));0!==t&&delete e[n]}return r},getUriEncodedVar:function(e,t){t!==undefined&&null!==t||(t="");"object"==typeof t&&(t=BOOMR.utils.serializeForUrl(t));return encodeURIComponent(e)+"="+encodeURIComponent(t)},getResourceTiming:function(e,t,n){var r,i=BOOMR.getPerformance();try{if(i&&"function"==typeof i.getEntriesByName){if(!(r=i.getEntriesByName(e))||!r.length)return;if(!("function"!=typeof n||(r=BOOMR.utils.arrayFilter(r,n))&&r.length))return;1<r.length&&"function"==typeof t&&r.sort(t);return r[r.length-1]}}catch(o){BOOMR.warn("getResourceTiming:"+o)}},setBeaconUrlsAllowed:function(e){l.beacon_urls_allowed=e}};if(BOOMR.url){var r=BOOMR.window.document.createElement("a");r.href=BOOMR.url;t.url=r.href}else t.url=t.utils.getMyURL();delete BOOMR_start;if("number"==typeof BOOMR_lstart){t.t_lstart=BOOMR_lstart;delete BOOMR_lstart}else"number"==typeof BOOMR.window.BOOMR_lstart&&(t.t_lstart=BOOMR.window.BOOMR_lstart);"number"==typeof BOOMR.window.BOOMR_onload&&(t.t_onload=BOOMR.window.BOOMR_onload);!function(){var e;"object"==typeof console&&console.log!==undefined?t.log=function(e,t,n){console.log("("+BOOMR.now()+") {"+BOOMR.pageId+"}: "+n+": ["+t+"] "+e)}:t.log=function(){};e=function(n){return function(e,t){this.log(e,n,"boomerang"+(t?"."+t:""));return this}};t.debug=e("debug");t.info=e("info");t.warn=e("warn");t.error=e("error")}();try{var i=t.getPerformance();i&&"function"==typeof i.now&&/\[native code\]/.test(String(i.now))&&i.timing&&i.timing.navigationStart&&(t.now=function(){return Math.round(i.now()+i.timing.navigationStart)})}catch(u){}l.checkLocalStorageSupport();!function(){var e;for(e in t)t.hasOwnProperty(e)&&(BOOMR[e]=t[e]);BOOMR.xhr_excludes||(BOOMR.xhr_excludes={})}();!function(){BOOMR.checkWindowOverrides=function(a){if(!Object.getOwnPropertyNames)return[];var t,n,r=[];function e(e){(function o(e){var t=e.split("."),n=a;for(;n&&t.length;)try{n=n[t.shift()]}catch(r){return!1}return"function"==typeof n&&!function i(e,t){if("console.assert"===t||"Function.prototype"===t||0<=t.indexOf("onload")||0<=t.indexOf("onbeforeunload")||0<=t.indexOf("onerror")||0<=t.indexOf("onload")||0<=t.indexOf("NodeFilter"))return!0;return e.toString&&!e.hasOwnProperty("toString")&&/\[native code\]/.test(String(e))}(n,e)})(e)&&r.push(e)}!function c(){var e=f.createElement("iframe");e.style.display="none";e.src="javascript:false";f.getElementsByTagName("script")[0].parentNode.appendChild(e);t=e.contentWindow;n=Object.getOwnPropertyNames(t)}();for(var i=0;i<n.length;i++){var o=n[i];if("window"!==o&&"self"!==o&&"top"!==o&&"parent"!==o&&"frames"!==o&&(t[o]&&("object"==typeof t[o]||"function"==typeof t[o]))){e(o);var s=[];try{s=Object.getOwnPropertyNames(t[o])}catch(d){}for(var u=0;u<s.length;u++)e([o,s[u]].join("."));if(t[o].prototype){s=Object.getOwnPropertyNames(t[o].prototype);for(u=0;u<s.length;u++)e([o,"prototype",s[u]].join("."))}}}return r};BOOMR.checkDocumentOverrides=function(t){return BOOMR.utils.arrayFilter(["readyState","domain","hidden","URL","cookie"],function(e){return t.hasOwnProperty(e)})};if("true"===BOOMR.utils.getQueryParamValue("overridden")&&d&&d.Object&&Object.getOwnPropertyNames){var e=[].concat(BOOMR.checkWindowOverrides(d)).concat(BOOMR.checkDocumentOverrides(f));0<e.length&&BOOMR.warn("overridden: "+e.sort())}}();s("onBoomerangLoaded",{BOOMR:BOOMR},!0)}}(window);!function(){var b;if(!BOOMR.plugins.Continuity){var y=100,_=0,p=1,w=2,f="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",O=".",R=BOOMR.getPerformance(),E={},T=R&&R.timing&&R.timing.navigationStart?R.timing.navigationStart:BOOMR.now(),t=function(c){var d={},a={},s=[],u=0,l=0,r=0;BOOMR.fpsLog&&BOOMR.fpsLog.length&&(c=BOOMR.fpsLog[0]+T);function f(){return Math.floor((BOOMR.now()-c)/y)}function O(){var e=0;if(b.ttiWaitForFrameworkReady){if(!b.frameworkReady)return;e=b.frameworkReady}if(BOOMR.plugins.PaintTiming&&BOOMR.plugins.PaintTiming.is_supported()&&R&&R.timeOrigin){var t=BOOMR.plugins.PaintTiming.getTimingFor("first-contentful-paint");t||(t=BOOMR.plugins.PaintTiming.getTimingFor("first-paint"));t&&(e=Math.max(e,Math.round(t+R.timeOrigin)))}else if(R&&R.timing&&R.timing.msFirstPaint)e=Math.max(e,R.timing.msFirstPaint);else if(BOOMR.window&&BOOMR.window.chrome&&"function"==typeof BOOMR.window.chrome.loadTimes){var n=BOOMR.window.chrome.loadTimes();n&&n.firstPaintTime&&(e=Math.max(e,1e3*n.firstPaintTime))}R&&R.timing&&R.timing.domContentLoadedEventEnd&&(e=Math.max(e,R.timing.domContentLoadedEventEnd));b.ttiWaitForHeroImages&&(r=function u(e){var t,n,r,i,o,a,s=0;if(!BOOMR.window||!BOOMR.window.document||"function"!=typeof BOOMR.window.document.querySelectorAll)return 0;if(!R||"function"!=typeof R.getEntriesByType)return 0;t=e+", "+e+" * img, "+e+" * image";if((n=BOOMR.window.document.querySelectorAll(t))&&n.length)for(r=0;r<n.length;r++)if((o=n[r].currentSrc||n[r].src||"function"==typeof n[r].getAttribute&&n[r].getAttribute("xlink:href"))&&(a=R.getEntriesByName(o))&&a.length)for(i=0;i<a.length;i++)s=Math.max(s,a[i].responseEnd);return s?Math.floor(s+T):0}(b.ttiWaitForHeroImages))&&(e=Math.max(e,r));return e}E.timeToInteractive=function(){if(u)return u-T};E.timeToVisuallyReady=function(){if(l)return l-T};E.timeToHeroImagesReady=function(){if(b.ttiWaitForHeroImages&&r)return r-T};E.timeToFrameworkReady=function(){if(b.ttiWaitForFrameworkReady&&b.frameworkReady)return b.frameworkReady-T};E.log=function(){return s};return{register:function i(e,t,n){d[e]||(d[e]=[]);a[e]={compressMode:t||_,backfillLast:n}},set:function o(e,t,n){void 0===n&&(n=f());d[e]&&(d[e][n]=t)},log:function p(e,t,n){void 0===t&&(t=f());s.push({type:e,time:t,val:n});s.length>b.logMaxEntries&&Array.prototype.splice.call(s,0,s.length-b.logMaxEntries)},increment:function m(e,t,n){void 0===n&&(n=f());void 0===t&&(t=1);if(d[e]){d[e][n]||(d[e][n]=0);d[e][n]+=t}},getTimeBucket:f,getStats:function g(e,t){var n,r=0,i=0,o=Infinity,a=0,s=Math.floor((t-c)/y);if(!d[e])return 0;for(var u in d[e])if(s<=(u=parseInt(u,10))&&d[e].hasOwnProperty(u)){r++;i+=n=d[e][u];o=Math.min(o,n);a=Math.max(a,n)}return{total:i,count:r,min:o,max:a}},analyze:function h(e){var t=f(),n=0,r=0;b.sendLog&&void 0!==e&&function i(){for(var e="",t=0;t<s.length;t++){var n=s[t];0!==t&&(e+="|");e+=n.type;e+=Math.round(n.time-T).toString(36);for(var r in n.val)if(n.val.hasOwnProperty(r)){e+=","+r;"number"==typeof n.val[r]?e+=n.val[r].toString(36):e+=n.val[r]}}""!==e&&b.addToBeacon("c.l",e)}();b.sendTimeline&&void 0!==e&&function o(e){var t,n,r,i;for(t in d)d.hasOwnProperty(t)&&""!==(n=(i=e,M(a[r=t].compressMode,a[r].backfillLast,d[r],0!==i?Math.floor((i-c)/y):0,f())))&&b.addToBeacon("c.t."+t,n)}(e);if(!u&&(l||(l=O()))){b.addToBeacon("c.tti.vr",E.timeToVisuallyReady());b.addToBeacon("c.tti.fr",E.timeToFrameworkReady());b.addToBeacon("c.tti.hi",E.timeToHeroImagesReady());if(d.longtask||d.fps||d.busy){for(n=Math.floor((l-c)/y);n<=t;n++)if(d.longtask&&d.longtask[n])r=0;else if(d.fps&&(!d.fps[n]||d.fps[n]<2))r=0;else if(d.busy&&50<d.busy[n])r=0;else if(d.interdly&&d.interdly[n])r=0;else if(5<=++r){u=c+(n-5)*y;u=Math.max(u,l);break}0<u&&b.addToBeacon("c.tti",E.timeToInteractive())}}},stop:function e(){d={};s=[]},onBeacon:function t(){for(var e in d)d.hasOwnProperty(e)&&(d[e]=[]);s=[]}}},n=function(e,r){if(e.PerformanceObserver&&e.PerformanceLongTaskTiming){var f={unknown:0,self:1,"same-origin-ancestor":2,"same-origin-descendant":3,"same-origin":4,"cross-origin-ancestor":5,"cross-origin-descendant":6,"cross-origin-unreachable":7,"multiple-contexts":8},O={unknown:0,script:1,layout:2},p={unknown:0,iframe:1,embed:2,object:3},t=new e.PerformanceObserver(function a(e){var t,n;if(!i)return;t=e.getEntries();Array.prototype.push.apply(m,t);for(n=0;n<t.length;n++)o+=t[n].duration;r.increment("longtask",t.length)});try{t.observe({entryTypes:["longtask"]})}catch(s){return}r.register("longtask",_);var m=[],i=!0,o=0;E.longTasksTime=function(){return o};E.longTasksCount=function(){return m.length};return{getTasks:function u(){return m},clearTasks:n,analyze:function g(e){var t,n,r,i,o,a=[],s=[];if(0!==m.length){for(t=0;t<m.length;t++){r=m[t];i={s:Math.round(r.startTime).toString(36),d:Math.round(r.duration).toString(36),n:f[r.name]?f[r.name]:0};s=[];for(n=0;n<r.attribution.length;n++)if("script"!==(o=r.attribution[n]).name||"iframe"!==o.containerType||o.containerName||o.containerId||o.containerSrc){var u=o.containerName?o.containerName:undefined,c=o.containerId?o.containerId:undefined;u===c&&(u=undefined);var d=c===undefined?o.containerSrc:undefined;s.push({a:O[o.name]?O[o.name]:0,t:p[o.containerType]?p[o.containerType]:0,n:u,i:c,s:d})}0<s.length&&(i.a=s);a.push(i)}b.addToBeacon("c.lt.n",E.longTasksCount(),!0);b.addToBeacon("c.lt.tt",E.longTasksTime());b.addToBeacon("c.lt",function l(e){var t=window.UserTimingCompression||BOOMR.window.UserTimingCompression;return t?t.jsUrl(e):window.JSON?JSON.stringify(e):""}(a))}},stop:function c(){i=!1;t.disconnect();n()},onBeacon:function d(){n()}}}function n(){m=[];o=0}},r=function(e,r){r.register("busy",w);var i=Math.floor(3.125),o=BOOMR.now(),a=0,s=0,u=0,c=0,t=!1,n=!1;E.pageBusy=function(){return 0===u?0:Math.round(c/u*100)};t=setInterval(function d(){var e=BOOMR.now(),t=e-o;o=e;if(68<t){var n=Math.floor((t-32)/32);a+=n;s+=n;t-=32*n}a++;36<t&&s++},32);n=setInterval(function l(){var e=r.getTimeBucket(),t=e,n=0;if(0!==a){for(;i+1<a&&n<=100;){r.set("busy",100,--t);a-=i;s=Math.max(s-i,0);u+=i;c+=i;n++}u+=a;c+=s;r.set("busy",Math.round(s/a*100),e);s=a=0}},100);return{analyze:function f(e){b.addToBeacon("c.b",E.pageBusy())},stop:function O(){!1;if(t){clearInterval(t);t=!1}if(n){clearInterval(n);n=!1}},onBeacon:function p(){c=u=0}}},i=function(t,n){n.register("fps",_);var r,i,o=50,a=0,s=0,u=!0;if(BOOMR.fpsLog&&BOOMR.fpsLog.length){i=r=BOOMR.fpsLog[0]+T;for(var e=0;e<BOOMR.fpsLog.length;e++){var c=T+BOOMR.fpsLog[e];n.increment("fps",1,Math.floor((c-r)/y));o<=c-i&&s++;i=c}a=BOOMR.fpsLog.length;delete BOOMR.fpsLog}else r=BOOMR.now();t.requestAnimationFrame(function d(e){if(u){o<=e-i&&s++;i=e;a++;n.increment("fps");t.requestAnimationFrame(d)}});E.fps=function(){var e=E.fpsDuration();if(e)return Math.floor(a/(e/1e3))};E.fpsDuration=function(){if(r)return BOOMR.now()-r};E.fpsMinimum=function(){if(E.fpsDuration()){var e=n.getStats("fps",r).min;return e!==Infinity?e:undefined}};E.fpsLongFrames=function(){return s};E.fpsStart=function(){return r?r.toString(36):0};return{analyze:function l(e){b.addToBeacon("c.f",E.fps());b.addToBeacon("c.f.d",E.fpsDuration());b.addToBeacon("c.f.m",E.fpsMinimum());b.addToBeacon("c.f.l",E.fpsLongFrames());b.addToBeacon("c.f.s",E.fpsStart())},stop:function f(){u=!1;r=0},onBeacon:function O(){u&&(r=BOOMR.now());s=a=0}}},o=function(e,i,o){if(e&&e.document&&e.document.body&&e.document.documentElement){var a=2e3,s=20,u=0,c=0,d=0,l=0,f=0,O=0,p=0,m=0,t=!1,n=e.document.body,r=e.document.documentElement;i.register("scroll",_);i.register("scrollpct",w);var g=Math.max(n.scrollHeight,n.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight)-BOOMR.utils.windowHeight();E.scrollPct=function(){return l};E.scrollCount=function(){return f};E.scrollDistinct=function(){return p};E.scrollPixels=function(){return O};BOOMR.utils.addListener(e,"scroll",h,!0);t=setInterval(function R(){var e=Math.min(d,100);0!==e&&i.set("scrollpct",e);d=0},y);return{analyze:function M(e){b.addToBeacon("c.s",E.scrollCount());b.addToBeacon("c.s.p",E.scrollPct());b.addToBeacon("c.s.y",E.scrollPixels());b.addToBeacon("c.s.d",E.scrollDistinct())},stop:function B(){if(t){clearInterval(t);t=!1}BOOMR.utils.removeListener(e,"scroll",h)},onBeacon:function v(){p=O=f=l=0}}}function h(e){var t=BOOMR.now();f++;a<t-m&&p++;m=t;var n=BOOMR.utils.scroll().y,r=Math.abs(u-n);O+=r;i.increment("scroll",r);if(0===c||Math.abs(c-n)>s){i.log(0,t,{y:n});c=n}o.interact("scroll",t,e);d+=Math.round(r/g*100);l+=Math.round(r/g*100);u=n}},a=function(e,o,a){o.register("click",_);var s=10,u=3,c=0,d=0,l=0,f=0,O=0,p=null;function t(e){var t=BOOMR.now(),n=e.clientX,r=e.clientY;c++;var i=Math.round(Math.sqrt(Math.pow(O-r,2)+Math.pow(f-n,2)));if(p===e.target||i<=s){if(u<=++d+1){l++;BOOMR.fireEvent("rage_click",e)}}else d=0;f=n;O=r;p=e.target;o.increment("click");o.log(1,t,{x:n,y:r});a.interact("click",t,e)}E.clicksCount=function(){return c};E.clicksRage=function(){return l};BOOMR.utils.addListener(e.document,"click",t,!0);return{analyze:function n(e){b.addToBeacon("c.c",E.clicksCount());b.addToBeacon("c.c.r",E.clicksRage())},stop:function r(){BOOMR.utils.removeListener(e.document,"click",t)},onBeacon:function i(){l=d=c=0}}},s=function(e,n,r){n.register("key",_);var i=0,o=0;function t(e){var t=BOOMR.now();i++;27===e.keyCode&&o++;n.increment("key");n.log(3,t);r.interact("key",t,e)}E.keyCount=function(){return i};E.keyEscapes=function(){return o};BOOMR.utils.addListener(e.document,"keydown",t,!0);return{analyze:function a(e){b.addToBeacon("c.k",E.keyCount());b.addToBeacon("c.k.e",E.keyEscapes())},stop:function s(){BOOMR.utils.removeListener(e.document,"keydown",t)},onBeacon:function u(){o=i=0}}},u=function(e,o,t){o.register("mouse",_);o.register("mousepct",w);var a=0,s=0,n=0,r=0,u=0,c=0,d=0,i=!1,l=!1,f=Math.round(Math.sqrt(Math.pow(BOOMR.utils.windowHeight(),2)+Math.pow(BOOMR.utils.windowWidth(),2)));function O(e){BOOMR.now();var t=e.clientX,n=e.clientY,r=Math.round(Math.sqrt(Math.pow(s-n,2)+Math.pow(a-t,2))),i=Math.round(r/f*100);u+=i;c+=i;d+=r;a=t;s=n;o.increment("mouse",r)}E.mousePct=function(){return c};E.mousePixels=function(){return d};i=setInterval(function p(){var e=Math.min(u,100);0!==e&&o.set("mousepct",e);u=0},y);l=setInterval(function m(){if((n!==a||r!==s)&&10<=Math.round(Math.sqrt(Math.pow(r-s,2)+Math.pow(n-a,2)))){o.log(2,BOOMR.now(),{x:a,y:s});n=a;r=s}},250);BOOMR.utils.addListener(e.document,"mousemove",O,!0);return{analyze:function g(e){b.addToBeacon("c.m.p",E.mousePct());b.addToBeacon("c.m.n",E.mousePixels())},stop:function h(){if(i){clearInterval(i);i=!1}if(l){clearInterval(l);l=!1}BOOMR.utils.removeListener(e.document,"mousemove",O)},onBeacon:function R(){d=c=0}}},c=function(e,i,t){i.register("inter",_);i.register("interdly",_);var o=t,a=0,s=null,u=0,c=0,d=0,l=0,f=!0,O=0,p=0,m=!1,g=!1,h=!1;function n(){if(m){clearTimeout(m);m=!1}if(g){clearTimeout(g);g=!1}}function R(){S("Sending interaction beacon");BOOMR.sendBeaconWhenReady({"rt.start":"manual","http.initiator":"interaction","rt.tstart":O,"rt.end":p},function(){n();BOOMR.fireEvent("interaction")},b)}E.interactionDelayed=function(){return d};E.interactionDelayedTime=function(){return Math.round(l)};E.interactionAvgDelay=function(){if(0<u)return Math.round(c/u)};E.timeToFirstInteraction=function(){if(a)return a-T};E.firstInputDelay=function(){if(null!==s)return s};BOOMR.subscribe("spa_init",function r(){h=!0;n()},null,b);return{interact:function M(e,t,n){t=t||BOOMR.now();if(f){u++;a||(a=t);var r=0;if(n&&n.timeStamp){r=14e11<n.timeStamp?t-n.timeStamp:t-T-n.timeStamp;c+=r;null===s&&(s=Math.round(r));if(50<r){i.increment("interdly");d++;l+=r}}i.increment("inter");if(!h&&b.afterOnloadMonitoring){p=BOOMR.now();if(!O){S("Interaction detected, sending a beacon after "+o+" ms");O=p;g=setTimeout(R,3e4)}if(m){S("Clearing previous interaction timeout");clearTimeout(m);m=!1}m=setTimeout(R,o)}}},analyze:function B(e){b.addToBeacon("c.ttfi",E.timeToFirstInteraction());b.addToBeacon("c.i.dc",E.interactionDelayed());b.addToBeacon("c.i.dt",E.interactionDelayedTime());b.addToBeacon("c.i.a",E.interactionAvgDelay());null!==s&&b.addToBeacon("c.fid",E.firstInputDelay(),!0)},stop:function v(){f=!1},onBeacon:function y(){p=O=c=u=d=l=0;h=!1;n()}}},d=function(e,n,r){n.register("vis",_);var i={visible:0,hidden:1,prerender:2,unloaded:3},o=!0;BOOMR.subscribe("visibility_changed",function(e){var t=BOOMR.now();if(o){n.increment("vis");n.log(4,t,{s:i[BOOMR.visibilityState()]});r.interact("vis",t,e)}});return{stop:function t(){o=!1}}},l=function(e,i,o){i.register("orn",_);var a=!0;function t(e){var t=BOOMR.now(),n=window.orientation;if(a){i.increment("orn");var r=window.screen&&(screen.orientation||screen.msOrientation||screen.mozOrientation||{});r&&"number"==typeof r.angle&&(n=screen.orientation.angle);"number"==typeof n&&i.log(5,t,{a:n});o.interact("orn",t,e)}}BOOMR.utils.addListener(e,"orientationchange",t,!0);return{stop:function n(){a=!1;BOOMR.utils.removeListener(e,"orientationchange",t)}}},m=function(e,n){n.register("mem",p,!0);n.register("bat",w,!0);n.register("domsz",p,!0);n.register("domln",p,!0);n.register("mut",_);var t,r=e.document,i=!0,o=!1,a=null,s=0,u=0,c=r.getElementsByTagName("*");function d(){i&&a&&n.set("bat",a.level)}o=setInterval(function l(){var e=R&&R.memory&&R.memory.usedJSHeapSize;e&&n.set("mem",e);u=c.length;n.set("domsz",r.documentElement.innerHTML.length);n.set("domln",u);if(0<s){var t=Math.min(Math.round(s/u*100),100);n.set("mut",t);s=0}},1e3);e.navigator&&"function"==typeof e.navigator.getBattery&&e.navigator.getBattery().then(function(e){(a=e).onlevelchange&&(a.onlevelchange=d)});BOOMR.utils.isMutationObserverSupported()&&(t=BOOMR.utils.addObserver(r,{childList:!0,subtree:!0},null,function f(e){e.forEach(function(e){if("childList"!==e.type)return!0;for(var t=0;t<e.addedNodes.length;t++){var n=e.addedNodes[t];s++;s+=n.getElementsByTagName?n.getElementsByTagName("*").length:0}});return!0},null,this));return{stop:function O(){i=!1;if(o){clearInterval(o);o=!1}if(t&&t.observer){t.observer.disconnect();t=null}a&&a.onlevelchange&&(a.onlevelchange=null);c=null}}};b={monitorLongTasks:!0,monitorPageBusy:!0,monitorFrameRate:!0,monitorInteractions:!0,monitorStats:!0,afterOnload:!1,afterOnloadMaxLength:6e4,afterOnloadMinWait:5e3,waitAfterOnload:!1,ttiWaitForFrameworkReady:!1,ttiWaitForHeroImages:!1,sendLog:!0,sendTimeline:!0,logMaxEntries:100,initialized:!1,complete:!1,isSpa:!1,firedPageReady:!1,afterOnloadMonitoring:!1,frameworkReady:null,timeline:null,ttiMethod:null,longTaskMonitor:null,pageBusyMonitor:null,frameRateMonitor:null,interactionMonitor:null,scrollMonitor:null,clickMonitor:null,keyMonitor:null,mouseMonitor:null,visibilityMonitor:null,orientationMonitor:null,statsMonitor:null,addedVars:[],monitors:["timeline","longTaskMonitor","pageBusyMonitor","frameRateMonitor","scrollMonitor","keyMonitor","clickMonitor","mouseMonitor","interactionMonitor","visibilityMonitor","orientationMonitor","statsMonitor"],timeOfLastBeacon:0,hasAddedDataToBeacon:!1,onBeforeBeacon:function(){b.runAllAnalyzers()},runAllAnalyzers:function(){var e,t;if(!b.hasAddedDataToBeacon){for(e=0;e<b.monitors.length;e++)(t=b[b.monitors[e]])&&"function"==typeof t.analyze&&t.analyze(b.timeOfLastBeacon);b.addToBeacon("c.lb",b.timeOfLastBeacon?b.timeOfLastBeacon.toString(36):0);b.timeOfLastBeacon=BOOMR.now();b.hasAddedDataToBeacon=!0}},onBeacon:function(){var e;if(b.addedVars&&0<b.addedVars.length){BOOMR.removeVar(b.addedVars);b.addedVars=[]}for(e=0;e<b.monitors.length;e++){var t=b[b.monitors[e]];if(t){b.afterOnload||"function"==typeof t.stop&&t.stop();"function"==typeof t.onBeacon&&t.onBeacon()}}b.hasAddedDataToBeacon=!1},onXhrLoad:function(e){e&&BOOMR.utils.inArray(e.initiator,BOOMR.constants.BEACON_TYPE_SPAS)&&(b.isSpa=!0);e&&"spa_hard"===e.initiator&&b.onPageReady()},onPageReady:function(){b.firedPageReady=!0;if(b.afterOnload&&b.monitorInteractions){b.afterOnloadMonitoring=!0;b.isSpa||"number"!=typeof b.afterOnloadMaxLength||setTimeout(function(){b.afterOnloadMonitoring=!1},b.afterOnloadMaxLength)}if(b.waitAfterOnload){var e=BOOMR.now();setTimeout(function t(){if(BOOMR.now()-e>b.waitAfterOnload){b.complete=!0;BOOMR.sendBeacon()}else{b.timeline.analyze();if(E.timeToInteractive()){b.complete=!0;BOOMR.sendBeacon()}else setTimeout(t,500)}},500)}else b.complete=!0},addToBeacon:function(e,t,n){if(0!==t&&void 0!==t||n){BOOMR.addVar(e,t);b.addedVars.push(e)}else BOOMR.removeVar(e)}};BOOMR.plugins.Continuity={init:function(e){BOOMR.utils.pluginConfig(b,e,"Continuity",["monitorLongTasks","monitorPageBusy","monitorFrameRate","monitorInteractions","monitorStats","afterOnload","afterOnloadMaxLength","afterOnloadMinWait","waitAfterOnload","ttiWaitForFrameworkReady","ttiWaitForHeroImages","sendLog","logMaxEntries","sendTimeline"]);if(b.initialized)return this;b.initialized=!0;b.timeline=new t(BOOMR.now());if(BOOMR.window){if(b.monitorLongTasks&&BOOMR.window.PerformanceObserver&&BOOMR.window.PerformanceLongTaskTiming){b.longTaskMonitor=new n(BOOMR.window,b.timeline);b.ttiMethod="lt"}if(b.monitorFrameRate&&"function"==typeof BOOMR.window.requestAnimationFrame){b.frameRateMonitor=new i(BOOMR.window,b.timeline);b.ttiMethod||(b.ttiMethod="raf")}if(b.monitorPageBusy&&(!BOOMR.window.PerformanceObserver||!BOOMR.window.PerformanceLongTaskTiming||!b.monitorLongTasks)){b.pageBusyMonitor=new r(BOOMR.window,b.timeline);b.ttiMethod||(b.ttiMethod="b")}if(b.monitorInteractions){b.interactionMonitor=new c(BOOMR.window,b.timeline,b.afterOnloadMinWait);b.scrollMonitor=new o(BOOMR.window,b.timeline,b.interactionMonitor);b.keyMonitor=new s(BOOMR.window,b.timeline,b.interactionMonitor);b.clickMonitor=new a(BOOMR.window,b.timeline,b.interactionMonitor);b.mouseMonitor=new u(BOOMR.window,b.timeline,b.interactionMonitor);b.visibilityMonitor=new d(BOOMR.window,b.timeline,b.interactionMonitor);b.orientationMonitor=new l(BOOMR.window,b.timeline,b.interactionMonitor)}b.monitorStats&&(b.statsMonitor=new m(BOOMR.window,b.timeline,b.interactionMonitor))}BOOMR.addVar("c.e",T.toString(36));BOOMR.addVar("c.tti.m",b.ttiMethod);BOOMR.subscribe("before_beacon",b.onBeforeBeacon,null,b);BOOMR.subscribe("beacon",b.onBeacon,null,b);BOOMR.subscribe("page_ready",b.onPageReady,null,b);BOOMR.subscribe("xhr_load",b.onXhrLoad,null,b);return this},is_complete:function(e){return b.complete||e&&"error"===e["http.initiator"]},frameworkReady:function(){b.frameworkReady=BOOMR.now()},metrics:E,compressBucketLog:M,decompressBucketLog:function h(e,t){var n,r,i,o,a,s,u=[],c=t||0;if(!e||0===e.length)return[];s=parseInt(e.charAt(0),10);e=e.substring(1);o=1;for(n=0;n<e.length;n++)if("*"!==e.charAt(n)){if(e.charAt(n)===O){n++;i=e.indexOf(O,n);a=parseInt(e.substring(n,i),36);n=i}else if(s===_)a=g(e.charAt(n));else if(s===p)if(-1!==(i=e.indexOf(",",n))){a=parseInt(e.substring(n,i),36);n=i}else{a=parseInt(e.substring(n),36);n=e.length}else if(s===w){a="__"===e.substr(n,2)?100:parseInt(e.substr(n,2),10);n++}u[c]=a;for(r=1;r<o;r++)u[++c]=a;c++;o=1}else{n++;i=e.indexOf("*",n);o=parseInt(e.substring(n,i),36);n=i}return u},decompressBucketLogNumber:g,decompressLog:function B(e){var t,n,r,i,o,a=[];i=e.split("|");for(t=0;t<i.length;t++){r=i[t].split(",");o={type:parseInt(r[0].charAt(0),10),time:parseInt(r[0].substring(1),36)};for(n=1;n<r.length;n++)o[r[n].charAt(0)]=r[n].substring(1);a.push(o)}return a}}}function S(e){BOOMR.debug(e,"Continuity")}function M(e,t,n,r,i){var o,a,s,u,c,d="",l=0;if(!n||!BOOMR.utils.Compression)return"";if(0===n.length)return"";if(t){"undefined"==typeof n[r]&&(n[r]=0);for(o=r+1;o<=i;o++)"undefined"==typeof n[o]&&(n[o]=n[o-1])}for(o=r;o<=i;o++){l="number"!=typeof n[o]||isNaN(n[o])?0:n[o];e===_?s=l<=63?f.charAt(l):O+l.toString(36)+O:e===p?s=l.toString(36):e===w&&(s=l<99?l<=9?"0"+Math.max(l,0):l:"__");if(o+3<=i&&(n[o+1]===l||0===l&&n[o+1]===undefined)&&(n[o+2]===l||0===l&&n[o+2]===undefined)&&(n[o+3]===l||0===l&&n[o+3]===undefined)){a=1;for(;o<i&&(n[o+1]===l||0===l&&n[o+1]===undefined);){a++;o++}u="*"+a.toString(36)+"*"+s}else u=s;if(0!==l||o!==i){e===p&&c&&(d+=",");c=!0;d+=u}}return c?e.toString()+d:""}function g(e){if(!e||!e.charCodeAt)return 0;var t=e.charCodeAt(0);return 48<=t&&t<=57?t-48:97<=t&&t<=122?t-97+10:65<=t&&t<=90?t-65+36:95===t?62:45===t?63:0}}();!function(){var r;if(!BOOMR.plugins.IFrameDelay){r=BOOMR.window;var i={initialized:!1,registerParent:!1,monitoredCount:0,finishedCount:0,runningCount:0,loadingIntervalID:undefined,loadedIntervalID:undefined,loadEnd:0,messages:{start:"boomrIframeLoading",done:"boomrIframeLoaded",startACK:"boomrIframeLoadingACK",doneACK:"boomrIframeLoadedACK"},onIFrameMessageAsParent:function(e){var t;if(e&&e.data&&"string"==typeof e.data&&"{"===e.data.charAt(0)&&e.source){try{t=JSON.parse(e.data)}catch(n){return}if(t.msg===i.messages.start){o("Received start message from child IFrame");e.source.postMessage(JSON.stringify({msg:i.messages.startACK}),e.origin);i.runningCount+=1}else if(t.msg===i.messages.done){o("Received done message from child IFrame");e.source.postMessage(JSON.stringify({msg:i.messages.doneACK}),e.origin);i.runningCount-=1;i.finishedCount+=1;t.loadEnd>i.loadEnd&&(i.loadEnd=t.loadEnd);i.checkCompleteness()}}},onIFrameMessageAsChild:function(e){var t;if(e&&e.data&&"string"==typeof e.data&&"{"===e.data.charAt(0)&&e.source){try{t=JSON.parse(e.data)}catch(n){return}if(t.msg===i.messages.startACK){o("Received start message ACK from parent");clearInterval(i.loadingIntervalID);i.loadingIntervalID=undefined}else if(t.msg===i.messages.doneACK){o("Received done message ACK from parent");clearInterval(i.loadedIntervalID);i.loadedIntervalID=undefined}}},checkCompleteness:function(){if(i.is_complete()){BOOMR.addVar("ifdl.done",BOOMR.now());BOOMR.addVar("ifdl.ct",i.finishedCount);BOOMR.addVar("ifdl.r",i.runningCount);BOOMR.addVar("ifdl.mon",i.monitoredCount);BOOMR.hasBrowserOnloadFired()?BOOMR.page_ready(0<i.loadEnd?i.loadEnd:undefined):BOOMR.attach_page_ready(function(){BOOMR.page_ready(undefined,!0)})}},is_complete:function(){return!(i.enabled&&!i.registerParent)||i.finishedCount>=i.monitoredCount&&0===i.runningCount}};BOOMR.plugins.IFrameDelay={init:function(e){BOOMR.utils.pluginConfig(i,e,"IFrameDelay",["enabled","registerParent","monitoredCount"]);if(i.initialized)return this;i.initialized=!0;if(this.is_supported())if(i.registerParent){o("Running as Child. Found registerParent=true");BOOMR.utils.addListener(window,"message",i.onIFrameMessageAsChild);function t(){o("Trying to notify parent window of load start");r.parent.postMessage(JSON.stringify({msg:i.messages.start,pid:BOOMR.pageId}),"*")}t();i.loadingIntervalID=setInterval(t,250);BOOMR.subscribe("page_load_beacon",function(e){var t;t=e&&e["rt.end"]?e["rt.end"]:BOOMR.now();function n(){if(!i.loadingIntervalID){o("Trying to notify parent window of load end");r.parent.postMessage(JSON.stringify({msg:i.messages.done,pid:BOOMR.pageId,loadEnd:t}),"*")}}n();i.loadedIntervalID=setInterval(n,250)})}else if(!i.registerParent&&i.monitoredCount&&0<i.monitoredCount){o("Running as Parent. Found monitoredCount="+i.monitoredCount+", listening for messages from child windows");BOOMR.utils.addListener(r,"message",i.onIFrameMessageAsParent)}else{o("Missing configuration. Setting monitored, finished and running to 0 and closing this plugin");i.finishedCount=i.monitoredCount=i.runningCount=0;i.enabled=!1}else i.enabled=!1;return this},is_complete:function(){return i.is_complete()},is_supported:function(){return BOOMR.utils.hasPostMessageSupport()&&window.JSON}}}function o(e){BOOMR.debug("(url: "+r.location.href+"): "+e,"IFrameDelay")}}();!function(){var d,s,l,p,m,f=["uninitialized","open","responseStart","domInteractive","responseEnd"];if(!BOOMR.plugins.AutoXHR&&(d=BOOMR.window)&&d.XMLHttpRequest&&(new d.XMLHttpRequest).addEventListener){c.stop=function(){c.pause();c.observer=null};c.pause=function(){if(c.observer&&c.observer.observer&&!c.isPaused){c.isPaused=!0;c.observer.observer.disconnect()}};c.resume=function(){if(c.observer&&c.observer.observer&&c.isPaused){c.isPaused=!1;c.observer.observer.observe(s,c.observer.config)}};c.start=function(){if(!c.observer){var e={childList:!0,attributes:!0,subtree:!0,attributeFilter:["src","href"]};if(c.observer=BOOMR.utils.addObserver(s,e,null,l.mutation_cb,null,l)){c.observer.config=e;BOOMR.subscribe("page_unload",c.stop,null,c)}}};c.prototype.addEvent=function(e){var t,n,r,i={type:e.initiator,resource:e,nodes_to_wait:0,total_nodes:0,resources:[],aborted:!1,complete:!1},o=this.pending_events.length,a=this;for(t=o-1;0<=t;t--)if(this.pending_events[t]&&!this.pending_events[t].complete){n=this.pending_events[t];r=t;break}if(n)if("click"===n.type){if(0===n.nodes_to_wait||!n.resource.url){this.pending_events[r]=undefined;this.watch--}}else if("xhr"===n.type){if("click"===i.type)return null;if("xhr"===i.type){l.add_event_resource(e);return null}}else if(BOOMR.utils.inArray(n.type,BOOMR.constants.BEACON_TYPE_SPAS)){if("xhr"===i.type){l.add_event_resource(e);return null}if(BOOMR.utils.inArray(i.type,BOOMR.constants.BEACON_TYPE_SPAS)){g("Aborting previous SPA navigation");n.resource.timing.loadEventEnd=BOOMR.now();n.aborted=!0;this.sendEvent(r)}}if("click"===i.type){if(!c.observer)return null;this.setTimeout(m.xhrIdleTimeout,o)}else if("xhr"===i.type){i.nodes_to_wait++;i.total_nodes++;i.ignoreMO=!0}else if(BOOMR.utils.inArray(i.type,BOOMR.constants.BEACON_TYPE_SPAS)){c.start();if(e.wait){i.nodes_to_wait++;i.total_nodes++;e.waitComplete=function(){a.load_finished(o);e.waitComplete=undefined}}else this.setTimeout(m.spaIdleTimeout,o)}this.watch++;this.pending_events.push(i);return e.index=o};c.prototype.sendEvent=function(e){var t=this.pending_events[e],n=this,r=BOOMR.now();if(t&&!t.complete){this.clearTimeout(e);if(BOOMR.readyToSend()){t.complete=!0;this.watch--;t.resource.resources=t.resources;BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS)&&(t.resource.url=s.URL);if("spa"===t.type&&0===t.total_nodes&&t.resource.url===n.lastSpaLocation){g("SPA beacon cancelled, no URL change or resources triggered");BOOMR.fireEvent("spa_cancel");this.pending_events[e]=undefined;return}if(BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS)){n.lastSpaLocation=t.resource.url;t.forced||0!==t.total_nodes||(t.resource.timing.loadEventEnd=r-m.spaIdleTimeout)}this.sendResource(t.resource,e)}else setTimeout(function(){n.sendEvent(e)},500)}};c.prototype.sendResource=function(r,i){var o=this,e=o.pending_events[i],a=r.timing?r.timing.requestStart:undefined,t=function(e,t){e&&(r.timing.loadEventEnd=t||BOOMR.now());BOOMR.real_sendBeacon();r.onComplete&&r.onComplete(r);if(BOOMR.plugins.ResourceTiming&&BOOMR.plugins.ResourceTiming.is_enabled()&&r.timing&&r.timing.requestStart){var n=BOOMR.plugins.ResourceTiming.getCompressedResourceTiming(r.timing.requestStart,r.timing.loadEventEnd);BOOMR.plugins.ResourceTiming.addToBeacon(n)}if(BOOMR.utils.inArray(r.initiator,BOOMR.constants.BEACON_TYPE_SPAS)){o.calculateSpaTimings(r);if("number"==typeof i&&o.pending_events[i].aborted){BOOMR.addVar("pgu",s.URL);BOOMR.addVar("rt.quit","");BOOMR.addVar("rt.abld","");m.addedVars.push("pgu","rt.quit","rt.abld")}}BOOMR.responseEnd(r,a,r);"number"==typeof i&&(o.pending_events[i]=undefined)};"spa_hard"!==r.initiator||e&&e.aborted||BOOMR.hasBrowserOnloadFired()?t(!1):BOOMR.utils.addListener(d,"load",function(){var e=BOOMR.now();BOOMR.setImmediate(function(){t(!0,e)})})};c.prototype.calculateSpaTimings=function(e){var t=BOOMR.getPerformance();if(t&&t.timing)if("spa_hard"===e.initiator){e.timing.responseEnd=t.timing.responseStart;e.timing.fetchStart=t.timing.navigationStart}else{if(!BOOMR.plugins.ResourceTiming||!BOOMR.plugins.ResourceTiming.is_supported())return;var n=BOOMR.plugins.ResourceTiming.getFilteredResourceTiming(e.timing.requestStart,e.timing.loadEventEnd,m.spaBackEndResources).entries,r=Math.round(e.timing.loadEventEnd-e.timing.requestStart);if(!n||!n.length){e.timers={t_resp:0,t_page:r,t_done:r};return}for(var i=e.timing.loadEventEnd-t.timing.navigationStart,o=0;o<n.length;o++)if(n[o].responseStart>i){n[o].responseStart=i;n[o].responseEnd=i}else n[o].responseEnd>i&&(n[o].responseEnd=i);var a=Math.round(BOOMR.plugins.ResourceTiming.calculateResourceTimingUnion(n)),s=r-a;if(a<0||r<0||s<0){BOOMR.addError("Incorrect SPA time calculation");return}e.timers={t_resp:a,t_page:s,t_done:r}}};c.prototype.setTimeout=function(e,t){var n=this;if(e){this.clearTimeout(t);this.timer=setTimeout(function(){n.timedout(t)},e)}};c.prototype.timedout=function(e){var t;this.clearTimeout(e);if((t=this.pending_events[e])&&0===t.nodes_to_wait){if("click"===t.type&&(0===t.total_nodes||!t.resource.url)){this.watch--;this.pending_events[e]=undefined}this.sendEvent(e)}};c.prototype.clearTimeout=function(e){if(this.timer&&e===this.pending_events.length-1){clearTimeout(this.timer);this.timer=null}};c.prototype.load_cb=function(e,t){var n,r,i=BOOMR.now();if((n=e.target||e.srcElement)&&n._bmr){r=n._bmr.idx;t=void 0!==t?t:n._bmr.res||0;if(!n._bmr.end[t]){n._bmr.end[t]=i;this.load_finished(r,i)}}};c.prototype.monitorMO=function(e){var t=this.pending_events[e];t&&delete t.ignoreMO};c.prototype.load_finished=function(e,t){var n=this.pending_events[e];if(n){n.nodes_to_wait--;if(0===n.nodes_to_wait){n.resource.timing.loadEventEnd=t||BOOMR.now();e===this.pending_events.length-1?BOOMR.utils.inArray(n.type,BOOMR.constants.BEACON_TYPE_SPAS)?this.setTimeout(m.spaIdleTimeout,e):this.setTimeout(m.xhrIdleTimeout,e):this.sendEvent(e)}}};c.prototype.wait_for_node=function(t,n){var e,r,i,o,a,s,u,c,d,l=this,f=!1,O=!1;if(t&&t.nodeName&&(t.nodeName.toUpperCase().match(/^(IMG|IFRAME|IMAGE)$/)||"LINK"===t.nodeName.toUpperCase()&&t.rel&&t.rel.match(/\bstylesheet\b/i))){t._bmr&&"number"==typeof t._bmr.res&&t._bmr.end[t._bmr.res]&&(O=!0);if(!(a=t.src||"function"==typeof t.getAttribute&&t.getAttribute("xlink:href")||t.href)||a.match(/^(about:|javascript:|data:)/i))return!1;t._bmr&&t._bmr.url!==a&&(O=!0);if("IMG"===t.nodeName){if(t.naturalWidth&&!O)return!1;if("function"==typeof t.getAttribute&&""===t.getAttribute("src"))return!1}if("IFRAME"===t.nodeName&&O)return!1;if("function"==typeof t.getAttribute){u=parseInt(t.getAttribute("height"),10);c=parseInt(t.getAttribute("width"),10)}isNaN(u)&&(u=!t.style||"0"!==t.style.height&&"0px"!==t.style.height&&"1px"!==t.style.height?undefined:0);isNaN(c)&&(c=!t.style||"0"!==t.style.width&&"0px"!==t.style.width&&"1px"!==t.style.width?undefined:0);if(!isNaN(u)&&u<=1&&!isNaN(c)&&c<=1)return!1;if(t.style&&"none"===t.style.display)return!1;if(t.style&&"hidden"===t.style.visibility)return!1;if(!(e=this.pending_events[n]))return!1;s=e.resources.length;t._bmr||(t._bmr={end:{}});e.urls||(e.urls={});if(e.urls[a])return!1;if(!e.resource.url){p.href=a;if(m.excludeFilter(p)){g("Exclude for "+p.href+" matched. Excluding");return!1}e.resource.url=p.href}t._bmr.res=s;t._bmr.idx=n;delete t._bmr.end[s];t._bmr.url=a;d=function(e){l.load_cb(e,s);t.removeEventListener("load",d);t.removeEventListener("error",d)};g("Monitoring mutation URL: "+a+" for event id: "+n);t.addEventListener("load",d);t.addEventListener("error",d);e.nodes_to_wait++;this.clearTimeout(n);e.total_nodes++;e.resources.push(t);e.urls[a]=1;f=!0}else t.nodeType===Node.ELEMENT_NODE&&["IMAGE","IMG"].forEach(function(e){if((r=t.getElementsByTagName(e))&&r.length)for(i=0,o=r.length;i<o;i++)f|=this.wait_for_node(r[i],n)},this);return f};c.prototype.add_event_resource=function(e){var t,n=this.pending_events.length-1;if(n<0)return-1;if(!(t=this.pending_events[n]))return-1;if(!e)return-1;g("Monitoring "+e.type+" URL: "+e.url+" for event id: "+n);t.nodes_to_wait++;t.total_nodes++;e.index=n;e.node=!0;return n};c.prototype.mutation_cb=function(e){var i,o,a;if(!this.watch)return!0;if((o=(i=this).pending_events.length-1)<0||!this.pending_events[o])return!0;if((a=this.pending_events[o]).ignoreMO)return!0;"undefined"==typeof a.interesting&&(a.interesting=!1);if(e&&e.length){a.resource.timing.domComplete=BOOMR.now();e.forEach(function(e){var t,n,r;if("attributes"===e.type)a.interesting|=i.wait_for_node(e.target,o);else if("childList"===e.type){n=e.addedNodes.length;for(t=0;t<n;t++)a.interesting|=i.wait_for_node(e.addedNodes[t],o);n=e.removedNodes.length;for(t=0;t<n;t++)"IFRAME"===(r=e.removedNodes[t]).nodeName&&r._bmr&&i.load_cb({target:r,type:"removed"})}})}if(!a.interesting&&!a.timeoutExtended){this.setTimeout(1e3,o);a.timeoutExtended=!0}return!0};c.prototype.queue_is_empty=function(){return 0===this.nodesWaitingFor()};c.prototype.nodesWaitingFor=function(e){var t;if(0===this.pending_events.length)return 0;void 0===e&&(e=this.pending_events.length-1);return(t=this.pending_events[e])?t.nodes_to_wait:0};c.prototype.completeEvent=function(e){var t,n=BOOMR.now();if(0!==this.pending_events.length){void 0===e&&(e=this.pending_events.length-1);if(t=this.pending_events[e]){t.resource.timing.loadEventEnd=n;t.forced=!0;this.sendEvent(e)}}};l=new c;m={spaBackEndResources:["xmlhttprequest","script","fetch"],alwaysSendXhr:!1,excludeFilters:[],initialized:!1,addedVars:[],captureXhrRequestResponse:!1,singlePageApp:!1,autoXhrEnabled:!1,monitorFetch:!1,fetchBodyUsedWait:200,spaIdleTimeout:1e3,xhrIdleTimeout:50,excludeFilter:function(e){var t,n;if(!e||!e.href)return!1;for(t=0;t<m.excludeFilters.length;t++)if("function"==typeof m.excludeFilters[t].cb){n=m.excludeFilters[t].ctx;m.excludeFilters[t].name&&g("Running filter: "+m.excludeFilters[t].name+" on URL: "+e.href);try{if(m.excludeFilters[t].cb.call(n,e)){g("Found matching filter at: "+m.excludeFilters[t].name+" for URL: "+e.href);return!0}}catch(r){BOOMR.addError(r,"BOOMR.plugins.AutoXHR.impl.excludeFilter()")}}return!1},clear:function(){if(m.addedVars&&0<m.addedVars.length){BOOMR.removeVar(m.addedVars);m.addedVars=[]}},loadFinished:function(t,e){var n,r,i,o,a;e=e||BOOMR.now();if(!t.timing.loadEventEnd){t.status&&BOOMR.fireEvent("xhr_error",t);t.timing.loadEventEnd=e;if((a=BOOMR.getPerformance())&&a.timing){r=a.timing.navigationStart;if(n=BOOMR.getResourceTiming(t.url,function(e,t){return e.responseEnd-t.responseEnd},function(e){return Math.ceil(r+e.startTime+2)>=t.timing.requestStart&&0!==e.responseEnd})){i=Math.floor(r+n.startTime);if((o=Math.floor(r+n.responseEnd))<=BOOMR.now()){t.timing.responseEnd=o;t.timing.loadEventEnd<o&&(t.timing.loadEventEnd=o);t.timing.requestStart=i;t.timing.fetchStart=i;0!==n.responseStart&&(t.timing.responseStart=Math.floor(r+n.responseStart));t.restiming=n}}}t.node&&O(t.url,m.alwaysSendXhr)&&l.sendResource(t);if(0<=t.index){l.monitorMO(t.index);l.load_finished(t.index,t.timing.responseEnd)}}}};BOOMR.plugins.AutoXHR={is_complete:function(){return!0},init:function(e){var t,n;s=d.document;if(d&&s){p=s.createElement("A");BOOMR.utils.pluginConfig(m,e,"AutoXHR",["spaBackEndResources","alwaysSendXhr","monitorFetch","fetchBodyUsedWait","spaIdleTimeout","xhrIdleTimeout"]);BOOMR.instrumentXHR=M;BOOMR.uninstrumentXHR=B;BOOMR.instrumentFetch=h;BOOMR.uninstrumentFetch=R;if(!m.initialized){this.addExcludeFilter(u,null,"shouldExcludeXhr");m.initialized=!0}if(e&&e.AutoXHR&&e.AutoXHR.excludeFilters&&0<e.AutoXHR.excludeFilters.length)for(n=0;n<e.AutoXHR.excludeFilters.length;n++)m.excludeFilters.push(e.AutoXHR.excludeFilters[n]);m.autoXhrEnabled=e.instrument_xhr;if(BOOMR.plugins.SPA&&BOOMR.plugins.SPA.supported_frameworks){var r=BOOMR.plugins.SPA.supported_frameworks();for(t=0;t<r.length;t++){var i=r[t];if(e[i]&&e[i].enabled){m.singlePageApp=!0;break}}}if(m.alwaysSendXhr&&m.autoXhrEnabled&&BOOMR.xhr&&"function"==typeof BOOMR.xhr.stop){function o(e){if(e.length)for(t=0;t<e.length;t++)v(e[t]);else v(e)}var a=BOOMR.xhr.stop(o);a&&a.length&&BOOMR.setImmediate(o,a)}if(m.singlePageApp){m.alwaysSendXhr||(m.autoXhrEnabled=!1);if(m.autoXhrEnabled){BOOMR.instrumentXHR();BOOMR.instrumentFetch()}}else if(m.autoXhrEnabled){BOOMR.instrumentXHR();BOOMR.instrumentFetch()}else if(!1===m.autoXhrEnabled){BOOMR.uninstrumentXHR();BOOMR.uninstrumentFetch()}BOOMR.registerEvent("xhr_error");BOOMR.subscribe("beacon",m.clear,null,m)}},getMutationHandler:function(){return l},getPathname:n,enableAutoXhr:function(){if(!m.autoXhrEnabled){BOOMR.instrumentXHR();BOOMR.instrumentFetch()}m.autoXhrEnabled=!0},addExcludeFilter:function(e,t,n){m.excludeFilters.push({cb:e,ctx:t,name:n})},setXhrRequestResponseCapturing:function(e){m.captureXhrRequestResponse=e},matchesAlwaysSendXhr:O}}function g(e){BOOMR.debug(e,"AutoXHR")}function n(e){if(!e)return null;e.href=e.href;var t=e.pathname;"/"!==t.charAt(0)&&(t="/"+t);return t}function u(e){var t;if(e.href){if(e.href.match(/^(about:|javascript:|data:)/i))return!0;if("function"==typeof BOOMR.getBeaconURL&&BOOMR.getBeaconURL()&&(0===(t=e.href.indexOf(BOOMR.getBeaconURL()))||5===t||6===t))return!0}return BOOMR.xhr_excludes.hasOwnProperty(e.href)||BOOMR.xhr_excludes.hasOwnProperty(e.hostname)||BOOMR.xhr_excludes.hasOwnProperty(n(e))}function c(){this.watch=0;this.timer=null;this.pending_events=[];this.lastSpaLocation=null}function O(e,t){var n,r;if(!t||!e)return!1;if("boolean"==typeof t)return!0===t;if("function"==typeof t)try{return!0===t(e)}catch(i){return!1}if(BOOMR.utils.isArray(t))for(n=0;n<t.length;n++){if("string"==typeof(r=t[n])&&r===e)return!0;if(r instanceof RegExp&&r.test(e))return!0}return!1}function h(){if(m.monitorFetch&&"function"==typeof d.fetch&&"function"==typeof d.Request&&"function"==typeof d.Response&&"function"==typeof d.Promise&&"function"==typeof window.fetch&&!d.fetch.polyfill&&(!BOOMR.proxy_fetch||BOOMR.proxy_fetch!==d.fetch))if(BOOMR.proxy_fetch&&BOOMR.orig_fetch&&BOOMR.orig_fetch===d.fetch)d.fetch=BOOMR.proxy_fetch;else{BOOMR.orig_fetch=d.orig_fetch||d.fetch;BOOMR.proxy_fetch=function(e,t){var n,r,i,o={timing:{},initiator:"xhr"};if("object"==typeof e&&e instanceof d.Request){n=e.url;r=t&&t.method||e.method||"GET";m.captureXhrRequestResponse&&(i=t&&t.body||e.body||undefined)}else{n=e;r=t&&t.method||"GET";m.captureXhrRequestResponse&&(i=t&&t.body||undefined)}p.href=n;if(m.excludeFilter(p)){BOOMR.debug("Exclude found for resource: "+p.href+" Skipping Fetch instrumentation!","AutoXHR");return BOOMR.orig_fetch.apply(d,arguments)}BOOMR.fireEvent("xhr_init","fetch");o.url=p.href;o.method=r;o.type="fetch";i&&(o.requestPayload=i);BOOMR.fireEvent("xhr_send",{resource:o});l.addEvent(o);try{o.timing.requestStart=BOOMR.now();var a=BOOMR.orig_fetch.apply(this,arguments);function s(r,i,o){function a(){var e;if(o.fetchResponse&&!o.fetchResponse.bodyUsed&&m.fetchBodyUsedWait){e=BOOMR.now();o.responseBodyNotUsed=!0;setTimeout(function(){m.loadFinished(o,e)},m.fetchBodyUsedWait)}else m.loadFinished(o)}return function(){var e,t=r._bmrNextP;try{e=i.apply(this===window?d:this,arguments);for(;t&&!t._bmrHasOnFulfilled;)t=t._bmrNextP;t||(e instanceof d.Promise?e.then=u(e,e.then,o):a());return e}catch(n){for(;t&&!t._bmrHasOnRejected;)t=t._bmrNextP;t||a();throw n}}}function u(n,r,i){return n._bmrNextP?r:function(){var e=Array.prototype.slice.call(arguments);if(0<e.length){if("function"==typeof e[0]){e[0]=s(n,e[0],i);n._bmrHasOnFulfilled=!0}if(1<e.length&&"function"==typeof e[1]){e[1]=s(n,e[1],i);n._bmrHasOnRejected=!0}}var t=r.apply(n,e);(n._bmrNextP=t).then=u(t,t.then,i);return t}}a.then=u(a,a.then,o);return a.then(function(e){var t,n=!1,r=!1;(e.status<200||400<=e.status)&&(o.status=e.status);o.fetchResponse=e;0<=o.index&&l.monitorMO(o.index);if(m.captureXhrRequestResponse&&"function"==typeof e.clone){if(t=e.headers.get("content-type")){n=-1!==t.indexOf("json");r=-1!==t.indexOf("xml")}o.response={};try{e.clone().text().then(function(e){o.response.text=e;o.response.raw=e;r&&"function"==typeof d.DOMParser&&(o.response.xml=(new d.DOMParser).parseFromString(e,"text/xml"))}).then(null,function(e){})}catch(i){}if(n)try{e.clone().json().then(function(e){o.response.json=e}).then(null,function(e){})}catch(i){}}return e},function(e){!e||"AbortError"!==e.name&&20!==e.code?o.status=-998:o.status=-999;throw e})}catch(c){o.status=-997;m.loadFinished(o);throw c}};BOOMR.utils.overwriteNative(d,"fetch",BOOMR.proxy_fetch)}}function R(){"function"==typeof d.fetch&&BOOMR.orig_fetch&&BOOMR.orig_fetch!==d.fetch&&(d.fetch=BOOMR.orig_fetch)}function M(){if(!BOOMR.proxy_XMLHttpRequest||BOOMR.proxy_XMLHttpRequest!==d.XMLHttpRequest)if(BOOMR.proxy_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest===d.XMLHttpRequest){d.XMLHttpRequest=BOOMR.proxy_XMLHttpRequest;c.start()}else{BOOMR.orig_XMLHttpRequest=d.orig_XMLHttpRequest||d.XMLHttpRequest;c.start();!function e(){BOOMR.subscribe("click",function(){if(!m.singlePageApp){var e={timing:{},initiator:"click"};if(BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest!==d.XMLHttpRequest){e.timing.requestStart=BOOMR.now();l.addEvent(e)}}})}();BOOMR.proxy_XMLHttpRequest=function(){var o,a,t,s={timing:{},initiator:"xhr"},u=!1,c=!1;o=new BOOMR.orig_XMLHttpRequest;a=o.open;t=o.send;o.open=function(e,t,n){p.href=t;if(m.excludeFilter(p)){c=!0;g("Exclude found for resource: "+p.href+" Skipping XHR instrumentation!");return a.apply(o,arguments)}c=!1;n===undefined&&(n=!0);BOOMR.fireEvent("xhr_init","xhr");function r(t,n){o.addEventListener(t,function(){if("readystatechange"===t){s.timing[f[o.readyState]]=BOOMR.now();if(4===o.readyState&&0!==o.status){(o.status<200||400<=o.status)&&(s.status=o.status);if(m.captureXhrRequestResponse){s.response={text:""===o.responseType||"text"===o.responseType?o.responseText:null,xml:""===o.responseType||"document"===o.responseType?o.responseXML:null,raw:o.response,json:o.responseJSON};if(o.response&&o.response.constructor&&o.response.constructor===BOOMR.boomerang_frame.Object&&BOOMR.boomerang_frame.Object!==d.Object)try{o.response.constructor=d.Object}catch(e){}}m.loadFinished(s)}else if(0===o.readyState&&"number"==typeof s.timing.open){s.status=-999;m.loadFinished(s)}}else{"load"===t?(o.status<200||400<=o.status)&&(s.status=o.status):s.status=n===undefined?o.status:n;m.loadFinished(s)}},!1)}if(!u){n&&r("readystatechange");r("load");r("timeout",-1001);r("error",-998);r("abort",-999)}s.url=p.href;s.method=e;s.type="xhr";delete s.status;n||(s.synchronous=!0);u=!0;try{return a.apply(o,arguments)}catch(i){s.status=-997;m.loadFinished(s);throw i}};o.send=function(e){if(c)return t.apply(o,arguments);m.captureXhrRequestResponse&&(o.resource.requestPayload=e);BOOMR.fireEvent("xhr_send",o);l.addEvent(s);s.timing.requestStart=BOOMR.now();return"undefined"==typeof s.status||-997!==s.status?t.apply(o,arguments):void 0};o.resource=s;return o};BOOMR.proxy_XMLHttpRequest.UNSENT=0;BOOMR.proxy_XMLHttpRequest.OPENED=1;BOOMR.proxy_XMLHttpRequest.HEADERS_RECEIVED=2;BOOMR.proxy_XMLHttpRequest.LOADING=3;BOOMR.proxy_XMLHttpRequest.DONE=4;BOOMR.proxy_XMLHttpRequest.prototype=BOOMR.orig_XMLHttpRequest.prototype;BOOMR.utils.overwriteNative(d,"XMLHttpRequest",BOOMR.proxy_XMLHttpRequest)}}function B(){BOOMR.orig_XMLHttpRequest&&BOOMR.orig_XMLHttpRequest!==d.XMLHttpRequest&&(d.XMLHttpRequest=BOOMR.orig_XMLHttpRequest)}function v(e){e.initiator="xhr";BOOMR.responseEnd(e)}}();!function(){var s,n=!1,t=!1,u=!1,c=!1,d=!1,l=!0,f=!1,O=!1,p=!1,r=[],i=!1;if(!BOOMR.plugins.SPA&&BOOMR.plugins.AutoXHR){var o={spaHardMissedOnComplete:function(e){var t,n=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart();i=!1;BOOMR.addVar("spa.missed","1");BOOMR.plugins.RT&&BOOMR.plugins.RT.clearTimer("t_done");e.timing.requestStart=n;0===e.resources.length&&(t=BOOMR.getPerformance())&&t.timing&&t.timing.navigationStart&&t.timing.loadEventEnd&&(e.timing.loadEventEnd=t.timing.loadEventEnd)},onBeacon:function(){BOOMR.removeVar("spa.missed","spa.forced","spa.waiting")}};BOOMR.plugins.SPA={is_complete:function(){return!i},init:function(e){if(e&&e.instrument_xhr){d=e.instrument_xhr;u&&d&&BOOMR.plugins.AutoXHR.enableAutoXhr()}if(!t){t=!0;BOOMR.subscribe("beacon",o.onBeacon,null,o)}},register:function(e){r.push(e)},supported_frameworks:function(){return r},onLoadSpaHardMissed:function(){if(!u){c=!0;d&&BOOMR.plugins.AutoXHR.enableAutoXhr();i=!0;if(p)i=!1;else{BOOMR.fireEvent("spa_init",[BOOMR.plugins.SPA.current_spa_nav(),BOOMR.window.document.URL]);BOOMR.plugins.SPA.route_change(o.spaHardMissedOnComplete)}}},hook:function(e,t){t=t||{};m("Hooked");"function"==typeof t.routeFilter&&(f=t.routeFilter);"function"==typeof t.routeChangeWaitFilter&&(O=t.routeChangeWaitFilter);t.disableHardNav&&(p=t.disableHardNav);if(n)return this;e&&BOOMR.attach_page_ready(this.onLoadSpaHardMissed);n=!0;return this},route_change:function(t,e){m("Route Change");var n=!1,r=l&&!p?"spa_hard":"spa";if(s&&s.wait)m("Route change wait filter not complete; not tracking this route");else{if("spa"===r&&f)try{if(!f.apply(null,e)){m("Route filter returned false; not tracking this route");return}m("Route filter returned true; tracking this route")}catch(a){BOOMR.addError(a,"SPA.route_change.routeFilter")}u=!0;var i=BOOMR.plugins.RT&&BOOMR.plugins.RT.navigationStart(),o={timing:{requestStart:c?BOOMR.now():i},initiator:r,url:BOOMR.window.document.URL};l=!1;if(!c||"function"==typeof t){c=!0;o.onComplete=function(e){if(!n){n=!0;BOOMR.fireEvent("spa_navigation")}"function"==typeof t&&t(e)}}if("spa"===r&&O){m("Running route change wait filter");try{if(O.apply(null,arguments)){m("Route filter returned true; waiting for complete call");o.wait=!0;s=o}else m("Route wait filter returned false; not waiting for complete call")}catch(a){BOOMR.addError(a,"SPA.route_change.routeChangeWaitFilter")}}o.index=BOOMR.plugins.AutoXHR.getMutationHandler().addEvent(o);d&&BOOMR.plugins.AutoXHR.enableAutoXhr()}},last_location:function(e){lastLocationChange=e},current_spa_nav:function(){return c?"spa":"spa_hard"},wait_complete:function(){if(s){s.wait=!1;if(s.waitComplete){m("Route wait filter complete");s.waitComplete()}s=null}},markNavigationComplete:function(){var e,t,n,r=BOOMR.plugins.AutoXHR.getMutationHandler();s&&s.wait&&BOOMR.plugins.SPA.wait_complete();if(r&&0<r.pending_events.length)for(e=r.pending_events.length-1;0<=e;e--)if((t=r.pending_events[e])&&BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS)){if(t.complete)break;m("SPA Navigation being marked complete; nodes waiting for: "+(n=r.nodesWaitingFor(e)));BOOMR.addVar("spa.forced","1");BOOMR.addVar("spa.waiting",n);r.completeEvent(e);return}m("No SPA navigation in progress to mark as complete")},isSpaNavInProgress:function(){var e,t,n=BOOMR.plugins.AutoXHR.getMutationHandler();if(n&&0<n.pending_events.length)for(e=n.pending_events.length-1;0<=e;e--)if((t=n.pending_events[e])&&BOOMR.utils.inArray(t.type,BOOMR.constants.BEACON_TYPE_SPAS))return!t.complete;return!1}};BOOMR.plugins.SPA.waitComplete=BOOMR.plugins.SPA.wait_complete}function m(e){BOOMR.debug(e,"SPA")}}();!function(){var u={auto:!1,enabled:!0,hooked:!1,routeHooked:!1,hadMissedRouteChange:!1,routeChangeInProgress:!1,disableHardNav:!1,routeFilter:undefined,routeChangeWaitFilter:undefined,monitorReplaceState:!0,a:undefined,resetRouteChangeInProgress:function(){c("resetting routeChangeInProgress");u.routeChangeInProgress&&clearTimeout(u.routeChangeInProgress);u.routeChangeInProgress=!1},setRouteChangeInProgress:function(){u.routeChangeInProgress&&clearTimeout(u.routeChangeInProgress);u.routeChangeInProgress=setTimeout(u.resetRouteChangeInProgress,50)},spaInit:function(e,t){t?BOOMR.fireEvent("spa_init",[BOOMR.plugins.SPA.current_spa_nav(),t]):e?BOOMR.fireEvent("spa_init",[BOOMR.plugins.SPA.current_spa_nav(),e]):BOOMR.fireEvent("spa_init",[BOOMR.plugins.SPA.current_spa_nav(),BOOMR.window.document.URL])},routeChange:function(e,t){if(u.enabled){if(u.disableHardNav&&!BOOMR.onloadFired())return;if(u.routeChangeInProgress)c("routeChangeInProgress, not triggering");else{c("routeChange triggered, sending route_change() event");u.spaInit(e,t);BOOMR.plugins.SPA.route_change()}}else{c("Not enabled - we've missed a routeChange");u.hadMissedRouteChange=!0;u.resetRouteChangeInProgress()}}};if(!BOOMR.plugins.History&&"undefined"!=typeof BOOMR.plugins.SPA&&"undefined"!=typeof BOOMR.plugins.AutoXHR&&BOOMR.window&&BOOMR.window.history){BOOMR.plugins.SPA.register("History");u.a=BOOMR.window.document.createElement("A");BOOMR.plugins.History={is_complete:function(){return!0},hook:function(e,t,n){(n=n||{}).disableHardNav=u.disableHardNav;if(u.hooked)return this;u.routeFilter&&(n.routeFilter=u.routeFilter);u.routeChangeWaitFilter&&(n.routeChangeWaitFilter=u.routeChangeWaitFilter);if(function s(){var r,o,t,e,n,i=BOOMR.window.history;function a(){BOOMR.window.addEventListener("popstate",function(e){c("popstate");u.routeChange()})}"function"==typeof i.pushState&&(i.pushState=(r=i.pushState,function(e,t,n){c("pushState, title: "+t+" url: "+n);u.routeChange(t,n);return r.apply(this,arguments)}));u.monitorReplaceState&&"function"==typeof i.replaceState&&(i.replaceState=(o=i.replaceState,function(e,t,n){var r=BOOMR.window.document.URL,i=r;if(3<=arguments.length&&null!=n){u.a.href=n;i=u.a.href}if(BOOMR.plugins.SPA.isSpaNavInProgress()&&i===r)c("replaceState ignored (no URL change and a SPA nav is in progress), title: "+t+" url: "+n);else{c("replaceState, title: "+t+" url: "+n);u.routeChange(t,n)}return o.apply(this,arguments)}));"function"==typeof i.go&&(i.go=(t=i.go,function(e){c("go");u.routeChange();return t.apply(this,arguments)}));"function"==typeof i.back&&(i.back=(e=i.back,function(){c("back");u.routeChange();return e.apply(this,arguments)}));"function"==typeof i.forward&&(i.forward=(n=i.forward,function(){c("forward");u.routeChange();return n.apply(this,arguments)}));BOOMR.window.addEventListener("hashchange",function(e){var t=(e||{}).newURL;c("hashchange "+t);u.routeChange(null,t)});BOOMR.hasBrowserOnloadFired()?a():BOOMR.window.addEventListener("load",function(){setTimeout(a,0)});BOOMR.subscribe("beacon",u.resetRouteChangeInProgress);BOOMR.subscribe("spa_cancel",u.resetRouteChangeInProgress);BOOMR.subscribe("spa_init",u.setRouteChangeInProgress);return!0}()){BOOMR.plugins.SPA.hook(t,n);u.hooked=!0}return this},init:function(e){BOOMR.utils.pluginConfig(u,e,"History",["auto","enabled","disableHardNav","routeFilter","routeChangeWaitFilter","monitorReplaceState"]);u.auto&&u.enabled&&this.hook(undefined,!0,{});return this},disable:function(){u.enabled=!1;return this},enable:function(){u.enabled=!0;if(u.hooked&&u.hadMissedRouteChange){u.hadMissedRouteChange=!1;BOOMR.plugins.SPA.route_change();u.setRouteChangeInProgress();c("Hooked and hadMissedRouteChange sending route_change!")}return this}}}function c(e){BOOMR.debug(e,"History")}}();!function(r){var i,s;if(!BOOMR.plugins.RT){s={onloadfired:!1,unloadfired:!1,visiblefired:!1,initialized:!1,complete:!1,autorun:!0,timers:{},cookie:"RT",cookie_exp:604800,session_exp:1800,strict_referrer:!0,navigationType:0,navigationStart:undefined,responseStart:undefined,loadTime:0,oboError:0,t_start:undefined,cached_t_start:undefined,cached_xhr_start:undefined,t_fb_approx:undefined,r:undefined,beacon_url:undefined,next_beacon_url:undefined,basic_timers:{t_done:1,t_resp:1,t_page:1},crossdomain_sending:!1,addedVars:[],updateCookie:function(e,t){var n,r,i,o;if(!this.cookie)return!1;i=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie))||{};for(o in i)i.hasOwnProperty(o)&&(isNaN(parseInt(o,10))||delete i[o]);if("object"==typeof e)for(o in e)e.hasOwnProperty(o)&&(e[o]===undefined?i.hasOwnProperty(o)&&delete i[o]:i[o]=e[o]);i.z=1;i.dm=BOOMR.session.domain;i.si=BOOMR.session.ID;i.ss=BOOMR.session.start.toString(36);i.sl=BOOMR.session.length.toString(36);1800!==s.session_exp&&(i.se=s.session_exp.toString(36));BOOMR.session.rate_limited&&(i.rl=1);i.tt=this.loadTime.toString(36);0<this.oboError?i.obo=this.oboError.toString(36):delete i.obo;r=BOOMR.now();if(t){i[t]=(r-BOOMR.session.start).toString(36);s.lastActionTime=r}this.beacon_url&&(i.bcn=this.beacon_url);BOOMR.debug("Setting cookie (timer="+t+")\n"+BOOMR.utils.objectToString(i),"rt");if(!BOOMR.utils.setCookie(this.cookie,i,this.cookie_exp)){BOOMR.error("cannot set start cookie","rt");return!1}if(50<(n=BOOMR.now())-r){BOOMR.utils.removeCookie(this.cookie);BOOMR.error("took more than 50ms to set cookie... aborting: "+r+" -> "+n,"rt")}return!0},refreshSession:function(e){e||(e=BOOMR.plugins.RT.getCookie());if(e){e.ss?BOOMR.session.start=e.ss:BOOMR.session.start=BOOMR.t_lstart||BOOMR.t_start;e.si&&e.si.match(/-/)&&(BOOMR.session.ID=e.si);e.sl&&(BOOMR.session.length=e.sl);e.tt&&(this.loadTime=e.tt);e.obo&&(this.oboError=e.obo);e.dm&&!BOOMR.session.domain&&(BOOMR.session.domain=e.dm);e.se&&(s.session_exp=e.se);e.bcn&&(this.beacon_url=e.bcn);e.rl&&"1"===e.rl&&(BOOMR.session.rate_limited=!0)}},maybeResetSession:function(e,t){BOOMR.debug("Current session meta:\n"+BOOMR.utils.objectToString(BOOMR.session),"rt");BOOMR.debug("Timers: t_start="+t+", sessionLoad="+s.loadTime+", sessionError="+s.oboError+", lastAction="+s.lastActionTime,"rt");var n=0;BOOMR.session.start&&BOOMR.session.length&&(n=(BOOMR.now()-BOOMR.session.start)/BOOMR.session.length);var r=1e3*s.session_exp;if(!BOOMR.session.start||t&&BOOMR.session.start>t||e-(s.lastActionTime||BOOMR.t_start)>r||r<n){BOOMR.session.start=t||BOOMR.t_lstart||BOOMR.t_start;BOOMR.session.length=0;BOOMR.session.rate_limited=!1;s.loadTime=0;s.oboError=0;s.beacon_url=s.next_beacon_url;s.lastActionTime=e;s.updateCookie({rl:undefined,sl:BOOMR.session.length,ss:BOOMR.session.start,tt:s.loadTime,obo:undefined,bcn:s.beacon_url})}BOOMR.debug("New session meta:\n"+BOOMR.utils.objectToString(BOOMR.session),"rt");BOOMR.debug("Timers: t_start="+t+", sessionLoad="+s.loadTime+", sessionError="+s.oboError,"rt")},initFromCookie:function(){var e,t,n;n=BOOMR.plugins.RT.getCookie();this.cookie||(BOOMR.session.enabled=!1);if(n){n.s=Math.max(+n.ld||0,Math.max(+n.ul||0,+n.cl||0));BOOMR.debug("Read from cookie "+BOOMR.utils.objectToString(n),"rt");if(n.s&&(n.r||n.nu)){this.r=n.r;e=BOOMR.utils.MD5(i.URL);t=BOOMR.utils.MD5(i&&i.referrer||"");BOOMR.debug("referrer check: "+this.r+" =?= "+t,"rt");n.cl&&BOOMR.debug(n.s+" <? "+(+n.cl+15),"rt");n.nu&&BOOMR.debug(n.nu+" =?= "+e,"rt");if(!this.strict_referrer||n.cl&&n.nu&&n.nu===e&&n.s<+n.cl+15||n.s===+n.ul&&this.r===t){this.t_start=n.s;+n.hd>n.s&&(this.t_fb_approx=n.hd)}else this.t_start=this.t_fb_approx=undefined}n.s&&(this.lastActionTime=n.s);this.refreshSession(n);this.updateCookie({s:undefined,ul:undefined,cl:undefined,hd:undefined,ld:undefined,rl:undefined,r:undefined,nu:undefined,sh:undefined});this.maybeResetSession(BOOMR.now())}},incrementSessionDetails:function(){BOOMR.debug("Incrementing Session Details... ","RT");BOOMR.session.length++;isNaN(s.timers.t_done.delta)?s.oboError++:s.loadTime+=s.timers.t_done.delta},getBoomerangTimings:function(){var e,t,n,r,i;function o(e,t){var n=Math.round(e||0),r=Math.round(t||0);return(n=0===n?0:n-r)||""}if(BOOMR.t_start){BOOMR.plugins.RT.startTimer("boomerang",BOOMR.t_start);BOOMR.plugins.RT.endTimer("boomerang",BOOMR.t_end);BOOMR.plugins.RT.endTimer("boomr_fb",BOOMR.t_start);if(BOOMR.t_lstart){BOOMR.plugins.RT.endTimer("boomr_ld",BOOMR.t_lstart);BOOMR.plugins.RT.setTimer("boomr_lat",BOOMR.t_start-BOOMR.t_lstart)}}try{if(window&&"performance"in window&&window.performance&&"function"==typeof window.performance.getEntriesByName){t={"rt.bmr":BOOMR.url};BOOMR.config_url&&(t["rt.cnf"]=BOOMR.config_url);for(n in t)if(t.hasOwnProperty(n)&&t[n]){if(!(e=window.performance.getEntriesByName(t[n]))||0===e.length||!e[0])continue;i=[r=o((e=e[0]).startTime,0),o(e.responseEnd,r),o(e.responseStart,r),o(e.requestStart,r),o(e.connectEnd,r),o(e.secureConnectionStart,r),o(e.connectStart,r),o(e.domainLookupEnd,r),o(e.domainLookupStart,r),o(e.redirectEnd,r),o(e.redirectStart,r)].join(",").replace(/,+$/,"");BOOMR.addVar(n,i);s.addedVars.push(n)}}}catch(a){BOOMR.addError(a,"rt.getBoomerangTimings")}},checkPreRender:function(){if("prerender"!==BOOMR.visibilityState())return!1;BOOMR.plugins.RT.startTimer("t_load",this.navigationStart);BOOMR.plugins.RT.endTimer("t_load");BOOMR.plugins.RT.startTimer("t_prerender",this.navigationStart);BOOMR.plugins.RT.startTimer("t_postrender");return!0},initFromNavTiming:function(){var e,t,n;if(!this.navigationStart){(t=BOOMR.getPerformance())&&t.navigation&&(this.navigationType=t.navigation.type);if(t&&t.timing)e=t.timing;else if(r.chrome&&r.chrome.csi&&r.chrome.csi().startE){e={navigationStart:r.chrome.csi().startE};n="csi"}else if(r.gtbExternal&&r.gtbExternal.startE()){e={navigationStart:r.gtbExternal.startE()};n="gtb"}if(e){BOOMR.addVar("rt.start",n||"navigation");this.navigationStart=e.navigationStart||e.fetchStart||undefined;this.fetchStart=e.fetchStart||undefined;this.responseStart=e.responseStart||undefined;navigator.userAgent.match(/Firefox\/[78]\./)&&(this.navigationStart=e.unloadEventStart||e.fetchStart||undefined)}else BOOMR.warn("This browser doesn't support the WebTiming API","rt")}},validateLoadTimestamp:function(e,t,n){var r;return t&&t.timing&&t.timing.loadEventEnd?t.timing.loadEventEnd:"xhr"!==n||t&&BOOMR.utils.inArray(t.initiator,BOOMR.constants.BEACON_TYPE_SPAS)?(r=BOOMR.getPerformance())&&r.timing?r.timing.loadEventEnd?r.timing.loadEventEnd:e:BOOMR.t_onload||BOOMR.t_lstart||BOOMR.t_start||e:e},setPageLoadTimers:function(e,t,n){var r,i;if("xhr"!==e){s.initFromCookie();s.initFromNavTiming();if(s.checkPreRender())return!1}if("xhr"===e)if(n.timers)for(var o in n.timers)n.timers.hasOwnProperty(o)&&BOOMR.plugins.RT.setTimer(o,n.timers[o]);else n&&n.timing&&(void 0===(i=n.timing.fetchStart)||n.timing.responseEnd>=i)&&(r=n.timing.responseEnd);else s.responseStart?s.responseStart>=s.navigationStart&&s.responseStart>=s.fetchStart&&(r=s.responseStart):s.timers.hasOwnProperty("t_page")?BOOMR.plugins.RT.endTimer("t_page"):s.t_fb_approx&&(r=s.t_fb_approx);if(r){i?BOOMR.plugins.RT.setTimer("t_resp",i,r):BOOMR.plugins.RT.endTimer("t_resp",r);"load"===e&&s.timers.t_load?BOOMR.plugins.RT.setTimer("t_page",s.timers.t_load.end-r):t<r?BOOMR.addVar("t_page.inv",1):BOOMR.plugins.RT.setTimer("t_page",t-r)}if("load"===e&&s.timers.hasOwnProperty("t_postrender")){BOOMR.plugins.RT.endTimer("t_postrender");BOOMR.plugins.RT.endTimer("t_prerender")}return!0},setSupportingTimestamps:function(e){e&&BOOMR.addVar("rt.tstart",e);"number"==typeof s.navigationStart&&s.navigationStart!==e&&BOOMR.addVar("rt.nstart",s.navigationStart);"number"==typeof s.t_start&&s.t_start!==e&&BOOMR.addVar("rt.cstart",s.t_start);BOOMR.addVar("rt.bstart",BOOMR.t_start);BOOMR.t_lstart&&BOOMR.addVar("rt.blstart",BOOMR.t_lstart);BOOMR.addVar("rt.end",s.timers.t_done.end)},determineTStart:function(e,t){var n;if("xhr"===e){t&&t.name&&s.timers[t.name]?n=s.timers[t.name].start:t&&t.timing&&t.timing.requestStart&&(n=t.timing.requestStart);void 0===n&&t&&BOOMR.utils.inArray(t.initiator,BOOMR.constants.BEACON_TYPE_SPAS)?BOOMR.addVar("rt.start","none"):BOOMR.addVar("rt.start","manual");s.cached_xhr_start=n}else{if(s.navigationStart)n=s.navigationStart;else if(s.t_start&&2!==s.navigationType){n=s.t_start;BOOMR.addVar("rt.start","cookie")}else if(s.cached_t_start)n=s.cached_t_start;else{BOOMR.addVar("rt.start","none");n=undefined}s.cached_t_start=n}BOOMR.debug("Got start time: "+n,"rt");return n},page_ready:function(){this.onloadfired=!0},check_visibility:function(){"visible"===BOOMR.visibilityState()&&(s.visiblefired=!0)},prerenderToVisible:function(){if(s.onloadfired&&s.autorun){BOOMR.debug("Transitioned from prerender to "+BOOMR.visibilityState(),"rt");BOOMR.addVar("vis.pre","1");BOOMR.plugins.RT.done(null,"visible")}},page_unload:function(e){BOOMR.debug("Unload called when unloadfired = "+this.unloadfired,"rt");this.unloadfired||BOOMR.plugins.RT.done(e,"unload");this.updateCookie(!s.navigationStart&&s.strict_referrer?{r:BOOMR.utils.MD5(i.URL)}:null,"beforeunload"===e.type?"ul":"hd");this.unloadfired=!0},_iterable_click:function(e,t,n,r){var i;if(n){BOOMR.debug(e+" called with "+n.nodeName,"rt");for(;n&&n.nodeName&&n.nodeName.toUpperCase()!==t;)n=n.parentNode;if(n&&n.nodeName&&n.nodeName.toUpperCase()===t){BOOMR.debug("passing through","rt");this.refreshSession();this.maybeResetSession(BOOMR.now());i=r(n);this.updateCookie({nu:BOOMR.utils.MD5(i)},"cl");BOOMR.addVar("nu",BOOMR.utils.cleanupURL(i));s.addedVars.push("nu")}}},onclick:function(e){s._iterable_click("Click","A",e,function(e){return e.href})},markComplete:function(){this.onloadfired&&(s.complete=!0)},onsubmit:function(e){s._iterable_click("Submit","FORM",e,function(e){var t="function"==typeof e.getAttribute&&e.getAttribute("action")||i.URL||"";return t.match(/\?/)?t:t+"?"})},onconfig:function(e){e.beacon_url&&(s.beacon_url=e.beacon_url);if(e.RT){e.RT.oboError&&!isNaN(e.RT.oboError)&&e.RT.oboError>s.oboError&&(s.oboError=e.RT.oboError);if(e.RT.loadTime&&!isNaN(e.RT.loadTime)&&e.RT.loadTime>s.loadTime){s.loadTime=e.RT.loadTime;s.timers.t_done&&!isNaN(s.timers.t_done.delta)&&(s.loadTime+=s.timers.t_done.delta)}}},domloaded:function(){BOOMR.plugins.RT.endTimer("t_domloaded")},clear:function(){BOOMR.removeVar("rt.start");if(s.addedVars&&0<s.addedVars.length){BOOMR.removeVar(s.addedVars);s.addedVars=[]}},spaNavigation:function(){s.onloadfired=!0}};BOOMR.plugins.RT={init:function(e){BOOMR.debug("init RT","rt");r!==BOOMR.window&&(r=BOOMR.window);e&&e.CrossDomain&&e.CrossDomain.sending&&(s.crossdomain_sending=!0);if(r&&r.document){i=r.document;BOOMR.utils.pluginConfig(s,e,"RT",["cookie","cookie_exp","session_exp","strict_referrer"]);e&&"undefined"!=typeof e.autorun&&(s.autorun=e.autorun);if(e&&e.beacon_url){s.beacon_url&&!e.force_beacon_url||(s.beacon_url=e.beacon_url);s.next_beacon_url=e.beacon_url}void 0!==i&&(s.r=BOOMR.utils.hashQueryString(i.referrer,!0));s.initFromCookie();if(s.initialized)return this;s.complete=!1;s.timers={};s.check_visibility();BOOMR.subscribe("page_ready",s.page_ready,null,s);BOOMR.subscribe("visibility_changed",s.check_visibility,null,s);BOOMR.subscribe("prerender_to_visible",s.prerenderToVisible,null,s);BOOMR.subscribe("page_ready",this.done,"load",this);BOOMR.subscribe("xhr_load",this.done,"xhr",this);BOOMR.subscribe("dom_loaded",s.domloaded,null,s);BOOMR.subscribe("page_unload",s.page_unload,null,s);BOOMR.subscribe("click",s.onclick,null,s);BOOMR.subscribe("form_submit",s.onsubmit,null,s);BOOMR.subscribe("before_beacon",this.addTimersToBeacon,"beacon",this);BOOMR.subscribe("beacon",s.clear,null,s);BOOMR.subscribe("error",s.markComplete,null,s);BOOMR.subscribe("config",s.onconfig,null,s);BOOMR.subscribe("spa_navigation",s.spaNavigation,null,s);BOOMR.subscribe("interaction",s.markComplete,null,s);BOOMR.getBeaconURL=function(){return s.beacon_url};s.initialized=!0;return this}},startTimer:function(e,t){if(e){"t_page"===e&&this.endTimer("t_resp",t);s.timers[e]={start:"number"==typeof t?t:BOOMR.now()}}return this},endTimer:function(e,t){if(e){s.timers[e]=s.timers[e]||{};s.timers[e].end===undefined&&(s.timers[e].end="number"==typeof t?t:BOOMR.now())}return this},clearTimer:function(e){e&&delete s.timers[e];return this},setTimer:function(e,t,n){e&&(s.timers[e]=void 0!==n?{start:t,end:n,delta:n-t}:{delta:t});return this},addTimersToBeacon:function(e,t){var n,r,i=[];for(n in s.timers)if(s.timers.hasOwnProperty(n)){if("number"!=typeof(r=s.timers[n]).delta){"number"!=typeof r.start&&(r.start="xhr"===t?s.cached_xhr_start:s.cached_t_start);r.delta=r.end-r.start}if(isNaN(r.delta))continue;if(s.basic_timers.hasOwnProperty(n)){BOOMR.addVar(n,r.delta);s.addedVars.push(n)}else i.push(n+"|"+r.delta)}if(i.length){BOOMR.addVar("t_other",i.join(","));s.addedVars.push("t_other")}if("beacon"===t){s.timers={};s.complete=!1}},done:function(e,t){BOOMR.debug("Called done: "+t,"rt");var n,r,i=BOOMR.now(),o=!1;s.complete=!1;r=s.validateLoadTimestamp(i,e,t);if(("load"===t||"visible"===t||"xhr"===t)&&!s.setPageLoadTimers(t,r,e))return this;("load"===t||"visible"===t||"xhr"===t&&e&&"spa_hard"===e.initiator)&&s.getBoomerangTimings();n=s.determineTStart(t,e);s.refreshSession();s.maybeResetSession(r,n);this.endTimer("t_done",r);e&&"xhr"===e.initiator&&this.setTimer("t_done",e.timing.requestStart,e.timing.loadEventEnd);BOOMR.removeVar("t_done","t_page","t_resp","t_postrender","t_prerender","t_load","t_other","rt.tstart","rt.nstart","rt.cstart","rt.bstart","rt.end","rt.subres","http.errno","http.method","http.type","xhr.sync","fetch.bnu","rt.ss","rt.sl","rt.tt","rt.lt");s.setSupportingTimestamps(n);this.addTimersToBeacon(null,t);BOOMR.setReferrer(s.r);"xhr"===t&&e&&e&&e.data&&(e=e.data);if("xhr"===t&&e){o=e.subresource;if(e.url){BOOMR.addVar("u",BOOMR.utils.cleanupURL(e.url.replace(/#.*/,"")));s.addedVars.push("u")}e.status&&(e.status<-1||400<=e.status)&&BOOMR.addVar("http.errno",e.status);e.method&&"GET"!==e.method&&BOOMR.addVar("http.method",e.method);e.type&&"xhr"!==e.type&&BOOMR.addVar("http.type",e.type[0]);e.headers&&BOOMR.addVar("http.hdr",e.headers);e.synchronous&&BOOMR.addVar("xhr.sync",1);e.initiator&&BOOMR.addVar("http.initiator",e.initiator);e.responseBodyNotUsed&&BOOMR.addVar("fetch.bnu",1);s.addedVars.push("http.errno","http.method","http.hdr","xhr.sync","http.initiator","fetch.bnu")}if(o&&"passive"!==o){BOOMR.addVar("rt.subres",1);s.addedVars.push("rt.subres")}if("load"===t||"visible"===t||"xhr"===t&&!o||"unload"===t&&!s.onloadfired&&s.autorun&&!s.crossdomain_sending){s.incrementSessionDetails();s.updateCookie(null,"ld")}BOOMR.addVar({"rt.tt":s.loadTime,"rt.obo":s.oboError});s.addedVars.push("rt.tt","rt.obo");s.updateCookie();if("unload"===t){BOOMR.addVar("rt.quit","");if(!s.onloadfired){BOOMR.addVar("rt.abld","");s.addedVars.push("rt.abld")}s.visiblefired||BOOMR.addVar("rt.ntvu","")}s.complete=!0;BOOMR.sendBeacon(s.beacon_url);return this},is_complete:function(e){return s.complete||e&&"error"===e["http.initiator"]},updateCookie:function(){s.updateCookie()},getCookie:function(){var e,t,n;if(!s.cookie)return!1;if(e=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(s.cookie))||{}){if(1&e.z){t=36;n=parseInt(e.ss||0,36)}else{t=10;n=0}e.ss=parseInt(e.ss||0,t);e.tt=parseInt(e.tt||0,t);e.obo=parseInt(e.obo||0,t);e.sl=parseInt(e.sl||0,t);e.se&&(e.se=parseInt(e.se,t)||1800);e.ld&&(e.ld=n+parseInt(e.ld,t));e.ul&&(e.ul=n+parseInt(e.ul,t));e.cl&&(e.cl=n+parseInt(e.cl,t));e.hd&&(e.hd=n+parseInt(e.hd,t))}return e},incrementSessionDetails:function(){s.incrementSessionDetails()},navigationStart:function(){s.navigationStart||s.initFromNavTiming();return s.navigationStart}}}}(window);!function(){var c,y;if(!BOOMR.plugins.BW){(y=[{name:"image-0.png",size:11773,timeout:1400},{name:"image-1.png",size:40836,timeout:1200},{name:"image-2.png",size:165544,timeout:1300},{name:"image-3.png",size:382946,timeout:1500},{name:"image-4.png",size:1236278,timeout:1200},{name:"image-5.png",size:4511798,timeout:1200},{name:"image-6.png",size:9092136,timeout:1200}]).end=y.length;y.start=0;y.l={name:"image-l.gif",size:35,timeout:1e3};c={base_url:"",timeout:15e3,nruns:5,latency_runs:10,user_ip:"",block_beacon:!1,test_https:!1,cookie_exp:604800,cookie:"BA",results:[],latencies:[],latency:null,runs_left:0,aborted:!1,complete:!0,running:!1,initialized:!1,ncmp:function(e,t){return e-t},iqr:function(e){var t,n,r,i,o=e.length-1,a=[];t=(e[Math.floor(.25*o)]+e[Math.ceil(.25*o)])/2;if(0===(r=1.5*((n=(e[Math.floor(.75*o)]+e[Math.ceil(.75*o)])/2)-t)))return e;o++;for(i=0;i<o&&e[i]<n+r;i++)e[i]>t-r&&a.push(e[i]);return a},calc_latency:function(){var e,t,n,r,i,o,a=0,s=0;this.latencies.shift();t=(o=this.iqr(this.latencies.sort(this.ncmp))).length;BOOMR.debug("latencies: "+this.latencies,"bw");BOOMR.debug("lat_filtered: "+o,"bw");for(e=0;e<t;e++){a+=o[e];s+=o[e]*o[e]}n=Math.round(a/t);i=(1.96*(r=Math.sqrt(s/t-a*a/(t*t)))/Math.sqrt(t)).toFixed(2);r=r.toFixed(2);return{mean:n,median:Math.round((o[Math.floor(t/2)]+o[Math.ceil(t/2)])/2),stddev:r,stderr:i}},calc_bw:function(){var e,t,n,r,i,o,a,s,u,c,d,l,f,O,p=0,m=[],g=[],h=0,R=0,M=0,B=0,v=[];for(e=0;e<this.nruns;e++)if(this.results[e]&&this.results[e].r){l=0;for(t=(n=this.results[e].r).length-1;0<=t&&l<3&&n[t];t--)if(null!==n[t].t){p++;l++;f=1e3*y[t].size/n[t].t;m.push(f);if(n[t].t>this.latency.mean){O=1e3*y[t].size/(n[t].t-this.latency.mean);g.push(O)}else v.push(t+"_"+n[t].t)}}BOOMR.debug("got "+p+" readings","bw");BOOMR.debug("bandwidths: "+m,"bw");BOOMR.debug("corrected: "+g,"bw");if(3<m.length){m=this.iqr(m.sort(this.ncmp));g=this.iqr(g.sort(this.ncmp))}else{m=m.sort(this.ncmp);g=g.sort(this.ncmp)}BOOMR.debug("after iqr: "+m,"bw");BOOMR.debug("corrected: "+g,"bw");p=Math.max(m.length,g.length);for(e=0;e<p;e++){if(e<m.length){h+=m[e];R+=Math.pow(m[e],2)}if(e<g.length){M+=g[e];B+=Math.pow(g[e],2)}}p=m.length;r=Math.round(h/p);i=Math.sqrt(R/p-Math.pow(h/p,2));o=Math.round(1.96*i/Math.sqrt(p));i=Math.round(i);p=m.length-1;a=Math.round((m[Math.floor(p/2)]+m[Math.ceil(p/2)])/2);if(g.length<1){BOOMR.debug("not enough valid corrected datapoints, falling back to uncorrected","bw");v.push("l=="+g.length);s=r;u=i;c=o;d=a}else{p=g.length;s=Math.round(M/p);c=(1.96*(u=Math.sqrt(B/p-Math.pow(M/p,2)))/Math.sqrt(p)).toFixed(2);u=u.toFixed(2);p=g.length-1;d=Math.round((g[Math.floor(p/2)]+g[Math.ceil(p/2)])/2)}BOOMR.debug("amean: "+r+", median: "+a,"bw");BOOMR.debug("corrected amean: "+s+", median: "+d,"bw");return{mean:r,stddev:i,stderr:o,median:a,mean_corrected:s,stddev_corrected:u,stderr_corrected:c,median_corrected:d,debug_info:v}},load_img:function(t,n,r){var e=this.base_url+y[t].name+"?t="+BOOMR.utils.generateId(10),i=0,o=0,a=new Image,s=this;function u(e){return function(){r&&r.call(s,t,o,n,e);if(null!==e){a.onload=a.onerror=null;a=null;clearTimeout(i);s=r=null}}}a.onload=u(!0);a.onerror=u(!1);i=setTimeout(u(null),y[t].timeout+Math.min(400,this.latency?this.latency.mean:400));o=BOOMR.now();a.src=e},lat_loaded:function(e,t,n,r){if(n===this.latency_runs+1){if(null!==r){var i=BOOMR.now()-t;this.latencies.push(i)}0===this.latency_runs&&(this.latency=this.calc_latency());BOOMR.setImmediate(this.iterate,null,null,this)}},img_loaded:function(e,t,n,r){if(n===this.runs_left+1&&!this.results[this.nruns-n].r[e])if(null!==r){var i={start:t,end:BOOMR.now(),t:null,state:r,run:n};r&&(i.t=i.end-i.start);this.results[this.nruns-n].r[e]=i;if(e>=y.end-1||this.results[this.nruns-n].r[e+1]!==undefined){BOOMR.debug(BOOMR.utils.objectToString(this.results[this.nruns-n],undefined,2),"bw");n===this.nruns&&(y.start=e);BOOMR.setImmediate(this.iterate,null,null,this)}else this.load_img(e+1,n,this.img_loaded)}else this.results[this.nruns-n].r[e+1]={t:null,state:null,run:n}},finish:function(){this.latency||(this.latency=this.calc_latency());var e=this.calc_bw(),t={bw:e.median_corrected,bw_err:parseFloat(e.stderr_corrected,10),lat:this.latency.mean,lat_err:parseFloat(this.latency.stderr,10),bw_time:Math.round(BOOMR.now()/1e3)};BOOMR.addVar(t);0<e.debug_info.length&&BOOMR.addVar("bw_debug",e.debug_info.join(","));!isNaN(t.bw)&&0<t.bw&&BOOMR.utils.setCookie(this.cookie,{ba:Math.round(t.bw),be:t.bw_err,l:t.lat,le:t.lat_err,ip:this.user_ip,t:t.bw_time},this.user_ip?this.cookie_exp:0);(this.complete=!0)===this.block_beacon&&BOOMR.sendBeacon();this.running=!1},iterate:function(){if(!this.aborted)if(this.runs_left)if(this.latency_runs)this.load_img("l",this.latency_runs--,this.lat_loaded);else{this.results.push({r:[]});this.load_img(y.start,this.runs_left--,this.img_loaded)}else this.finish()},setVarsFromCookie:function(){var e,t,n,r,i,o,a,s,u;if((e=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(c.cookie)))&&e.ba){t=parseInt(e.ba,10);n=parseFloat(e.be,10);r=parseInt(e.l,10)||0;i=parseFloat(e.le,10)||0;o=e.ip.replace(/\.\d+$/,"0");a=parseInt(e.t,10);s=this.user_ip.replace(/\.\d+$/,"0");u=Math.round(BOOMR.now()/1e3);if(o===s&&a>=u-this.cookie_exp&&0<t){this.complete=!0;BOOMR.addVar({bw:t,lat:r,bw_err:n,lat_err:i,bw_time:a});return!0}}return!1}};BOOMR.plugins.BW={init:function(e){if(c.initialized)return this;BOOMR.utils.pluginConfig(c,e,"BW",["base_url","timeout","nruns","cookie","cookie_exp","test_https","block_beacon"]);e&&e.user_ip&&(c.user_ip=e.user_ip);if(!c.base_url)return this;y.start=0;c.runs_left=c.nruns;c.latency_runs=10;c.results=[];c.latencies=[];c.latency=null;c.complete=c.aborted=!1;BOOMR.removeVar("ba","ba_err","lat","lat_err");c.setVarsFromCookie()||BOOMR.subscribe("page_ready",this.run,null,this);c.initialized=!0;return this},run:function(){var e;if(c.running||c.complete)return this;(e=BOOMR.window.document.createElement("a")).href=c.base_url;if(!c.test_https&&"https:"===e.protocol){BOOMR.info("HTTPS detected, skipping bandwidth test","bw");(c.complete=!0)===c.block_beacon&&BOOMR.sendBeacon();return this}c.base_url=e.href;c.running=!0;setTimeout(this.abort,c.timeout);c.iterate();return this},abort:function(){c.aborted=!0;c.running&&c.finish()},is_complete:function(){return!0!==c.block_beacon||c.complete}}}}();!function(){if(!BOOMR.plugins.PaintTiming){var o={"first-paint":"fp","first-contentful-paint":"fcp"},a={initialized:!1,complete:!1,supported:null,timingCache:{},done:function(e,t){var n,r,i;if(this.complete)return this;if("load"!==t&&(!e||"spa_hard"!==e.initiator)){this.complete=!0;return this}if((n=BOOMR.getPerformance())&&"function"==typeof n.getEntriesByType){if((r=n.getEntriesByType("paint"))&&r.length){BOOMR.info("This user agent supports PaintTiming","pt");for(i=0;i<r.length;i++){a.timingCache[r[i].name]=r[i].startTime;o[r[i].name]&&BOOMR.addVar("pt."+o[r[i].name],Math.floor(r[i].startTime),!0)}this.complete=!0;BOOMR.sendBeacon()}}else this.complete=!0}};BOOMR.plugins.PaintTiming={init:function(){if(!this.is_supported()){a.complete=!0;a.initialized=!0}if(!a.complete&&"hidden"===BOOMR.visibilityState()){BOOMR.addVar("pt.hid",1,!0);a.complete=!0}if(!a.initialized){BOOMR.subscribe("page_ready",a.done,"load",a);BOOMR.subscribe("xhr_load",a.done,"xhr",a);BOOMR.subscribe("before_unload",a.done,null,a);a.initialized=!0}return this},is_complete:function(){return!0},is_enabled:function(){return a.initialized&&this.is_supported()},is_supported:function(){if(null!==a.supported)return a.supported;var e=BOOMR.getPerformance();a.supported=e&&"undefined"!=typeof window.PerformancePaintTiming&&"function"==typeof e.getEntriesByType;return a.supported},getTimingFor:function(e){var t,n;if(a.timingCache[e])return a.timingCache[e];if(this.is_supported()){var r;if((r=BOOMR.getPerformance())&&"function"==typeof r.getEntriesByType&&(t=r.getEntriesByType("paint"))&&t.length)for(n=0;n<t.length;n++)if(t[n].name===e){a.timingCache[e]=t[n].startTime;return a.timingCache[e]}}}}}}();!function(){if(!BOOMR.plugins.NavigationTiming){var l={complete:!1,fullySent:!1,sendBeacon:function(){this.complete=!0;BOOMR.sendBeacon()},xhr_done:function(e){var t;if(e&&"spa_hard"===e.initiator)l.done(e);else if(e&&"spa"===e.initiator)l.sendBeacon();else{BOOMR.window;var n,r,i={};if(e){e.data&&(e=e.data);if((t=BOOMR.getPerformance())&&e.restiming){i={nt_red_st:e.restiming.redirectStart,nt_red_end:e.restiming.redirectEnd,nt_fet_st:e.restiming.fetchStart,nt_dns_st:e.restiming.domainLookupStart,nt_dns_end:e.restiming.domainLookupEnd,nt_con_st:e.restiming.connectStart,nt_con_end:e.restiming.connectEnd,nt_req_st:e.restiming.requestStart,nt_res_st:e.restiming.responseStart,nt_res_end:e.restiming.responseEnd};e.restiming.secureConnectionStart&&(i.nt_ssl_st=e.restiming.secureConnectionStart);for(r in i)if(i.hasOwnProperty(r)&&i[r]){i[r]+=t.timing.navigationStart;i[r]=Math.floor(i[r])}}if(e.timing){n=e.timing;i.nt_req_st||(i.nt_req_st=n.requestStart);i.nt_res_st||(i.nt_res_st=n.responseStart);i.nt_res_end||(i.nt_res_end=n.responseEnd);i.nt_domint=n.domInteractive;i.nt_domcomp=n.domComplete;i.nt_load_st=n.loadEventEnd;i.nt_load_end=n.loadEventEnd}for(r in i)i.hasOwnProperty(r)&&!i[r]&&delete i[r];BOOMR.addVar(i);try{l.addedVars.push.apply(l.addedVars,Object.keys(i))}catch(o){}l.sendBeacon()}}},done:function(){var e,t,n,r,i,o,a=BOOMR.window,s={},u=0,c=!1;if(this.complete)return this;l.addedVars=[];if(e=BOOMR.getPerformance()){if("function"==typeof e.getEntriesByType)if((r=e.getEntriesByType("navigation"))&&r.length){BOOMR.info("This user agent supports NavigationTiming2","nt");r=r[0];u=e.timing?e.timing.navigationStart:0}else r=undefined;if(!r&&e.timing){BOOMR.info("This user agent supports NavigationTiming","nt");r=e.timing}if(r){!(s={nt_nav_st:e.timing?e.timing.navigationStart:0,nt_red_st:f(u,r.redirectStart),nt_red_end:f(u,r.redirectEnd),nt_fet_st:f(u,r.fetchStart),nt_dns_st:f(u,r.domainLookupStart),nt_dns_end:f(u,r.domainLookupEnd),nt_con_st:f(u,r.connectStart),nt_con_end:f(u,r.connectEnd),nt_req_st:f(u,r.requestStart),nt_res_st:f(u,r.responseStart),nt_res_end:f(u,r.responseEnd),nt_domloading:f(u,r.domLoading),nt_domint:f(u,r.domInteractive),nt_domcontloaded_st:f(u,r.domContentLoadedEventStart),nt_domcontloaded_end:f(u,r.domContentLoadedEventEnd),nt_domcomp:f(u,r.domComplete),nt_load_st:f(u,r.loadEventStart),nt_load_end:f(u,r.loadEventEnd),nt_unload_st:f(u,r.unloadEventStart),nt_unload_end:f(u,r.unloadEventEnd)}).nt_domloading&&e&&e.timing&&e.timing.domLoading&&(s.nt_domloading=e.timing.domLoading);r.secureConnectionStart&&(s.nt_ssl_st=f(u,r.secureConnectionStart));e.timing&&e.timing.msFirstPaint&&(s.nt_first_paint=e.timing.msFirstPaint);r.workerStart&&(s.nt_worker_start=f(u,r.workerStart));if(r.decodedBodySize||r.transferSize){s.nt_enc_size=r.encodedBodySize;s.nt_dec_size=r.decodedBodySize;s.nt_trn_size=r.transferSize}r.nextHopProtocol&&(s.nt_protocol=r.nextHopProtocol)}if(!s.nt_first_paint&&BOOMR.plugins.PaintTiming){c=BOOMR.plugins.PaintTiming.is_supported();(i=BOOMR.plugins.PaintTiming.getTimingFor("first-paint"))&&(s.nt_first_paint=f(u,i))}if((!s.nt_protocol||!s.nt_first_paint)&&(!r||""!==r.nextHopProtocol)&&!c&&a.chrome&&"function"==typeof a.chrome.loadTimes&&(n=a.chrome.loadTimes())){s.nt_spdy=n.wasFetchedViaSpdy?1:0;s.nt_cinf=n.connectionInfo;"number"==typeof n.firstPaintTime&&0!==n.firstPaintTime&&(s.nt_first_paint=Math.round(1e3*n.firstPaintTime))}if(e.navigation){t=e.navigation;s.nt_red_cnt=t.redirectCount;s.nt_nav_type=t.type}for(o in s)s.hasOwnProperty(o)&&s[o]===undefined&&delete s[o];BOOMR.addVar(s);if(r&&(r.requestStart&&r.navigationStart&&r.requestStart<r.navigationStart||r.responseStart&&r.navigationStart&&r.responseStart<r.navigationStart||r.responseStart&&r.fetchStart&&r.responseStart<r.fetchStart||r.navigationStart&&r.fetchStart<r.navigationStart||r.responseEnd&&r.responseEnd>BOOMR.now()+864e5)){BOOMR.addVar("nt_bad",1);l.addedVars.push("nt_bad")}try{l.addedVars.push.apply(l.addedVars,Object.keys(s))}catch(d){}0<s.nt_load_end&&(this.fullySent=!0)}l.sendBeacon()},clear:function(){if(l.addedVars&&0<l.addedVars.length){BOOMR.removeVar(l.addedVars);l.addedVars=[]}this.complete=this.fullySent},prerenderToVisible:function(){this.complete=!1;this.done()}};BOOMR.plugins.NavigationTiming={init:function(){if(!l.initialized){BOOMR.subscribe("page_ready",l.done,null,l);BOOMR.subscribe("prerender_to_visible",l.prerenderToVisible,null,l);BOOMR.subscribe("xhr_load",l.xhr_done,null,l);BOOMR.subscribe("before_unload",l.done,null,l);BOOMR.subscribe("beacon",l.clear,null,l);l.initialized=!0}return this},is_complete:function(){return!0}}}function f(e,t){return"number"!=typeof t||0===t?undefined:Math.floor((e||0)+t)}}();!function(){var E;if(!BOOMR.plugins.ResourceTiming){var m={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5,html:6,image:7,beacon:8,fetch:9,iframe:"a",subdocument:"a"},T={prefetch:1,preload:2,prerender:3,stylesheet:4},S=["startTime","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","responseEnd","workerStart"],f="\n",g="*",h="0",R="1",M="2",k=1,x=2,A=4,B="3",v="4",y="5";E={complete:!1,sentNavBeacon:!1,initialized:!1,supported:null,xhr_load:function(){if(!this.complete){this.complete=!0;BOOMR.sendBeacon()}},xssBreakWords:[/(h)(ref)/gi,/(s)(rc)/gi,/(a)(ction)/gi],urlLimit:500,clearOnBeacon:!1,trimUrls:[],serverTiming:!0,monitorClearResourceTimings:!1,splitAtPath:!1,trackedResourceTypes:"*",done:function(){if(!this.sentNavBeacon){e();this.complete=!0;this.sentNavBeacon=!0;BOOMR.sendBeacon()}},onBeacon:function(e){var t=BOOMR.getPerformance();e.hasOwnProperty("restiming")&&BOOMR.removeVar("restiming");e.hasOwnProperty("servertiming")&&BOOMR.removeVar("servertiming");if(E.clearOnBeacon&&t){var n=t.clearResourceTimings||t.webkitClearResourceTimings;n&&"function"==typeof n&&n.call(t)}},prerenderToVisible:function(){this.sentNavBeacon=!1;this.done()}};BOOMR.plugins.ResourceTiming={init:function(e){BOOMR.utils.pluginConfig(E,e,"ResourceTiming",["xssBreakWords","clearOnBeacon","urlLimit","trimUrls","trackedResourceTypes","serverTiming","monitorClearResourceTimings","splitAtPath"]);if(E.initialized)return this;if(this.is_supported()){BOOMR.subscribe("page_ready",E.done,null,E);BOOMR.subscribe("prerender_to_visible",E.prerenderToVisible,null,E);BOOMR.subscribe("xhr_load",E.xhr_load,null,E);BOOMR.subscribe("beacon",E.onBeacon,null,E);BOOMR.subscribe("before_unload",E.done,null,E);if(E.monitorClearResourceTimings){var t=this;BOOMR.window.performance.clearResourceTimings=(n=BOOMR.window.performance.clearResourceTimings,function(){t.addResources(BOOMR.window.performance.getEntriesByType("resource"));n.apply(BOOMR.window.performance,arguments)})}}else E.complete=!0;var n;E.initialized=!0;return this},is_complete:function(){return!0},is_enabled:function(){return E.initialized&&this.is_supported()},is_supported:function(){if(null!==E.supported)return E.supported;var e=BOOMR.getPerformance();E.supported=e&&"function"==typeof e.getEntriesByType&&"undefined"!=typeof window.PerformanceResourceTiming;return E.supported},addResources:function(e,t){if(this.is_supported()&&BOOMR.utils.isArray(e)){E.collectedEntries=E.collectedEntries||[];if("number"==typeof t){var r=t-(BOOMR.window.performance.timeOrigin||BOOMR.window.performance.timing.navigationStart);e=BOOMR.utils.arrayFilter(e,function(e){for(var t=0;t<S.length;t++){var n=S[t];e.hasOwnProperty(n)&&(e[n]+=r)}return!0})}Array.prototype.push.apply(E.collectedEntries,e)}},getCompressedResourceTiming:r,getFilteredResourceTiming:F,calculateResourceTimingUnion:function c(e){var t;if(!e||!e.length)return 0;e.sort(function(e,t){return e.fetchStart!==t.fetchStart?e.fetchStart-t.fetchStart:(e.responseStart||e.responseEnd)-(t.responseStart||t.responseEnd)});var n=u(e),r=[],i=0;for(t=0;t<n.length;t++){var o=n[t];o.fetchStart<i&&(o.fetchStart=i);if(o.fetchStart<o.responseEnd){r.push(o);i=o.responseEnd}}var a=u(r),s=0;for(t=0;t<a.length;t++)s+=a[t].responseEnd-a[t].fetchStart;return s},addResourceTimingToBeacon:e,addToBeacon:i,trimTiming:w,convertToTrie:b,optimizeTrie:_,findPerformanceEntriesForFrame:C,toBase36:L,getVisibleEntries:V,reduceFetchStarts:u,compressSize:H,decompressSize:function o(e,t){var n,r;void 0===t&&(t={});n=e.split(",");for(r=0;r<n.length;r++)if("_"===n[r])n[r]=0;else{""===n[r]&&(n[r]=0);n[r]=parseInt(n[r],36);0<r&&(n[r]+=n[0])}1===n.length&&n.push(n[0]);2===n.length&&n.push(n[0]);t.encodedBodySize=n[0];t.transferSize=n[1];t.decodedBodySize=n[2];return t},trimUrl:U,getResourceLatestTime:D,mergePixels:O,countPixels:p,getOptimizedTimepoints:function z(e){var t,n,r,i,o,a,s,u,c,d,l={},f=[];n=Object.keys(e);for(t=0;t<n.length;t++){"undefined"==typeof l[o=Math.round(Number(n[t]))]&&(l[o]=[]);Array.prototype.push.apply(l[o],e[n[t]])}if(0===(n=Object.keys(l).map(Number).sort(function(e,t){return e-t})).length)return{};for(t=0;t<n.length;t++){s=p(r=O(r,l[o=n[t]],o));n[t]=[o,s]}for(t=u=a=i=0;t<n.length;t++){o=n[t][0];s=n[t][1];c=p(r,0,o);if(a<s||u<c){d=(d=(o===Infinity?"":L(Math.round(o-i)))+"~"+L(s-a)+"~"+L(s-c)).replace(/~~/,"-").replace(/~$/,"");f.push(d);i=o;a=s;u=c}}return f.join("!").replace(/!+$/,"")},decompressTimePoints:function a(e){var t,n,r,i={},o=[0,0,0];t=e.split("!");for(n=0;n<t.length;n++)i[(r=t[n].replace(/^~/,"Infinity~").replace("-","~0~").split("~").map(function(e,t){e="Infinity"===e?Infinity:parseInt(e,36);2===t?e=o[1]-e:e+=o[t];return o[t]=e}))[0]]=[r[1],r[2]||r[1]];return i},accumulateServerTimingEntries:d,compressServerTiming:l,indexServerTiming:j,identifyServerTimingEntry:q,decompressServerTiming:function X(e,t){var n=t.split(":"),r=Number(n[0]),i=0,o=0;if(1<n.length){var a=n[1].split(".");""!==a[0]&&(i=Number(a[0]));1<a.length&&(o=Number(a[1]))}var s,u="";if(Array.isArray(e[i])){s=e[i][0];u=e[i][1+o]||""}else s=e[i];return{name:s,duration:r,description:u}},SPECIAL_DATA_PREFIX:g,SPECIAL_DATA_DIMENSION_TYPE:h,SPECIAL_DATA_SIZE_TYPE:R,SPECIAL_DATA_SCRIPT_ATTR_TYPE:M,SPECIAL_DATA_LINK_ATTR_TYPE:v,ASYNC_ATTR:k,DEFER_ATTR:x,LOCAT_ATTR:A,INITIATOR_TYPES:m,REL_TYPES:T}}function b(e,t){var n,r,i,o,a,s,u,c,d={};function l(o){return function(e,t,n){var r,i;if(-1!==t.indexOf(f)){r=t.split(f);for(i=0;i<r.length-1;i++){e.push(r[i]);e.push(f)}t=r.slice(-1)}"number"==typeof o&&n<o&&(t+="/");return e.concat(t)}}for(n in e){r=n;for(i=0;i<E.xssBreakWords.length;i++)r=r.replace(E.xssBreakWords[i],"$1"+f+"$2");if(e.hasOwnProperty(n)){o=e[n];a=t?[(a=r.split("/"))[0]+"//",a[2]+(3<a.length?"/":"")].concat(a.slice(3).reduce(l(a.length-4),[])):r.split("");u=d;for(i=0;i<a.length;i++)void 0===(c=u[s=a[i]])?u=u[s]=i===a.length-1?o:{}:"string"==typeof c?u=u[s]={"|":c}:i===a.length-1?u[s]["|"]=o:u=u[s]}}return d}function _(e,t){var n,r,i,o=0,a=[];for(n in e)e.hasOwnProperty(n)&&a.push(n);for(var s=0;s<a.length;s++){if("object"==typeof e[n=a[s]]&&(r=_(e[n],!1))){delete e[n];if(n===f){n=r.name;o++}else n+=r.name;e[n]=r.value}o++}if(1!==o)return!!t&&e;if(t){(i={})[n]=e[n];return i}return{name:n,value:e[n]}}function w(e,t){"number"!=typeof e&&(e=0);"number"!=typeof t&&(t=0);var n=Math.round(e||0),r=Math.round(t||0);return 0===n?0:n-r}function N(e){try{e.location&&e.location.href;e.document;if("performance"in e&&e.performance)return!0}catch(t){}return!1}function P(e){var t=0;N(e)&&e.performance.timing&&e.performance.timing.navigationStart&&(t=e.performance.timing.navigationStart);return t}function C(e,t,n,r,i){var o,a,s,u,c,d,l,f,O,p,m,g=[],h={},R={};void 0===t&&(t=!0);void 0===n&&(n=0);void 0===r&&(r=0);if(10<r)return g;try{if(!N(e))return g;s=P(e);p=V(e,i);I(m=e.document.createElement("a"),h,"script");I(m,R,"link");if((d=e.document.getElementsByTagName("iframe"))&&d.length)for(o=0;o<d.length;o++){u=P(d[o].contentWindow);c=0;s<u&&(c=n+(u-s));m.href=d[o].src;g=g.concat(C(d[o].contentWindow,!1,c,r+1,p[m.href]))}if("function"!=typeof e.performance.getEntriesByType)return g;function M(e){return E.serverTiming&&e.serverTiming||[]}if(t)if((a=e.performance.getEntriesByType("navigation"))&&1===a.length){l=a[0];g.push({name:e.location.href,startTime:0,initiatorType:"html",redirectStart:l.redirectStart,redirectEnd:l.redirectEnd,fetchStart:l.fetchStart,domainLookupStart:l.domainLookupStart,domainLookupEnd:l.domainLookupEnd,connectStart:l.connectStart,secureConnectionStart:l.secureConnectionStart,connectEnd:l.connectEnd,requestStart:l.requestStart,responseStart:l.responseStart,responseEnd:l.responseEnd,workerStart:l.workerStart,encodedBodySize:l.encodedBodySize,decodedBodySize:l.decodedBodySize,transferSize:l.transferSize,serverTiming:M(l)})}else e.performance.timing&&0!==(f=e.performance.timing).navigationStart&&f.responseEnd<=f.navigationStart+36e5&&g.push({name:e.location.href,startTime:0,initiatorType:"html",redirectStart:f.redirectStart?f.redirectStart-f.navigationStart:0,redirectEnd:f.redirectEnd?f.redirectEnd-f.navigationStart:0,fetchStart:f.fetchStart?f.fetchStart-f.navigationStart:0,domainLookupStart:f.domainLookupStart?f.domainLookupStart-f.navigationStart:0,domainLookupEnd:f.domainLookupEnd?f.domainLookupEnd-f.navigationStart:0,connectStart:f.connectStart?f.connectStart-f.navigationStart:0,secureConnectionStart:f.secureConnectionStart?f.secureConnectionStart-f.navigationStart:0,connectEnd:f.connectEnd?f.connectEnd-f.navigationStart:0,requestStart:f.requestStart?f.requestStart-f.navigationStart:0,responseStart:f.responseStart?f.responseStart-f.navigationStart:0,responseEnd:f.responseEnd?f.responseEnd-f.navigationStart:0});var B=e.performance.getEntriesByType("resource"),v=[];if(e===BOOMR.window&&E.collectedEntries){Array.prototype.push.apply(B,E.collectedEntries);E.collectedEntries=[]}for(o=0;B&&o<B.length;o++){f=B[o];O={name:f.name,initiatorType:f.initiatorType,encodedBodySize:f.encodedBodySize,decodedBodySize:f.decodedBodySize,transferSize:f.transferSize,serverTiming:M(f),visibleDimensions:p[f.name],latestTime:D(f)};for(var y=0;y<S.length;y++){var b=S[y];O[b]="startTime"===b||f[b]?f[b]+n:0}f.hasOwnProperty("_data")&&(O._data=f._data);if(("script"===f.initiatorType||"link"===f.initiatorType)&&h[f.name]){var _=h[f.name];O.scriptAttrs=(_.async?k:0)|(_.defer?x:0);for(;1===_.nodeType&&"BODY"!==_.nodeName;)_=_.parentNode;O.scriptAttrs|="BODY"===_.nodeName?A:0}"link"===f.initiatorType&&R[f.name]&&BOOMR.utils.arrayFind(R[f.name].rel.split(/[\u0009\u000A\u000C\u000D\u0020]+/),function(e){e=e.toLowerCase();if(T[e]){O.linkAttrs=T[e];return!0}});v.push(O)}g=g.concat(v)}catch(w){return g}return g}function I(t,n,e){Array.prototype.forEach.call(t.ownerDocument.getElementsByTagName(e),function(e){t.href=e.currentSrc||e.src||"function"==typeof e.getAttribute&&e.getAttribute("xlink:href")||e.href;t.href.match(/^https?:\/\//)&&(n[t.href]=e)})}function L(e){return"number"==typeof e&&0!==e?e.toString(36):"string"==typeof e?e:""}function V(e,t){var c,d,l={},f=e.document,O=f.createElement("A");c=(t=t||[0,0,0,0])[3]+(e.pageXOffset!==undefined)?e.pageXOffset:(f.documentElement||f.body.parentNode||f.body).scrollLeft;d=t[2]+(e.pageYOffset!==undefined)?e.pageYOffset:(f.documentElement||f.body.parentNode||f.body).scrollTop;["img","iframe","image"].forEach(function(e){var t,n,r,i,o=f.getElementsByTagName(e);for(n=0;n<o.length;n++)if(t=o[n]){i=t.currentSrc||t.src||"function"==typeof t.getAttribute&&t.getAttribute("src")||t.getAttribute("xlink:href");O.href=i;if((i=O.href)&&!l[i]&&((r=t.getBoundingClientRect()).height||t.offsetHeight)&&(r.width||t.offsetWidth)){l[i]=[r.height||t.offsetHeight,r.width||t.offsetWidth,Math.round(r.top+d),Math.round(r.left+c)];if(!t.naturalHeight&&!t.naturalWidth)continue;var a,s,u;t.currentSrc&&(t.srcset||t.parentNode&&t.parentNode.nodeName&&"PICTURE"===t.parentNode.nodeName.toUpperCase())?(a=t.isConnected?t.ownerDocument.createElement("IMG"):new BOOMR.window.Image).src=i:a=t;s=a.naturalHeight||t.naturalHeight;u=a.naturalWidth||t.naturalWidth;!s&&!u||l[i][0]===s&&l[i][1]===u||l[i].push(s,u)}}});return l}function F(e,t,n){var r,i,o=C(BOOMR.window,!0,0,0),a=P(BOOMR.window),s={};if(!o||!o.length)return{entries:[]};o.sort(function(e,t){return e.startTime-t.startTime});var u=[];for(r=0;r<o.length;r++)if((0===(i=o[r]).name.indexOf("http:")||0===i.name.indexOf("https:"))&&!(-1<i.name.indexOf(BOOMR.url)||-1<i.name.indexOf(BOOMR.config_url)||"function"==typeof BOOMR.getBeaconURL&&BOOMR.getBeaconURL()&&-1<i.name.indexOf(BOOMR.getBeaconURL())||e&&a+i.startTime<e)){if(t&&a+i.startTime>t)break;if(void 0===n||"*"===n||!n.length||i.initiatorType&&BOOMR.utils.inArray(i.initiatorType,n)){d(s,i.serverTiming);u.push(i)}}var c=l(s);return{entries:u,serverTiming:{lookup:c,indexed:j(c)}}}function H(e){var t,n,r;if(e.encodedBodySize||e.decodedBodySize||e.transferSize){t=e.transferSize;return[n=e.encodedBodySize,t?t-n:"_",(r=e.decodedBodySize)?r-n:0].map(L).join(",").replace(/,+$/,"")}return""}function U(e,t){var n,r,i;if(e&&t)for(n=0;n<t.length;n++)if("string"==typeof(i=t[n])){if(-1!==(r=e.indexOf(i))){e=e.substr(0,r+i.length)+"...";break}}else i instanceof RegExp&&i.test(e)&&(e=e.replace(i,"$1")+"...");return BOOMR.utils.cleanupURL(e,E.urlLimit)}function D(e){return e.responseEnd?e.responseEnd:e.responseStart&&e.startTime?e.responseStart+.2*(e.responseStart-e.startTime):Infinity}function O(e,t,u){var n=BOOMR.window.screen,c=n.height,d=n.width;return t.reduce(function(e,t){var n,r,i,o,a,s;n=Math.max(0,t[3]);i=Math.max(0,t[2]);r=Math.min(t[3]+t[1],d);o=Math.min(t[2]+t[0],c);if(r<=n||o<=i)return e;for(s=i;s<o;s++){e[s]||(e[s]=[]);for(a=n;a<r;a++)e[s][a]=u}return e},e||[])}function p(e,n,r){n=n||0;r=r||Infinity;return e.reduce(function(e,t){return e+t.filter(function(e){return n<=e&&e<=r}).length},0)}function r(e,t){var n,r,i,o,a,s={},u={},c=F(e,t,E.trackedResourceTypes),d=c.entries,l=c.serverTiming;if(!d||!d.length)return{restiming:{},servertiming:[]};for(n=0;n<d.length;n++){r=d[n];void 0===(i=m[r.initiatorType])&&(i=0);a=i+[w(r.startTime,0),w(r.responseEnd,r.startTime),w(r.responseStart,r.startTime),w(r.requestStart,r.startTime),w(r.connectEnd,r.startTime),w(r.secureConnectionStart,r.startTime),w(r.connectStart,r.startTime),w(r.domainLookupEnd,r.startTime),w(r.domainLookupStart,r.startTime),w(r.redirectEnd,r.startTime),w(r.redirectStart,r.startTime)].map(L).join(",").replace(/,+$/,"");var f=H(r);""!==f&&(a+=g+R+f);r.hasOwnProperty("scriptAttrs")&&(a+=g+M+r.scriptAttrs);r.serverTiming&&r.serverTiming.length&&(a+=g+B+r.serverTiming.reduce(function(e,t,n){var r=String("undefined"!=typeof t.duration?t.duration:t.value);"0."===r.substring(0,2)&&(r=r.substring(1));var i=t.name||t.metric;return e+=(0<n?",":"")+r+q(l.indexed[i].index,l.indexed[i].descriptions[t.description])},""));r.hasOwnProperty("linkAttrs")&&(a+=g+v+r.linkAttrs);o=U(r.name,E.trimUrls);if(r.hasOwnProperty("_data")){var O="";for(var p in r._data)r._data.hasOwnProperty(p)&&(O+=g+y+p+":"+r._data[p]);"undefined"==typeof s[o]?s[o]=a+O:s[o]+=O}else s[o]!==undefined?s[o]+="|"+a:r.visibleDimensions?s[o]=g+h+r.visibleDimensions.map(Math.round).map(L).join(",").replace(/,+$/,"")+"|"+a:s[o]=a;if(r.visibleDimensions){u[r.latestTime]||(u[r.latestTime]=[]);u[r.latestTime].push(r.visibleDimensions)}}return{restiming:_(b(s,E.splitAtPath),!0),servertiming:l.lookup}}function u(e){var t=[];if(!e||!e.length)return t;for(var n=0;n<e.length;n++){var r=e[n];n!==e.length-1&&r.fetchStart===e[n+1].fetchStart||t.push({fetchStart:r.fetchStart,responseEnd:r.responseStart||r.responseEnd})}return t}function e(e,t){var n;if("undefined"!=typeof JSON){BOOMR.removeVar("restiming");BOOMR.removeVar("servertiming");BOOMR.utils.mark("restiming:build:start");n=r(e,t);BOOMR.utils.mark("restiming:build:end");BOOMR.utils.measure("restiming:build","restiming:build:start","restiming:build:end");if(n){BOOMR.info("Client supports Resource Timing API","restiming");i(n)}}}function d(r,e){(e||[]).forEach(function(e){var t=e.name||e.metric;"undefined"==typeof r[t]&&(r[t]={count:0,counts:{}});var n=r[t];n.counts[e.description]=n.counts[e.description]||0;n.counts[e.description]++;n.count++})}function l(r){return Object.keys(r).sort(function(e,t){return r[t].count-r[e].count}).reduce(function(e,n){var t=Object.keys(r[n].counts).sort(function(e,t){return r[n].counts[t]-r[n].counts[e]});e.push(1===t.length&&""===t[0]?n:[n].concat(t));return e},[])}function j(e){return e.reduce(function(e,t,n){var r,i;if(Array.isArray(t)){r=t[0];i=t.slice(1).reduce(function(e,t,n){e[t]=n;return e},{})}else{r=t;i={"":0}}e[r]={index:n,descriptions:i};return e},{})}function q(e,t){var n="";e&&(n+=e);t&&(n+="."+t);n.length&&(n=":"+n);return n}function i(e){BOOMR.addVar("restiming",JSON.stringify(e.restiming));e.servertiming.length&&BOOMR.addVar("servertiming",BOOMR.utils.serializeForUrl(e.servertiming))}}();!function(){var t,n={type:"ct",bandwidth:"bw",metered:"mt",effectiveType:"etype",downlinkMax:"lm",downlink:"dl",rtt:"rtt",saveData:"sd"};if("function"==typeof BOOMR.addVar){"object"==typeof navigator&&(t=navigator.connection||navigator.mozConnection||navigator.webkitConnection||navigator.msConnection);if(t){t.addEventListener&&t.addEventListener("change",function(){e();BOOMR.fireEvent("netinfo",t)});e()}}function e(){var e;for(e in n)if("undefined"!=typeof t[e]){BOOMR.removeVar("mob."+n[e]);t[e]&&BOOMR.addVar("mob."+n[e],t[e])}}}();!function(){var i,u,o,a,s,c,d,l,f,O={};if(!BOOMR.plugins.Memory){f={done:function(){if(i){BOOMR.removeVar("dom.res");t(!0,function(){var e,t,n={};if(O&&"function"==typeof O.getEntriesByType&&(e=O.getEntriesByType("resource"))&&e.length){BOOMR.addVar("dom.res",e.length);t=BOOMR.window.document.createElement("a");[].forEach.call(e,function(e){t.href=e.name;n[t.hostname]=!0});BOOMR.addVar("dom.doms",Object.keys(n).length)}},"resources");o&&BOOMR.addVar({"mem.total":o.totalJSHeapSize,"mem.limit":o.jsHeapSizeLimit,"mem.used":o.usedJSHeapSize});t(d&&l,function(){BOOMR.addVar({"mem.lsln":d.length,"mem.ssln":l.length});window.JSON&&"function"==typeof JSON.stringify&&BOOMR.addVar({"mem.lssz":JSON.stringify(d).length,"mem.sssz":JSON.stringify(l).length})},"localStorage");t(a,function(){BOOMR.addVar({"scr.xy":a.width+"x"+a.height,"scr.bpp":a.colorDepth+"/"+(a.pixelDepth||"")});a.orientation&&BOOMR.addVar("scr.orn",a.orientation.angle+"/"+a.orientation.type);1<i.devicePixelRatio&&BOOMR.addVar("scr.dpx",i.devicePixelRatio);var e=BOOMR.utils.scroll();(e.x||e.y)&&BOOMR.addVar("scr.sxy",e.x+"x"+e.y)},"screen");t(s,function(){s.hardwareConcurrency&&BOOMR.addVar("cpu.cnc",s.hardwareConcurrency);s.maxTouchPoints&&BOOMR.addVar("scr.mtp",s.maxTouchPoints)},"navigator");t(c,function(){c&&"number"==typeof c.level&&BOOMR.addVar("bat.lvl",c.level)},"battery");t(!0,function(){var t;BOOMR.addVar({"dom.ln":e("*"),"dom.sz":u.documentElement.innerHTML.length,"dom.ck":u.cookie.length});t={};BOOMR.addVar(e("img",["dom.img","dom.img.ext","dom.img.uniq"],function(e){return e.src&&!e.src.toLowerCase().match(/^(?:about:|javascript:|data:|#)/)},function(e){return!(t[e.currentSrc||e.src]=t.hasOwnProperty(e.currentSrc||e.src))}));t={};BOOMR.addVar(e("script",["dom.script","dom.script.ext","dom.script.uniq"],function(e){return e.src&&!e.src.toLowerCase().match(/^(?:about:|javascript:|#)/)},function(e){return!(t[e.src]=t.hasOwnProperty(e.src))}));t={};BOOMR.addVar(e("iframe",["dom.iframe","dom.iframe.ext","dom.iframe.uniq"],function(e){return e.src&&!e.src.toLowerCase().match(/^(?:about:|javascript:|#)/)},function(e){return!(t[e.src]=t.hasOwnProperty(e.src))}));t={};BOOMR.addVar(e("link",["dom.link","dom.link.css","dom.link.css.uniq"],function(e){return e.rel&&"stylesheet"===e.rel.toLowerCase()&&e.href&&!e.href.toLowerCase().match(/^(?:about:|javascript:|#)/)},function(e){return!(t[e.href]=t.hasOwnProperty(e.href))}))},"dom")}}};BOOMR.plugins.Memory={init:function(){var e;try{i=BOOMR.window;u=i.document;O=BOOMR.getPerformance();e=i.console;a=i.screen;s=i.navigator;try{d=i.localStorage;l=i.sessionStorage}catch(n){}if(s&&s.battery)c=s.battery;else if(s&&"function"==typeof s.getBattery){var t=s.getBattery();t&&"function"==typeof t.then?t.then(function(e){c=e}):"object"==typeof t&&t.hasOwnProperty("level")&&(c=t)}}catch(r){BOOMR.addError(r,"Memory.init")}o=O&&O.memory?O.memory:e&&e.memory?e.memory:null;if(f.initialized)return this;f.initialized=!0;BOOMR.subscribe("before_beacon",f.done,null,f);return this},is_complete:function(){return!0}}}function e(e,t){var n,r,i,o,a;try{r=(n=u.getElementsByTagName(e)).length;if(t&&t.length){(i={})[t[0]]=r;for(o=2;0<r&&o<arguments.length&&o-1<t.length;o++)if("function"==typeof(a=arguments[o]))try{if((n=BOOMR.utils.arrayFilter(n,a)).length!==r){r=n.length;i[t[o-1]]=r}}catch(s){BOOMR.addError(s,"Memory.nodeList."+e+".filter["+(o-2)+"]")}}return i||r}catch(s){BOOMR.addError(s,"Memory.nodeList."+e);return 0}}function t(e,t,n){if(e)try{t()}catch(r){BOOMR.addError(r,"Memory.done."+n)}}}();!function(){if(!BOOMR.plugins.CACHE_RELOAD){var n={url:""};BOOMR.plugins.CACHE_RELOAD={init:function(e){BOOMR.utils.pluginConfig(n,e,"CACHE_RELOAD",["url"]);if(!n.url)return this;var t=document.createElement("iframe");t.style.display="none";t.src=n.url;document.body.appendChild(t);return this},is_complete:function(){return!0}}}}();!function(){"use strict";BOOMR.utils=BOOMR.utils||{};BOOMR.utils&&BOOMR.utils.md5||(BOOMR.utils.MD5=function h(e,t,n){return t?n?g(t,e):function r(e,t){return o(g(e,t))}(t,e):n?a(e):function i(e){return o(a(e))}(e)});function l(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function s(e,t,n,r,i,o){return l(function a(e,t){return e<<t|e>>>32-t}(l(l(t,e),l(r,o)),i),n)}function f(e,t,n,r,i,o,a){return s(t&n|~t&r,e,t,i,o,a)}function O(e,t,n,r,i,o,a){return s(t&r|n&~r,e,t,i,o,a)}function p(e,t,n,r,i,o,a){return s(t^n^r,e,t,i,o,a)}function m(e,t,n,r,i,o,a){return s(n^(t|~r),e,t,i,o,a)}function u(e,t){e[t>>5]|=128<<t%32;e[14+(t+64>>>9<<4)]=t;var n,r,i,o,a,s=1732584193,u=-271733879,c=-1732584194,d=271733878;for(n=0;n<e.length;n+=16){u=m(u=m(u=m(u=m(u=p(u=p(u=p(u=p(u=O(u=O(u=O(u=O(u=f(u=f(u=f(u=f(i=u,c=f(o=c,d=f(a=d,s=f(r=s,u,c,d,e[n],7,-680876936),u,c,e[n+1],12,-389564586),s,u,e[n+2],17,606105819),d,s,e[n+3],22,-1044525330),c=f(c,d=f(d,s=f(s,u,c,d,e[n+4],7,-176418897),u,c,e[n+5],12,1200080426),s,u,e[n+6],17,-1473231341),d,s,e[n+7],22,-45705983),c=f(c,d=f(d,s=f(s,u,c,d,e[n+8],7,1770035416),u,c,e[n+9],12,-1958414417),s,u,e[n+10],17,-42063),d,s,e[n+11],22,-1990404162),c=f(c,d=f(d,s=f(s,u,c,d,e[n+12],7,1804603682),u,c,e[n+13],12,-40341101),s,u,e[n+14],17,-1502002290),d,s,e[n+15],22,1236535329),c=O(c,d=O(d,s=O(s,u,c,d,e[n+1],5,-165796510),u,c,e[n+6],9,-1069501632),s,u,e[n+11],14,643717713),d,s,e[n],20,-373897302),c=O(c,d=O(d,s=O(s,u,c,d,e[n+5],5,-701558691),u,c,e[n+10],9,38016083),s,u,e[n+15],14,-660478335),d,s,e[n+4],20,-405537848),c=O(c,d=O(d,s=O(s,u,c,d,e[n+9],5,568446438),u,c,e[n+14],9,-1019803690),s,u,e[n+3],14,-187363961),d,s,e[n+8],20,1163531501),c=O(c,d=O(d,s=O(s,u,c,d,e[n+13],5,-1444681467),u,c,e[n+2],9,-51403784),s,u,e[n+7],14,1735328473),d,s,e[n+12],20,-1926607734),c=p(c,d=p(d,s=p(s,u,c,d,e[n+5],4,-378558),u,c,e[n+8],11,-2022574463),s,u,e[n+11],16,1839030562),d,s,e[n+14],23,-35309556),c=p(c,d=p(d,s=p(s,u,c,d,e[n+1],4,-1530992060),u,c,e[n+4],11,1272893353),s,u,e[n+7],16,-155497632),d,s,e[n+10],23,-1094730640),c=p(c,d=p(d,s=p(s,u,c,d,e[n+13],4,681279174),u,c,e[n],11,-358537222),s,u,e[n+3],16,-722521979),d,s,e[n+6],23,76029189),c=p(c,d=p(d,s=p(s,u,c,d,e[n+9],4,-640364487),u,c,e[n+12],11,-421815835),s,u,e[n+15],16,530742520),d,s,e[n+2],23,-995338651),c=m(c,d=m(d,s=m(s,u,c,d,e[n],6,-198630844),u,c,e[n+7],10,1126891415),s,u,e[n+14],15,-1416354905),d,s,e[n+5],21,-57434055),c=m(c,d=m(d,s=m(s,u,c,d,e[n+12],6,1700485571),u,c,e[n+3],10,-1894986606),s,u,e[n+10],15,-1051523),d,s,e[n+1],21,-2054922799),c=m(c,d=m(d,s=m(s,u,c,d,e[n+8],6,1873313359),u,c,e[n+15],10,-30611744),s,u,e[n+6],15,-1560198380),d,s,e[n+13],21,1309151649),c=m(c,d=m(d,s=m(s,u,c,d,e[n+4],6,-145523070),u,c,e[n+11],10,-1120210379),s,u,e[n+2],15,718787259),d,s,e[n+9],21,-343485551);s=l(s,r);u=l(u,i);c=l(c,o);d=l(d,a)}return[s,u,c,d]}function c(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function d(e){var t,n=[];n[(e.length>>2)-1]=undefined;for(t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function o(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1){t=e.charCodeAt(n);i+=r.charAt(t>>>4&15)+r.charAt(15&t)}return i}function n(e){return unescape(encodeURIComponent(e))}function a(e){return function t(e){return c(u(d(e),8*e.length))}(n(e))}function g(e,t){return function s(e,t){var n,r,i=d(e),o=[],a=[];o[15]=a[15]=undefined;16<i.length&&(i=u(i,8*e.length));for(n=0;n<16;n+=1){o[n]=909522486^i[n];a[n]=1549556828^i[n]}r=u(o.concat(d(t)),512+8*t.length);return c(u(a.concat(r),640))}(n(e),n(t))}}();!function(){BOOMR.utils=BOOMR.utils||{};if(!BOOMR.utils||!BOOMR.utils.Compression){var a=BOOMR.utils.Compression={},d={"true":!0,"false":!(a.jsUrl=function(e){function t(e){return/[^\w-.]/.test(e)?e=e.replace(/[^\w-.]/g,function(e){return"$"===e?"!":(e=e.charCodeAt(0))<256?"*"+("00"+e.toString(16)).slice(-2):"**"+("0000"+e.toString(16)).slice(-4)}):e}var n=[];switch(typeof e){case"number":return isFinite(e)?"~"+e:"~null";case"string":return"~'"+t(e);case"boolean":return"~"+e;case"object":if(!e)return"~null";if(BOOMR.utils.isArray(e)){for(var r=0;r<e.length;r++)r in e&&(n[r]=a.jsUrl(e[r])||"~null");return"~("+(n.join("")||"~")+")"}for(var i in e)if(e.hasOwnProperty(i)){var o=a.jsUrl(e[i]);o&&n.push(t(i)+o)}return"~("+n.sort().join("~")+")";default:return undefined}}),"null":null};a.jsUrlDecompress=function(i){if("string"!=typeof i)return i;var o=0,a=i.length;function s(e){if(i.charAt(o)!==e)throw new Error("bad JSURL syntax: expected "+e+", got "+(i&&i.charAt(o))+" from:"+i+" length:"+i.length.toString()+" char at:"+i.charAt(o));o++}function u(){for(var e,t=o,n="";o<a&&"~"!==(e=i.charAt(o))&&")"!==e;)switch(e){case"*":t<o&&(n+=i.substring(t,o));if("*"===i.charAt(o+1)){n+=String.fromCharCode(parseInt(i.substring(o+2,o+6),16));t=o+=6}else{n+=String.fromCharCode(parseInt(i.substring(o+1,o+3),16));t=o+=3}break;case"!":t<o&&(n+=i.substring(t,o));n+="$";t=++o;break;default:o++}return n+i.substring(t,o)}return function c(){var e,t,n;s("~");switch(t=i.charAt(o)){case"(":o++;if("~"===i.charAt(o)){e=[];if(")"===i.charAt(o+1))o++;else for(;e.push(c()),"~"===i.charAt(o););}else{e={};if(")"!==i.charAt(o))do{e[u()]=c()}while("~"===i.charAt(o)&&++o)}s(")");break;case"'":o++;e=u();break;default:n=o++;for(;o<a&&/[^)~]/.test(i.charAt(o));)o++;var r=i.substring(n,o);if(/[\d\-]/.test(t))e=parseFloat(r);else if(void 0===(e=d[r]))throw new Error("bad value keyword: "+r)}return e}()}}}();!function(e,t){"use strict";e.ErrorStackParser=function s(){var n=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,i=/^(eval@)?(\[native code\])?$/;function o(e,t,n){if("function"==typeof Array.prototype.map)return e.map(t,n);for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=t.call(n,e[i]);return r}function a(e,t,n){if("function"==typeof Array.prototype.filter)return e.filter(t,n);for(var r=[],i=0;i<e.length;i++)t.call(n,e[i])&&r.push(e[i]);return r}return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=e.replace(/[\(\)\s]/g,"").split(":"),n=t.pop(),r=t[t.length-1];if(isNaN(parseFloat(r))||!isFinite(r))return[t.join(":"),n,undefined];var i=t.pop();return[t.join(":"),i,n]},parseV8OrIE:function(e){var t=a(e.stack.split("\n"),function(e){return!!e.match(r)},this);return o(t,function(e){-1<e.indexOf("(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(t.pop()),r=t.join(" ")||undefined,i="eval"===n[0]?undefined:n[0];return{functionName:r,fileName:i,lineNumber:n[1],columnNumber:n[2],source:e}},this)},parseFFOrSafari:function(e){var t=a(e.stack.split("\n"),function(e){return!e.match(i)},this);return o(t,function(e){-1<e.indexOf(" > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1"));if(-1===e.indexOf("@")&&-1===e.indexOf(":"))return{functionName:e};var t=e.split("@"),n=this.extractLocation(t.pop()),r=t.join("@")||undefined;return{functionName:r,fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:e}},this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],i=2,o=n.length;i<o;i+=2){var a=t.exec(n[i]);a&&r.push({fileName:a[2],lineNumber:a[1],source:n[i]})}return r},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],i=0,o=n.length;i<o;i+=2){var a=t.exec(n[i]);a&&r.push({functionName:a[3]||undefined,fileName:a[2],lineNumber:a[1],source:n[i]})}return r},parseOpera11:function(e){var t=a(e.stack.split("\n"),function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this);return o(t,function(e){var t,n=e.split("@"),r=this.extractLocation(n.pop()),i=n.shift()||"",o=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||undefined;i.match(/\(([^\)]*)\)/)&&(t=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=t===undefined||"[arguments not available]"===t?undefined:t.split(",");return{functionName:o,args:a,fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e}},this)}}}()}(this,function WE(){"use strict";var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;function i(e,t,n){if("function"==typeof Array.prototype.map)return e.map(t,n);for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=t.call(n,e[i]);return r}function o(e,t,n){if("function"==typeof Array.prototype.filter)return e.filter(t,n);for(var r=[],i=0;i<e.length;i++)t.call(n,e[i])&&r.push(e[i]);return r}return{parse:function(e){if("undefined"!=typeof e.stacktrace||"undefined"!=typeof e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=e.replace(/[\(\)\s]/g,"").split(":"),n=t.pop(),r=t[t.length-1];if(isNaN(parseFloat(r))||!isFinite(r))return[t.join(":"),n,undefined];var i=t.pop();return[t.join(":"),i,n]},parseV8OrIE:function(e){return i(o(e.stack.split("\n"),function(e){return!!e.match(n)},this),function(e){-1<e.indexOf("(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(t.pop());return{functionName:t.join(" ")||undefined,fileName:"eval"===n[0]?undefined:n[0],lineNumber:n[1],columnNumber:n[2],source:e}},this)},parseFFOrSafari:function(e){return i(o(e.stack.split("\n"),function(e){return!e.match(r)},this),function(e){-1<e.indexOf(" > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1"));if(-1===e.indexOf("@")&&-1===e.indexOf(":"))return{functionName:e};var t=e.split("@"),n=this.extractLocation(t.pop());return{functionName:t.join("@")||undefined,fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:e}},this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],i=2,o=n.length;i<o;i+=2){var a=t.exec(n[i]);a&&r.push({fileName:a[2],lineNumber:a[1],source:n[i]})}return r},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],i=0,o=n.length;i<o;i+=2){var a=t.exec(n[i]);a&&r.push({functionName:a[3]||undefined,fileName:a[2],lineNumber:a[1],source:n[i]})}return r},parseOpera11:function(e){return i(o(e.stack.split("\n"),function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this),function(e){var t,n=e.split("@"),r=this.extractLocation(n.pop()),i=n.shift()||"",o=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||undefined;i.match(/\(([^\)]*)\)/)&&(t=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));return{functionName:o,args:t===undefined||"[arguments not available]"===t?undefined:t.split(","),fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e}},this)}}});!function(){var f;if(!BOOMR.plugins.Errors){var O=["BOOMR_addError","createStackForSend","BOOMR.window.console.error","BOOMR.plugins.Errors.init","BOOMR.window.onerror","BOOMR_plugins_errors_"],p=["Object.send","b.send","wrap","Anonymous function"],m=["/boomerang"];g.prototype.equals=function(e){return"object"==typeof e&&(this.code===e.code&&(this.message===e.message&&(this.functionName===e.functionName&&(this.fileName===e.fileName&&(this.lineNumber===e.lineNumber&&(this.columnNumber===e.columnNumber&&(this.stack===e.stack&&(this.type===e.type&&this.source===e.source))))))))};g.fromError=function(e,t,n){var r,i,o,a,s,u,c,d,l=!1,f=BOOMR.now();if(!e)return null;if(e.stack){5e3<e.stack.length&&(e.stack=e.stack.substr(0,5e3));if((i=ErrorStackParser.parse(e))&&i.length){if(e.generatedStack){if(4<=i.length&&i[1].functionName&&-1!==i[1].functionName.indexOf("createStackForSend")){i=i.slice(3);l=!0}if(3<=i.length&&i[0].functionName&&-1!==i[0].functionName.indexOf("createStackForSend")){i=i[1].fileName===i[2].fileName?i.slice(3):i.slice(2);l=!0}if(1<=i.length&&i[0].functionName&&-1!==i[0].functionName.indexOf("BOOMR_plugins_errors")){i=i.slice(1);l=!0}}for(o=0;o<i.length;o++){u=!1;if(d=(c=i[o]).functionName){for(a=0;a<O.length;a++)if(-1!==d.indexOf(O[a])){i.splice(o,1);o--;u=l=!0;break}if(!u&&c.fileName)for(a=0;a<m.length;a++)if(-1!==c.fileName.indexOf(m[a]))for(s=0;s<p.length;s++)if(-1!==d.indexOf(p[s])){i.splice(o,1);o--;u=l=!0;break}}}if(i.length){r=i[0];(l||"undefined"==typeof e.lineNumber)&&(e.lineNumber=r.lineNumber);(l||"undefined"==typeof e.columnNumber)&&(e.columnNumber=r.columnNumber);(l||"undefined"==typeof e.functionName)&&(e.functionName=r.functionName);(l||"undefined"==typeof e.fileName)&&(e.fileName=r.fileName)}e.stack&&(e.stack=e.stack.replace(/\s\s+/g," "))}}else(e.functionName||e.fileName||e.lineNumber||e.columnNumber)&&(i=[{lineNumber:e.lineNumber,columnNumber:e.columnNumber,fileName:e.fileName,functionName:e.functionName}]);"string"==typeof e.message&&-1!==e.message.indexOf("ReferenceError:")&&"Error"===e.name&&(e.name="ReferenceError");return new g({code:e.code?e.code:undefined,message:e.message?e.message:undefined,functionName:e.functionName?e.functionName:undefined,fileName:e.fileName?e.fileName:undefined,lineNumber:e.lineNumber?e.lineNumber:undefined,columnNumber:e.columnNumber?e.columnNumber:undefined,stack:e.stack?e.stack:undefined,type:e.name?e.name:undefined,source:n,via:t,frames:i,extra:e.extra?e.extra:undefined,timestamp:e.timestamp?e.timestamp:f})};f={onError:undefined,monitorGlobal:!0,monitorNetwork:!0,monitorConsole:!0,monitorEvents:!0,monitorTimeout:!0,monitorRejections:!1,monitorReporting:!1,sendAfterOnload:!1,maxErrors:10,sendInterval:1e3,sendIntervalDuringLoad:2500,sendIntervalId:-1,maxEvents:10,isDuringLoad:!0,initialized:!1,autorun:!0,errors:[],q:[],events:[],reportingObserver:undefined,send:function(t,n,r){var i=BOOMR.now();if(t&&!0!==t.reported){t.reported=!0;n=n||BOOMR.plugins.Errors.VIA_APP;r=r||BOOMR.plugins.Errors.SOURCE_APP;if(t.stack||t.noStack){t.timestamp=t.timestamp||i;f.addError(t,n,r)}else{!function createStackForSend(){try{throw Error(t)}catch(e){(t=e).generatedStack=!0;t.timestamp=t.timestamp||i;f.addError(t,n,r)}}()}}},addError:function(e,t,n){var r,i,o,a=BOOMR.now();if(f.isDuringLoad||f.sendAfterOnload){if(f.onError){try{r=f.onError(e)}catch(s){r=!1}if(!r)return}if(!(f.errors.length>=f.maxErrors)){i=g.fromError(e,t,n);o=f.mergeDuplicateErrors(f.errors,i,!1);BOOMR.fireEvent("error",o||i);f.mergeDuplicateErrors(f.q,i,!0);if((BOOMR.hasSentPageLoadBeacon()||!f.autorun)&&-1===f.sendIntervalId){if(o)return;f.sendIntervalId=setTimeout(function(){f.sendIntervalId=-1;0!==f.q.length&&BOOMR.sendBeaconWhenReady({"rt.start":"manual","http.initiator":"error",api:1,"rt.tstart":a,"rt.end":a},function(){f.addErrorsToBeacon()},this)},f.isDuringLoad?f.sendIntervalDuringLoad:f.sendInterval)}}}},findDuplicateError:function(e,t){if(!BOOMR.utils.isArray(e)||void 0===t)return undefined;for(var n=0;n<e.length;n++)if(e[n].equals(t))return e[n];return undefined},mergeDuplicateErrors:function(e,t,n){if(!BOOMR.utils.isArray(e)||void 0===t)return undefined;var r=f.findDuplicateError(e,t);if(r){n&&(r.count+=t.count);return r}e.push(t);return undefined},onBeacon:function(){BOOMR.removeVar("err");BOOMR.removeVar("api");BOOMR.removeVar("http.initiator")},pageReady:function(){f.isDuringLoad=!1},getErrors:function(){return 0!==f.errors.length&&f.errors},getErrorsForUrl:function(e){e=f.compressErrors(e);return BOOMR.utils.serializeForUrl(e)},addErrorsToBeacon:function(){if(f.q.length){var e=this.getErrorsForUrl(f.q);e&&BOOMR.addVar("err",e);f.q=[]}},beforeBeacon:function(){f.addErrorsToBeacon()},wrapFn:function(o,a,s,u,c){var d=a[o];if("function"==typeof d){var l;"addEventListener"===o&&(l=a.removeEventListener);BOOMR.utils.overwriteNative(a,o,function(){try{var e=Array.prototype.slice.call(arguments),t=e[u],n=s?this===window?BOOMR.window:this:a,r=f.wrap(t,n,c);e[u]=r;if("addEventListener"===o){if(!f.trackFn(n,e[0],t,e[2],r))return;l&&l.apply(n,arguments)}return d.apply(n,e)}catch(i){f.send(i,c);throw i}})}},trackFn:function(e,t,n,r,i){if(!e)return!1;if(-1!==f.trackedFnIdx(e,t,n,r))return!1;e._bmrEvents||(e._bmrEvents=[]);r=!0===(r&&r.capture||r);e._bmrEvents.push([t,n,r,i]);return!0},trackedFnIdx:function(e,t,n,r){var i,o;if(e){e._bmrEvents||(e._bmrEvents=[]);r=!0===(r&&r.capture||r);for(i=0;i<e._bmrEvents.length;i++)if((o=e._bmrEvents[i])[0]===t&&o[1]===n&&o[2]===r)return i;return-1}},wrapRemoveEventListener:function(e){var i,o,t="removeEventListener",a=e[t];"function"==typeof a&&BOOMR.utils.overwriteNative(e,t,function(e,t,n){var r=this===window?BOOMR.window:this;if(-1!==(i=f.trackedFnIdx(r,e,t,n))){o=r._bmrEvents[i][3];a.call(r,e,o,n);r._bmrEvents.splice(i,1)}else a.call(r,e,t,n)})},wrap:function(t,n,r){if("function"!=typeof t)return t;r=r||BOOMR.plugins.Errors.VIA_APP;BOOMR_check_doc_domain();return function(){try{return t.apply(n,arguments)}catch(e){if(-2146823277===e.number&&(r===BOOMR.plugins.Errors.VIA_EVENTHANDLER||r===BOOMR.plugins.Errors.VIA_TIMEOUT))return;BOOMR.isUnloaded||f.send(e,r);throw e}}},test:function(){var e,t;if(0===arguments.length)return undefined;if("function"!=typeof(e=arguments[0]))return undefined;t=1<arguments.length?arguments[1]:BOOMR.window;var n=Array.prototype.slice.call(arguments,2);return f.wrap(e,t).apply(t,n)},normalizeToString:function(e){return void 0===e?"undefined":null===e?"null":"number"==typeof e&&isNaN(e)?"NaN":""===e?"(empty string)":0===e?"0":e?"function"==typeof e?"(function)":e&&"function"==typeof e.toString?e.toString():"(unknown)":"false"},compressErrors:function(e){var t,n,r,i,o,a,s,u,c,d=0;u=BOOMR.window.location.origin;for(t=0;t<e.length;t++){c={};1!==(r=e[t]).count&&(c.n=r.count);if("number"==typeof r.timestamp){d=r.timestamp;c.d=r.timestamp.toString(36)}if(r.frames.length){c.f=[];for(n=0;n<r.frames.length;n++){(i=r.frames[n]).lineNumber&&(i.lineNumber=parseInt(i.lineNumber,10));i.columnNumber&&(i.columnNumber=parseInt(i.columnNumber,10));a={l:i.lineNumber,c:i.columnNumber};"string"==typeof i.fileName&&(-1!==i.fileName.indexOf(u)?a.wo=i.fileName.replace(u,""):a.w=i.fileName);"string"==typeof i.functionName&&(a.f=i.functionName);c.f.push(a)}}if(r.events.length){c.e=[];for(n=0;n<r.events.length;n++){s={t:(o=r.events[n]).type,d:d?d-o.timestamp:o.timestamp};if(o.type===BOOMR.plugins.Errors.EVENT_CLICK){o.id&&(s.i=o.id);o.name&&(s.n=o.name);o.tagName&&(s.g=o.tagName)}else if(o.type===BOOMR.plugins.Errors.EVENT_NETWORK){o.url&&(s.u=o.url);o.method&&(s.m=o.method);o.result&&(s.r=o.result)}else if(o.type===BOOMR.plugins.Errors.EVENT_LOG){o.severity&&(s.s=o.severity);o.message&&(s.m=o.message)}c.e.push(s)}}r.source!==BOOMR.plugins.Errors.SOURCE_APP&&(c.s=r.source);"undefined"!=typeof r.via&&r.via!==BOOMR.plugins.Errors.VIA_APP&&(c.v=r.via);"undefined"!=typeof r.type&&"Error"!==r.type&&(c.t=r.type);r.code&&(c.c=r.code);r.message&&(c.m=r.message);r.extra&&(c.x=r.extra);e[t]=c}return e},decompressErrors:function(e){var t,n,r,i,o;o=BOOMR.window.location.origin;for(t=0;t<e.length;t++){(r=e[t]).n?r.count=parseInt(r.n,10):r.count=1;r.d&&(r.timestamp=parseInt(r.d,36));r.frames=[];r.m&&(r.message=r.m);r.stack=r.message?r.message+" ":"";if(r.f){for(n=0;n<r.f.length;n++){(i=r.f[n]).l&&(i.lineNumber=parseInt(i.l,10));i.c&&(i.columnNumber=parseInt(i.c,10));i.f&&(i.functionName=i.f);i.w&&(i.fileName=i.w);i.wo&&(i.fileName=o+i.wo);delete i.c;delete i.l;delete i.f;delete i.w;delete i.wo;r.frames.push(i);0!==n&&(r.stack+="\n");r.stack+="at";i.functionName&&(r.stack+=" "+i.functionName);i.functionName&&i.fileName?r.stack+=" ("+i.fileName:!i.functionName&&i.fileName&&(r.stack+=" "+i.fileName);i.lineNumber&&(r.stack+=":"+i.lineNumber);i.columnNumber&&(r.stack+=":"+i.columnNumber);i.functionName&&i.fileName&&(r.stack+=")")}r.lineNumber=r.frames[0].lineNumber;r.columnNumber=r.frames[0].columnNumber;r.functionName=r.frames[0].functionName;r.fileName=r.frames[0].fileName}r.events=r.e||[];r.source=r.s?r.s:BOOMR.plugins.Errors.SOURCE_APP;r.via=r.v?r.v:BOOMR.plugins.Errors.VIA_APP;r.type=r.t?r.t:"Error";r.x&&(r.extra=r.x);r.c&&(r.code=parseInt(r.c,10));delete r.c;delete r.f;delete r.e;delete r.s;delete r.v;delete r.t;delete r.m;delete r.n;delete r.x;delete r.d}return e}};var a=BOOMR.plugins.Errors={init:function(e){var n,r;BOOMR.utils.pluginConfig(f,e,"Errors",["onError","monitorGlobal","monitorNetwork","monitorConsole","monitorEvents","monitorTimeout","monitorReporting","monitorRejections","sendAfterOnload","sendInterval","maxErrors"]);if(f.initialized)return this;e&&"undefined"!=typeof e.autorun&&(f.autorun=e.autorun);f.initialized=!0;BOOMR.subscribe("before_beacon",f.beforeBeacon,null,f);BOOMR.subscribe("beacon",f.onBeacon,null,f);BOOMR.subscribe("page_ready",f.pageReady,null,f);BOOMR.registerEvent("error");if(f.monitorGlobal)try{BOOMR.globalOnError?BOOMR.window.onerror&&!BOOMR.window.onerror._bmr&&(BOOMR.globalOnError=BOOMR.window.onerror):BOOMR.globalOnError=BOOMR.window.onerror;BOOMR.utils.overwriteNative(BOOMR.window,"onerror",function(e,t,n,r,i){void 0===i&&"object"==typeof e&&"object"==typeof e.error&&null!==e.error&&(i=e.error);null!=i?f.send(i,a.VIA_GLOBAL_EXCEPTION_HANDLER):f.send({message:e,fileName:t,lineNumber:n,columnNumber:r,noStack:!0},a.VIA_GLOBAL_EXCEPTION_HANDLER);return"function"==typeof BOOMR.globalOnError&&BOOMR.globalOnError.apply(BOOMR.window,arguments)});if(BOOMR.globalErrors){for(var i=0;i<BOOMR.globalErrors.length;i++)f.send(BOOMR.globalErrors[i],a.VIA_GLOBAL_EXCEPTION_HANDLER);delete BOOMR.globalErrors}}catch(t){BOOMR.debug("Exception in the window.onerror handler","Errors")}f.monitorNetwork&&BOOMR.subscribe("xhr_error",function(e){f.send({code:e.status,message:e.url,noStack:!0},a.VIA_NETWORK)});f.monitorRejections&&BOOMR.window.PromiseRejectionEvent&&BOOMR.utils.addListener(BOOMR.window,"unhandledrejection",function(e){var t,n="Unhandled Promise Rejection";if(e&&e.reason){if("string"==typeof e.reason)n=e.reason;else{"string"==typeof e.reason.stack&&(t=e.reason.stack);n="undefined"==typeof e.reason.message?f.normalizeToString(e.reason):f.normalizeToString(e.reason.message)}f.send({message:n,stack:t,noStack:!t},a.VIA_REJECTION)}},!0);if(f.monitorConsole){BOOMR.window.console||(BOOMR.window.console={});BOOMR.globalConsole=BOOMR.window.console.error;try{BOOMR.utils.overwriteNative(BOOMR.window.console,"error",function(){var e=Array.prototype.slice.call(arguments);1===e.length?f.send(f.normalizeToString(e[0]),a.VIA_CONSOLE):f.send(f.normalizeToString(e),a.VIA_CONSOLE);"function"==typeof BOOMR.globalConsole&&("function"==typeof BOOMR.globalConsole.apply?BOOMR.globalConsole.apply(this,e):BOOMR.globalConsole(e[0],e[1],e[2]))})}catch(o){BOOMR.debug("Exception in the window.console.error handler","Errors")}}if(f.monitorEvents)if(BOOMR.window.EventTarget){f.wrapFn("addEventListener",BOOMR.window.EventTarget.prototype,!0,1,a.VIA_EVENTHANDLER);f.wrapRemoveEventListener(BOOMR.window.EventTarget.prototype)}else{if(BOOMR.window){f.wrapFn("addEventListener",BOOMR.window,!1,1,a.VIA_EVENTHANDLER);f.wrapRemoveEventListener(BOOMR.window)}if(BOOMR.window.Node){f.wrapFn("addEventListener",BOOMR.window.Node.prototype,!0,1,a.VIA_EVENTHANDLER);f.wrapRemoveEventListener(BOOMR.window.Node.prototype)}if(BOOMR.window.XMLHttpRequest){f.wrapFn("addEventListener",BOOMR.window.XMLHttpRequest.prototype,!0,1,a.VIA_EVENTHANDLER);f.wrapRemoveEventListener(BOOMR.window.XMLHttpRequest.prototype)}}if(f.monitorTimeout){f.wrapFn("setTimeout",BOOMR.window,!1,0,a.VIA_TIMEOUT);f.wrapFn("setInterval",BOOMR.window,!1,0,a.VIA_TIMEOUT)}if(f.monitorReporting&&BOOMR.window.ReportingObserver){f.reportingObserver=new BOOMR.window.ReportingObserver(function(e,t){if(BOOMR.utils.isArray(e))for(i=0;i<e.length;i++){n=e[i];(r=n&&n.body&&(n.body.message||n.body.reason))&&f.send({message:r,fileName:n.body.sourceFile||n.url,lineNumber:n.body.lineNumber,columnNumber:n.body.columnNumber,noStack:!0},a.VIA_REPORTING_API)}},{buffered:!0});f.reportingObserver.observe()}return this},is_complete:function(){return!0},is_supported:function(){return f.initialized},SOURCE_APP:1,SOURCE_BOOMERANG:2,VIA_APP:1,VIA_GLOBAL_EXCEPTION_HANDLER:2,VIA_NETWORK:3,VIA_CONSOLE:4,VIA_EVENTHANDLER:5,VIA_TIMEOUT:6,VIA_REJECTION:7,VIA_REPORTING_API:8,EVENT_CLICK:1,EVENT_NETWORK:2,EVENT_LOG:3,send:f.send,wrap:f.wrap,test:f.test,BoomerangError:g,BoomerangError:g,findDuplicateError:f.findDuplicateError,mergeDuplicateErrors:f.mergeDuplicateErrors,compressErrors:f.compressErrors,decompressErrors:f.decompressErrors,normalizeToString:f.normalizeToString}}function g(e){"number"==typeof(e=e||{}).count||"string"==typeof e.count?this.count=parseInt(e.count,10):this.count=1;"number"==typeof e.timestamp?this.timestamp=e.timestamp:this.timestamp=BOOMR.now();"number"!=typeof e.code&&"string"!=typeof e.code||(this.code=parseInt(e.code,10));"string"==typeof e.message&&(this.message=e.message);"string"==typeof e.functionName&&(this.functionName=e.functionName);"string"==typeof e.fileName&&(this.fileName=e.fileName);"number"!=typeof e.lineNumber&&"string"!=typeof e.lineNumber||(this.lineNumber=parseInt(e.lineNumber,10));"number"!=typeof e.columnNumber&&"string"!=typeof e.columnNumber||(this.columnNumber=parseInt(e.columnNumber,10));"string"==typeof e.stack&&(this.stack=e.stack);"string"==typeof e.type&&(this.type=e.type);"undefined"!=typeof e.extra&&(this.extra=e.extra);this.source="number"==typeof e.source||"string"==typeof e.source?parseInt(e.source,10):BOOMR.plugins.Errors.SOURCE_APP;"number"!=typeof e.via&&"string"!=typeof e.via||(this.via=parseInt(e.via,10));BOOMR.utils.isArray(e.frames)?this.frames=e.frames:this.frames=[];BOOMR.utils.isArray(e.events)?this.events=e.events:this.events=[]}}();!function(){"use strict";if(!BOOMR.plugins.TPAnalytics){var d={complete:!1,clientids:!1,dropParams:[],googleAnalytics:function(){var e,t,n,r,i,o={},a=BOOMR.window,s=["utm_source","utm_medium","utm_term","utm_content","utm_campaign"];if(d.clientids){if("function"==typeof a.ga)try{a.ga(function(e){e&&(o.clientid=e.get("clientId"))});o.clientid||"function"!=typeof a.ga.getAll||(i=a.ga.getAll())&&0<i.length&&(o.clientid=i[0].get("clientId"))}catch(u){l("googleAnalytics: "+u)}o.clientid||((r=BOOMR.utils.getCookie("_ga"))?(r=r.split("."))&&4===r.length&&(o.clientid=r[2]+"."+r[3]):(r=BOOMR.utils.getCookie("__utma"))&&(r=r.split("."))&&6===r.length&&(o.clientid=r[1]+"."+r[2]))}for(e=0;e<s.length;e++){t=s[e];(n=BOOMR.utils.getQueryParamValue(t))&&(o[t]=n)}return o},adobeAnalytics:function(){var e,t,n,r,i,o={},a=BOOMR.window;if("undefined"!=typeof a._satellite||"function"==typeof a.mboxCreate||"function"==typeof a.Visitor||"object"==typeof a.s){if(d.clientids)if("object"==typeof a.s&&"object"==typeof a.s.visitor&&"function"==typeof a.s.visitor.getAnalyticsVisitorID&&"function"==typeof a.s.visitor.getMarketingCloudVisitorID)try{(t=a.s.visitor.getMarketingCloudVisitorID())&&(o.mid=t);(e=a.s.visitor.getAnalyticsVisitorID())&&(o.aid=a.s.visitor.getAnalyticsVisitorID())}catch(s){l("adobeAnalytics: "+s)}else if((n=/AMCV_([A-Z0-9]+)%40AdobeOrg/.exec(a.document.cookie))&&"function"==typeof a.Visitor&&"function"==typeof a.Visitor.getInstance)try{if((r=a.Visitor.getInstance(n[1]+"@AdobeOrg"))&&"function"==typeof r.getAnalyticsVisitorID&&"function"==typeof r.getMarketingCloudVisitorID){(t=r.getMarketingCloudVisitorID())&&(o.mid=t);(e=r.getAnalyticsVisitorID())&&(o.aid=r.getAnalyticsVisitorID())}}catch(s){l("adobeAnalytics: "+s)}else(e=(e=BOOMR.utils.getCookie("s_vi"))?(i=/\|([^\[]+)/.exec(e))&&0<i.length?i[1]:"":BOOMR.utils.getCookie("s_fid"))&&(o.aid=e);if("object"==typeof a.s){"string"==typeof a.s.campaign&&a.s.campaign&&(o.campaign=a.s.campaign);"string"==typeof a.s.purchaseID&&a.s.purchaseID&&(o.purchaseid=a.s.purchaseID)}}return o},ibmAnalytics:function(){var e,t,n,r,i,o,a={},s=BOOMR.window,u={cm_mmc:[/([^&#]+?)-_-([^&#]+?)-_-([^&#]+?)-_-([^&#]+)/,["mmc_vendor","mmc_category","mmc_placement","mmc_item"]],cm_sp:[/([^&#]+?)-_-([^&#]+?)-_-([^&#]+)/,["sp_type","sp_promotion","sp_link"]],cm_re:[/([^&#]+?)-_-([^&#]+?)-_-([^&#]+)/,["re_version","re_pagearea","re_link"]]};if(d.clientids&&"function"==typeof s.cmRetrieveUserID)try{s.cmRetrieveUserID(function(e){a.coreid=e})}catch(c){l("ibmAnalytics: "+c)}for(r in u)if(u.hasOwnProperty(r)&&(e=BOOMR.utils.getQueryParamValue(r))){i=u[r][0];o=u[r][1];if((t=i.exec(e))&&t.length>o.length)for(n=0;n<o.length;n++)t[n+1]&&(a[o[n]]=decodeURIComponent(t[n+1]))}return a},done:function(e,t){var n,r,i={ga:this.googleAnalytics,aa:this.adobeAnalytics,ia:this.ibmAnalytics};if(!this.complete&&("load"===t||e&&"spa_hard"===e.initiator)){for(n in i){r=i[n]();for(var o in r){var a="tp."+n+"."+o;BOOMR.utils.inArray(a,this.dropParams)||BOOMR.addVar(a,r[o],!0)}}this.complete=!0;BOOMR.sendBeacon()}},prerenderToVisible:function(){this.complete=!1;this.done({},"load")}};BOOMR.plugins.TPAnalytics={init:function(e){BOOMR.utils.pluginConfig(d,e,"TPAnalytics",["clientids","dropParams"]);if(!d.initialized){BOOMR.utils.isArray(d.dropParams)||(d.dropParams=[]);BOOMR.subscribe("page_ready",d.done,"load",d);BOOMR.subscribe("xhr_load",d.done,"xhr",d);BOOMR.subscribe("prerender_to_visible",d.prerenderToVisible,"load",d);d.initialized=!0}return this},is_complete:function(){return!0}}}function l(e){BOOMR.warn(e,"TPAnalytics")}}();!function(r){"use strict";var e,t;void 0!==r?t=(e=r).UserTimingCompression:e={};var f,n=f={};n.noConflict=function(){e.UserTimingCompression=t;return n};n.trimTiming=function(e,t){"number"!=typeof e&&(e=0);"number"!=typeof t&&(t=0);var n=Math.round(e),r=Math.round(t);return 0===n?0:n-r};n.toBase36=function(e){return"number"==typeof e?e.toString(36):""};n.findUserTimingForFrame=function(e){var t;if(!e)return[];try{e.location&&e.location.href;if(!("performance"in e&&e.performance&&e.performance.getEntriesByType))return t;t=(t=e.performance.getEntriesByType("mark")).concat(e.performance.getEntriesByType("measure"))}catch(n){return t}return t};n.compressUserTiming=function(e,t){var n,r,i,o=0,a={};t=t||{};if(!e||!e.length)return[];for(n=0;n<e.length;n++){"undefined"==typeof a[(r=e[n]).name]&&(a[r.name]=[]);"mark"===r.entryType?a[r.name].push({startTime:r.startTime}):"measure"===r.entryType&&a[r.name].push({startTime:r.startTime,duration:r.duration})}for(var s in a)if(a.hasOwnProperty(s)){if(t.map&&"undefined"==typeof t.map[s])continue;var u=a[s];if(t.map&&"undefined"!=typeof t.map[s]){delete a[s];s=t.map[s]}for(n=o=0;n<u.length;n++){var c=u[n];"0"===(i=f.toBase36(f.trimTiming(c.startTime,o)))&&(i="");var d=i;if("number"==typeof c.duration){var l=f.toBase36(Math.round(c.duration));d+="_";"0"!==l&&(d+=l)}o=c.startTime;u[n]=d}a[s]=f.compressArray(u)}return a};n.convertToTrie=function(e){var t,n,r,i,o,a,s,u={};if(!e)return{};for(t in e)if(e.hasOwnProperty(t)){r=e[t];i=t.split("");a=u;for(n=0;n<i.length;n++)void 0===(s=a[o=i[n]])?a=a[o]=n===i.length-1?r:{}:"string"==typeof s?a=a[o]={"!":s}:n===i.length-1?a[o]["!"]=r:a=a[o]}return u};n.optimizeTrie=function(e,t){var n,r,i,o=0;if(!e)return{};for(n in e){if("object"==typeof e[n]&&(r=this.optimizeTrie(e[n],!1))){delete e[n];e[n+=r.name]=r.value}o++}if(1!==o)return!!t&&e;if(t){(i={})[n]=e[n];return i}return{name:n,value:e[n]}};n.compressArray=function(e){var t=0,n="";if(!e||0===e.length||e.constructor!==Array)return"";for(var r=0;r<e.length;r++){var i=e[r];if(r<e.length-1&&i===e[r+1])t++;else if(0<t){n+=(""!==n?".":"")+i+"*";2<=t&&(n+=t+1);t=0}else n+=(""!==n?".":"")+i}return/^\d+$/.test(n)?parseInt(n,10):n};n.getCompressedUserTiming=function(t){var e,n;e=(t=t||{}).window||r;n=this.findUserTimingForFrame(e);t.from&&(n=n.filter(function(e){return e.startTime+e.duration>=t.from}));t.to&&(n=n.filter(function(e){return e.startTime<=t.to}));return f.compressUserTiming(n,t)};n.compressForUri=function(e){if("object"!=typeof e)return"";var t=!1;for(var n in e)if(e.hasOwnProperty(n)){if(isNaN(n)){t=!1;break}t=!0}if(t)return"1"+f.flattenMap(e);var r=f.convertToTrie(e),i=f.optimizeTrie(r,!0),o=f.jsUrl(i),a=f.flattenArray(e);if("string"!=typeof a||0===a.length)return"";var s=encodeURIComponent(o),u=encodeURIComponent(a);return s.length<u.length?o:"0"+a};n.flattenArray=function(e){var t=[];if("object"!=typeof e)return"";for(var n in e)if(e.hasOwnProperty(n)){var r=(e[n]+"").replace("~","%7E");n=n.replace("~","%7E");t.push(n+"~"+r)}return t=t.join("~")};n.flattenMap=function(e){var t=[];if("object"!=typeof e)return"";for(var n in e)if(e.hasOwnProperty(n)){var r=parseInt(n,10),i=f.toBase36(r);if(1331<r)continue;1<i.length&&(i="-"+(1===(i=f.toBase36(r-36)).length?"0":"")+i);t.push(i+e[n])}t.sort();return t=t.join("~")};n.jsUrl=function(n){function r(e){return/[^\w-.]/.test(e)?e=e.replace(/[^\w-.]/g,function(e){return"$"===e?"!":(e=e.charCodeAt(0))<256?"*"+("00"+e.toString(16)).slice(-2):"**"+("0000"+e.toString(16)).slice(-4)}):e}switch(typeof n){case"number":return isFinite(n)?"~"+n:"~null";case"string":return"~'"+r(n);case"boolean":return"~"+n;case"object":return n?Array.isArray(n)?"~("+(n.map(function(e){return f.jsUrl(e)||"~null"}).join("")||"~")+")":"~("+Object.keys(n).map(function(e){var t=f.jsUrl(n[e]);return t&&r(e)+t}).filter(function(e){return e}).sort().join("~")+")":"~null";default:return undefined}};void 0!==e&&(e.UserTimingCompression=n)}("undefined"!=typeof window?window:undefined);!function(){if(!BOOMR.plugins.UserTiming){var s={complete:!1,initialized:!1,supported:!1,options:{from:0,window:BOOMR.window},getUserTiming:function(){var e=this.findUserTimingForFrame(s.options.window);s.options.from&&(e=e.filter(function(e){return e.startTime+e.duration>=s.options.from}));var t,n=window.UserTimingCompression||BOOMR.window.UserTimingCompression;if(void 0===n){if(0===e.length)return null;for(var r={},i=0,o=e.length;i<o;i++){var a=e[i];r[a.entryType]=r[a.entryType]||{};"mark"===a.entryType?r[a.entryType][a.name]=a.startTime:"measure"===a.entryType&&(r[a.entryType][a.name]=a.duration)}return JSON.stringify(r)}t=n.compressUserTiming(e);return n.compressForUri(t)},addEntriesToBeacon:function(){var e,t=BOOMR.hrNow();if(!this.complete){BOOMR.removeVar("usertiming");(e=this.getUserTiming())&&BOOMR.addVar({usertiming:e});this.options.from=t;this.complete=!0}},findUserTimingForFrame:function(e){var t;if(!e)return[];try{e.location&&e.location.href;if(!("performance"in e&&e.performance&&e.performance.getEntriesByType))return t;t=(t=e.performance.getEntriesByType("mark")).concat(e.performance.getEntriesByType("measure"))}catch(n){return t}return t},clearMetrics:function(e){e.hasOwnProperty("usertiming")&&BOOMR.removeVar("usertiming");this.complete=!1},subscribe:function(){BOOMR.subscribe("before_beacon",this.addEntriesToBeacon,null,this);BOOMR.subscribe("beacon",this.clearMetrics,null,this)},pageReady:function(){this.checkSupport()&&this.subscribe()},checkSupport:function(){if(this.supported)return!0;var e=BOOMR.getPerformance();if(e&&"function"==typeof e.getEntriesByType){var t=e.getEntriesByType("mark"),n=e.getEntriesByType("measure");if(BOOMR.utils.isArray(t)&&BOOMR.utils.isArray(n)){BOOMR.info("Client supports UserTiming API","usertiming");return this.supported=!0}}return!1}};BOOMR.plugins.UserTiming={init:function(e){if(s.initialized)return this;s.checkSupport()?s.subscribe():BOOMR.subscribe("page_ready",s.pageReady,null,s);s.initialized=!0;return this},is_complete:function(){return!0},is_supported:function(){return s.initialized&&s.supported}}}}();!function(){function r(e,t,n){var r=e.shift();if("string"==typeof r){var i=r.split("."),o=BOOMR,a=BOOMR;"BOOMR"===i[0]&&i.shift();for(;i.length&&o&&("object"==typeof o||"function"==typeof o);){var s=i.shift();o=o[s];i.length&&(a=a[s])}if(!i.length&&"function"==typeof o){var u=o.apply(a,e);"function"==typeof t&&t.call(n,u)}}}function e(e){for(var t=0;t<e.length;t++){var n=e[t];n&&(BOOMR.utils.isArray(n)?r(n):"object"==typeof n&&BOOMR.utils.isArray(n.arguments)&&r(n.arguments,n.callback,n.thisArg))}}var t=BOOMR.window.BOOMR_mq;BOOMR.utils.isArray(t)&&e(t);BOOMR.window.BOOMR_mq={push:function(){e(arguments)}}}();BOOMR.t_end=(new Date).getTime();
//# sourceMappingURL=boomerang-1.0.0-debug.min.js.map